<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="Declaring objects You can use three.js&rsquo;s entire object catalogue and all properties. When in doubt, always consult the docs.
❌ You could lay out an object like this:"><meta property="og:title" content="Objects, properties and constructor arguments"><meta property="og:description" content="Declaring objects You can use three.js&rsquo;s entire object catalogue and all properties. When in doubt, always consult the docs.
❌ You could lay out an object like this:"><meta property="og:type" content="website"><meta property="og:image" content="https://mindulle.github.io/gardenicon.png"><meta property="og:url" content="https://mindulle.github.io/garden/Develop/Trees/Dev/Programming/LibsFwks/webFrontend/Component/React/React-three/API/Objects-properties-and-constructor-arguments/"><meta property="og:width" content="200"><meta property="og:height" content="200"><meta name=twitter:card content="summary"><meta name=twitter:title content="Objects, properties and constructor arguments"><meta name=twitter:description content="Declaring objects You can use three.js&rsquo;s entire object catalogue and all properties. When in doubt, always consult the docs.
❌ You could lay out an object like this:"><meta name=twitter:image content="https://mindulle.github.io/gardenicon.png"><title>Objects, properties and constructor arguments</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://mindulle.github.io/garden/icon.png><link href=https://mindulle.github.io/garden/styles.b369a84b3c6e6bfd686ad1f9da65641c.min.css rel=stylesheet><link href=https://mindulle.github.io/garden/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://mindulle.github.io/garden/js/darkmode.71fd764547989a0d567451669afd7a55.min.js></script>
<script src=https://mindulle.github.io/garden/js/util.a0ccf91e1937fe761a74da4946452710.min.js></script>
<link rel=preload href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css as=style onload='this.onload=null,this.rel="stylesheet"' integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/core@1.2.1></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/dom@1.2.1></script>
<script async src=https://mindulle.github.io/garden/js/popover.aa9bc99c7c38d3ae9538f218f1416adb.min.js></script>
<script defer src=https://mindulle.github.io/garden/js/code-title.ce4a43f09239a9efb48fee342e8ef2df.min.js></script>
<script defer src=https://mindulle.github.io/garden/js/clipboard.2913da76d3cb21c5deaa4bae7da38c9f.min.js></script>
<script defer src=https://mindulle.github.io/garden/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const SEARCH_ENABLED=!1,LATEX_ENABLED=!0,PRODUCTION=!0,BASE_URL="https://mindulle.github.io/garden",fetchData=Promise.all([fetch("https://mindulle.github.io/garden/indices/linkIndex.85ff629fcf392a99c571863cb7258b88.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://mindulle.github.io/garden/indices/contentIndex.8a67ffc9afb2645aa9f64af1bbd8668a.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://mindulle.github.io/garden",!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!0;drawGraph("https://mindulle.github.io/garden",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!0,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!0,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}var i=document.getElementsByClassName("mermaid");i.length>0&&import("https://unpkg.com/mermaid@9/dist/mermaid.esm.min.mjs").then(e=>{e.default.init()});function a(n){const e=n.target,t=e.className.split(" "),s=t.includes("broken"),o=t.includes("internal-link");plausible("Link Click",{props:{href:e.href,broken:s,internal:o,graph:!1}})}const r=document.querySelectorAll("a");for(link of r)link.className.includes("root-title")&&link.addEventListener("click",a,{once:!0})},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'’':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/mindulle.github.io\/garden\/js\/router.d6fe6bd821db9ea97f9aeefae814d8e7.min.js"
    attachSPARouting(init, render)
  </script><script defer data-domain=mindulle.github.io/garden src=https://plausible.io/js/script.js></script>
<script>window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)}</script></head><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://mindulle.github.io/garden/js/full-text-search.e6e2e0c213187ca0c703d6e2c7a77fcd.min.js></script><div class=singlePage><header><h1 id=page-title><a class=root-title href=https://mindulle.github.io/garden>Mindulle Garden✨</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>Objects, properties and constructor arguments</h1><p class=meta>Last updated
Dec 28, 2022
<a href=https://github.com/mindulle/garden/tree/hugo/content/Develop/Trees/Dev/Programming/Libs&Fwks/webFrontend/Component/React/React-three/API/Objects,%20properties%20and%20constructor%20arguments.md rel=noopener>Edit Source</a></p><ul class=tags></ul><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><a href=#declaring-objects>Declaring objects</a></li><li><a href=#constructor-arguments>Constructor arguments</a></li><li><a href=#shortcuts>Shortcuts</a><ol><li><a href=#set>Set</a></li><li><a href=#setscalar>SetScalar</a></li></ol></li><li><a href=#piercing-into-nested-properties>Piercing into nested properties</a></li><li><a href=#dealing-with-non-scene-objects>Dealing with non-scene objects</a><ol><li><a href=#attach>Attach</a></li></ol></li><li><a href=#putting-already-existing-objects-into-the-scene-graph>Putting already existing objects into the scene-graph</a></li><li><a href=#using-3rd-party-objects-declaratively>Using 3rd-party objects declaratively</a></li><li><a href=#disposal>Disposal</a></li></ol></nav></details></aside><a href=#declaring-objects><h2 id=declaring-objects><span class=hanchor arialabel=Anchor># </span>Declaring objects</h2></a><p>You can use
<a href=https://threejs.org/docs rel=noopener>three.js&rsquo;s entire object catalogue and all properties</a>. When in doubt, always consult the docs.</p><p>❌ You could lay out an object like this:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>mesh</span>
</span></span><span class=line><span class=cl>  <span class=na>visible</span>
</span></span><span class=line><span class=cl>  <span class=na>userData</span><span class=o>=</span><span class=p>{{</span> <span class=nx>hello</span><span class=o>:</span> <span class=s1>&#39;world&#39;</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>  <span class=na>position</span><span class=o>=</span><span class=p>{</span><span class=k>new</span> <span class=nx>THREE</span><span class=p>.</span><span class=nx>Vector3</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>)}</span>
</span></span><span class=line><span class=cl>  <span class=na>rotation</span><span class=o>=</span><span class=p>{</span><span class=k>new</span> <span class=nx>THREE</span><span class=p>.</span><span class=nx>Euler</span><span class=p>(</span><span class=nb>Math</span><span class=p>.</span><span class=nx>PI</span> <span class=o>/</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>)}</span>
</span></span><span class=line><span class=cl>  <span class=na>geometry</span><span class=o>=</span><span class=p>{</span><span class=k>new</span> <span class=nx>THREE</span><span class=p>.</span><span class=nx>SphereGeometry</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>16</span><span class=p>,</span> <span class=mi>16</span><span class=p>)}</span>
</span></span><span class=line><span class=cl>  <span class=na>material</span><span class=o>=</span><span class=p>{</span><span class=k>new</span> <span class=nx>THREE</span><span class=p>.</span><span class=nx>MeshBasicMaterial</span><span class=p>({</span> <span class=nx>color</span><span class=o>:</span> <span class=k>new</span> <span class=nx>THREE</span><span class=p>.</span><span class=nx>Color</span><span class=p>(</span><span class=s1>&#39;hotpink&#39;</span><span class=p>),</span> <span class=nx>transparent</span><span class=o>:</span> <span class=kc>true</span> <span class=p>})}</span>
</span></span><span class=line><span class=cl><span class=p>/&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>✅ The problem is that all of these properties will always be re-created. Instead, you should define properties declaratively.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>mesh</span> <span class=na>visible</span> <span class=na>userData</span><span class=o>=</span><span class=p>{{</span> <span class=nx>hello</span><span class=o>:</span> <span class=s1>&#39;world&#39;</span> <span class=p>}}</span> <span class=na>position</span><span class=o>=</span><span class=p>{[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]}</span> <span class=na>rotation</span><span class=o>=</span><span class=p>{[</span><span class=nb>Math</span><span class=p>.</span><span class=nx>PI</span> <span class=o>/</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>]}&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>sphereGeometry</span> <span class=na>args</span><span class=o>=</span><span class=p>{[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>16</span><span class=p>,</span> <span class=mi>16</span><span class=p>]}</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>meshStandardMaterial</span> <span class=na>color</span><span class=o>=</span><span class=s>&#34;hotpink&#34;</span> <span class=na>transparent</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>mesh</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><a href=#constructor-arguments><h2 id=constructor-arguments><span class=hanchor arialabel=Anchor># </span>Constructor arguments</h2></a><p>In three.js objects are classes that are instantiated. These classes can receive one-time constructor arguments (<code>new THREE.SphereGeometry(1, 32)</code>), and properties (<code>someObject.visible = true</code>). In React Three Fiber, constructor arguments are always passed as an array via <code>args</code>. If args change later on, the object must naturally get reconstructed from scratch!</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>sphereGeometry</span> <span class=na>args</span><span class=o>=</span><span class=p>{[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>32</span><span class=p>]}</span> <span class=p>/&gt;</span>
</span></span></code></pre></td></tr></table></div></div><a href=#shortcuts><h2 id=shortcuts><span class=hanchor arialabel=Anchor># </span>Shortcuts</h2></a><a href=#set><h3 id=set><span class=hanchor arialabel=Anchor># </span>Set</h3></a><p>All properties whose underlying object has a <code>.set()</code> method can directly receive the same arguments that <code>set</code> would otherwise take. For example
<a href=https://threejs.org/docs/#api/en/math/Color.set rel=noopener><code>THREE.Color.set</code></a> can take a color string, so instead of <code>color={new THREE.Color('hotpink')}</code> you can simply write <code>color="hotpink"</code>. Some <code>set</code> methods take multiple arguments, for instance
<a href=https://threejs.org/docs/#api/en/math/Vector3.set rel=noopener><code>THREE.Vector3</code></a>, give it an array in that case <code>position={[100, 0, 0]}</code>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>mesh</span> <span class=na>position</span><span class=o>=</span><span class=p>{[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]}</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>meshStandardMaterial</span> <span class=na>color</span><span class=o>=</span><span class=s>&#34;hotpink&#34;</span> <span class=p>/&gt;</span>
</span></span></code></pre></td></tr></table></div></div><hint>If you do link up an existing object to a property, for instance a THREE.Vector3() to a position, be aware that this
will end up copying the object in most cases as it calls .copy() on the target. This only applies to objects that
expose both .set() and .copy() (Vectors, Eulers, Matrix, ...). If you link up an existing material or geometry on the
other hand, it will overwrite, because more these objects do not have a .set() method.</hint>
<a href=#setscalar><h3 id=setscalar><span class=hanchor arialabel=Anchor># </span>SetScalar</h3></a><p>Properties that have a <code>setScalar</code> method (for instance <code>Vector3</code>) can be set like so:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=c1>// Translates to &lt;mesh scale={[1, 1, 1]} /&gt;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>&lt;</span><span class=nt>mesh</span> <span class=na>scale</span><span class=o>=</span><span class=p>{</span><span class=mi>1</span><span class=p>}</span> <span class=p>/&gt;</span>
</span></span></code></pre></td></tr></table></div></div><a href=#piercing-into-nested-properties><h2 id=piercing-into-nested-properties><span class=hanchor arialabel=Anchor># </span>Piercing into nested properties</h2></a><p>If you want to reach into nested attributes (for instance: <code>mesh.rotation.x</code>), just use dash-case.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>mesh</span> <span class=na>rotation</span><span class=err>-</span><span class=na>x</span><span class=o>=</span><span class=p>{</span><span class=mi>1</span><span class=p>}</span> <span class=na>material</span><span class=err>-</span><span class=na>uniforms</span><span class=err>-</span><span class=na>resolution</span><span class=err>-</span><span class=na>value</span><span class=o>=</span><span class=p>{[</span><span class=mi>512</span><span class=p>,</span> <span class=mi>512</span><span class=p>]}</span> <span class=p>/&gt;</span>
</span></span></code></pre></td></tr></table></div></div><a href=#dealing-with-non-scene-objects><h2 id=dealing-with-non-scene-objects><span class=hanchor arialabel=Anchor># </span>Dealing with non-scene objects</h2></a><p>You can put non-Object3D primitives (geometries, materials, etc) into the render tree as well. They take the same properties and constructor arguments they normally would.</p><p>You might be wondering why you would want to put something in the &ldquo;scene&rdquo; that normally would not be part of it, in a vanilla three.js app at least. For the same reason you declare any object: it becomes managed, reactive and auto-disposes. These objects are not technically part of the scene, but they &ldquo;attach&rdquo; to a parent which is.</p><a href=#attach><h3 id=attach><span class=hanchor arialabel=Anchor># </span>Attach</h3></a><p>Use <code>attach</code> to bind objects to their parent. If you unmount the attached object it will be taken off its parent automatically.</p><p>The following attaches a material to the <code>material</code> property of a mesh and a geometry to the <code>geometry</code> property:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>mesh</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>meshBasicMaterial</span> <span class=na>attach</span><span class=o>=</span><span class=s>&#34;material&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>boxGeometry</span> <span class=na>attach</span><span class=o>=</span><span class=s>&#34;geometry&#34;</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><hint>All native elements ending with "Material" receive attach="material", and all elements ending with "Geometry" receive
attach="geometry". You do not strictly have to type it out!</hint><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>mesh</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>meshBasicMaterial</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>boxGeometry</span> <span class=p>/&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>You can also deeply nest attach through piercing. The following adds a buffer-attribute to <code>geometry.attributes.position</code> and then adds the buffer geometry to <code>mesh.geometry</code>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>mesh</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>bufferGeometry</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>bufferAttribute</span> <span class=na>attach</span><span class=o>=</span><span class=s>&#34;attributes-position&#34;</span> <span class=na>count</span><span class=o>=</span><span class=p>{</span><span class=nx>v</span><span class=p>.</span><span class=nx>length</span> <span class=o>/</span> <span class=mi>3</span><span class=p>}</span> <span class=na>array</span><span class=o>=</span><span class=p>{</span><span class=nx>v</span><span class=p>}</span> <span class=na>itemSize</span><span class=o>=</span><span class=p>{</span><span class=mi>3</span><span class=p>}</span> <span class=p>/&gt;</span>
</span></span></code></pre></td></tr></table></div></div><a href=#more-examples><h4 id=more-examples><span class=hanchor arialabel=Anchor># </span>More examples</h4></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=c1>// Attach bar to foo.a
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>&lt;</span><span class=nt>foo</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>bar</span> <span class=na>attach</span><span class=o>=</span><span class=s>&#34;a&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Attach bar to foo.a.b and foo.a.b.c (nested object attach)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>&lt;</span><span class=nt>foo</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>bar</span> <span class=na>attach</span><span class=o>=</span><span class=s>&#34;a-b&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>bar</span> <span class=na>attach</span><span class=o>=</span><span class=s>&#34;a-b-c&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Attach bar to foo.a[0] and foo.a[1] (array attach is just object attach)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>&lt;</span><span class=nt>foo</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>bar</span> <span class=na>attach</span><span class=o>=</span><span class=s>&#34;a-0&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>bar</span> <span class=na>attach</span><span class=o>=</span><span class=s>&#34;a-1&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Attach bar to foo via explicit add/remove functions
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>&lt;</span><span class=nt>foo</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>bar</span> <span class=na>attach</span><span class=o>=</span><span class=p>{(</span><span class=nx>parent</span><span class=p>,</span> <span class=nx>self</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>parent</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=nx>self</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>remove</span><span class=p>(</span><span class=nx>self</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=o>/&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// The same as a one liner
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>&lt;</span><span class=nt>foo</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>bar</span> <span class=na>attach</span><span class=o>=</span><span class=p>{(</span><span class=nx>parent</span><span class=p>,</span> <span class=nx>self</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>(</span><span class=nx>parent</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=nx>self</span><span class=p>),</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=nx>parent</span><span class=p>.</span><span class=nx>remove</span><span class=p>(</span><span class=nx>self</span><span class=p>))}</span> <span class=p>/&gt;</span>
</span></span></code></pre></td></tr></table></div></div><a href=#real-world-use-cases><h4 id=real-world-use-cases><span class=hanchor arialabel=Anchor># </span>Real-world use-cases:</h4></a><p>Attaching to nested objects, for instance a shadow-camera:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-diff data-lang=diff><span class=line><span class=cl><span class=gd>- &lt;directionalLight
</span></span></span><span class=line><span class=cl><span class=gd>-   castShadow
</span></span></span><span class=line><span class=cl><span class=gd>-   position={[2.5, 8, 5]}
</span></span></span><span class=line><span class=cl><span class=gd>-   shadow-mapSize={[1024, 1024]}
</span></span></span><span class=line><span class=cl><span class=gd>-   shadow-camera-far={50}
</span></span></span><span class=line><span class=cl><span class=gd>-   shadow-camera-left={-10}
</span></span></span><span class=line><span class=cl><span class=gd>-   shadow-camera-right={10}
</span></span></span><span class=line><span class=cl><span class=gd>-   shadow-camera-top={10}
</span></span></span><span class=line><span class=cl><span class=gd>-   shadow-camera-bottom={-10}
</span></span></span><span class=line><span class=cl><span class=gd>- /&gt;
</span></span></span><span class=line><span class=cl><span class=gd></span><span class=gi>+ &lt;directionalLight castShadow position={[2.5, 8, 5]} shadow-mapSize={[1024, 1024]}&gt;
</span></span></span><span class=line><span class=cl><span class=gi>+   &lt;orthographicCamera attach=&#34;shadow-camera&#34; args={[-10, 10, 10, -10]} /&gt;
</span></span></span><span class=line><span class=cl><span class=gi>+ &lt;/directionalLight&gt;
</span></span></span></code></pre></td></tr></table></div></div><p>Arrays must have explicit order, for instance multi-materials:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>mesh</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span><span class=nx>colors</span><span class=p>.</span><span class=nx>map</span><span class=p>((</span><span class=nx>color</span><span class=p>,</span> <span class=nx>index</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>&lt;</span><span class=nt>meshBasicMaterial</span> <span class=na>key</span><span class=o>=</span><span class=p>{</span><span class=nx>index</span><span class=p>}</span> <span class=na>attach</span><span class=o>=</span><span class=p>{</span><span class=sb>`material-</span><span class=si>${</span><span class=nx>index</span><span class=si>}</span><span class=sb>`</span><span class=p>}</span> <span class=na>color</span><span class=o>=</span><span class=p>{</span><span class=nx>color</span><span class=p>}</span> <span class=p>/&gt;}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>mesh</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><a href=#putting-already-existing-objects-into-the-scene-graph><h2 id=putting-already-existing-objects-into-the-scene-graph><span class=hanchor arialabel=Anchor># </span>Putting already existing objects into the scene-graph</h2></a><p>You can use the <code>primitive</code> placeholder for that. You can still give it properties or attach nodes to it. Never add the same object multiple times, this is not allowed in three.js! Primitives will not dispose of the object they carry on unmount, you are responsible for disposing of it!</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>const</span> <span class=nx>mesh</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>THREE</span><span class=p>.</span><span class=nx>Mesh</span><span class=p>(</span><span class=nx>geometry</span><span class=p>,</span> <span class=nx>material</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>Component</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>&lt;</span><span class=nt>primitive</span> <span class=na>object</span><span class=o>=</span><span class=p>{</span><span class=nx>mesh</span><span class=p>}</span> <span class=na>position</span><span class=o>=</span><span class=p>{[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>]}</span> <span class=p>/&gt;</span>
</span></span></code></pre></td></tr></table></div></div><a href=#using-3rd-party-objects-declaratively><h2 id=using-3rd-party-objects-declaratively><span class=hanchor arialabel=Anchor># </span>Using 3rd-party objects declaratively</h2></a><p>The <code>extend</code> function extends React Three Fiber&rsquo;s catalogue of JSX elements. Components added this way can then be referenced in the scene-graph using camel casing similar to other primitives.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>extend</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@react-three/fiber&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>OrbitControls</span><span class=p>,</span> <span class=nx>TransformControls</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;three-stdlib&#39;</span>
</span></span><span class=line><span class=cl><span class=nx>extend</span><span class=p>({</span> <span class=nx>OrbitControls</span><span class=p>,</span> <span class=nx>TransformControls</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>orbitControls</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>transformControls</span> <span class=p>/&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>If you&rsquo;re using TypeScript, you&rsquo;ll also need to
<a rel=noopener class="internal-link broken" data-src=/react-three-fiber/tutorials/typescript#extending-jsx-intrinsic-elements>extend the JSX namespace</a>.</p><a href=#disposal><h2 id=disposal><span class=hanchor arialabel=Anchor># </span>Disposal</h2></a><p>Freeing resources is a
<a href=https://threejs.org/docs/#manual/en/introduction/How-to-dispose-of-objects rel=noopener>manual chore in <code>three.js</code></a>, but React is aware of object-lifecycles, hence React Three Fiber will attempt to free resources for you by calling <code>object.dispose()</code>, if present, on all unmounted objects.</p><p>If you manage assets by yourself, globally or in a cache, this may <em>not</em> be what you want. You can switch it off by placing <code>dispose={null}</code> onto meshes, materials, etc, or even on parent containers like groups, it is now valid for the entire tree.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>const</span> <span class=nx>globalGeometry</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>THREE</span><span class=p>.</span><span class=nx>BoxGeometry</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>globalMaterial</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>THREE</span><span class=p>.</span><span class=nx>MeshBasicMaterial</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>Mesh</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>group</span> <span class=na>dispose</span><span class=o>=</span><span class=p>{</span><span class=kc>null</span><span class=p>}&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>mesh</span> <span class=na>geometry</span><span class=o>=</span><span class=p>{</span><span class=nx>globalGeometry</span><span class=p>}</span> <span class=na>material</span><span class=o>=</span><span class=p>{</span><span class=nx>globalMaterial</span><span class=p>}</span> <span class=p>/&gt;</span>
</span></span></code></pre></td></tr></table></div></div></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li>No backlinks found</li></ul></div><div><script async src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://mindulle.github.io/garden/js/graph.6579af7b10c818dbd2ca038702db0224.js></script></div></div><div id=contact_buttons><footer><p>Made by mindulle using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, © 2023</p><ul><li><a href=https://mindulle.github.io/garden>Home</a></li><li><a href=https://github.com/mindulle>GitHub</a></li></ul></footer></div></div></body></html>