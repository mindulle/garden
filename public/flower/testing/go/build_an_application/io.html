<!DOCTYPE html>
<html><head><title>io</title><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:title" content="io"/><meta property="og:description" content="IO and sorting § You can find all the code for this chapter here In the previous chapter we continued iterating on our application by adding a new endpoint /league."/><meta property="og:image" content="https://mindulle.github.io/garden/static/og-image.png"/><meta property="og:width" content="1200"/><meta property="og:height" content="675"/><link rel="icon" href="../../../../static/icon.png"/><meta name="description" content="IO and sorting § You can find all the code for this chapter here In the previous chapter we continued iterating on our application by adding a new endpoint /league."/><meta name="generator" content="Quartz"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link href="../../../../index.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://fonts.googleapis.com/css2?family=IBM Plex Mono&amp;family=Schibsted Grotesk:wght@400;700&amp;family=Source Sans Pro:ital,wght@0,400;0,600;1,400;1,600&amp;display=swap" rel="stylesheet" type="text/css" spa-preserve/><script src="../../../../prescript.js" type="application/javascript" spa-preserve></script><script type="application/javascript" spa-preserve>const fetchData = fetch(`../../../../static/contentIndex.json`).then(data => data.json())</script></head><body data-slug="flower/testing/go/build_an_application/io"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h1 class="page-title "><a href="../../../..">Mindulle Garden</a></h1><div class="spacer mobile-only"></div><div class="search "><div id="search-icon"><p>Search</p><div></div><svg tabIndex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search</title><desc id="desc">Search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg></div><div id="search-container"><div id="search-space"><input autocomplete="off" id="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div id="results-container"></div></div></div></div><div class="darkmode "><input class="toggle" id="darkmode-toggle" type="checkbox" tabIndex="-1"/><label id="toggle-label-light" for="darkmode-toggle" tabIndex="-1"><svg xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" version="1.1" id="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35;" xmlSpace="preserve"><title>Light mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg></label><label id="toggle-label-dark" for="darkmode-toggle" tabIndex="-1"><svg xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" version="1.1" id="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'" xmlSpace="preserve"><title>Dark mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></label></div><div class="explorer desktop-only"><button type="button" id="explorer" data-behavior="collapse" data-collapsed="collapsed" data-savestate="true" data-tree="[{&quot;path&quot;:&quot;core&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/fundamental&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/fundamental/design&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/law&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/law/computing&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/law/dev&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/law/management&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/law/ux&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/paradigm&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/paradigm/FP&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/principle&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/principle/computing&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/principle/dev&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/principle/management&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/principle/ux&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/smells&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/smells/bloaters&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/smells/change-preventers&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/smells/couplers&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/smells/dispensables&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/smells/oo-abusers&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/smells/other&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/techniques&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/techniques/composing-methods&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/techniques/dealing-with-generalization&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/techniques/moving-features-between-objects&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/techniques/organizing-data&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/techniques/simplifying-conditional-expressions&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/techniques/simplifying-method-calls&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/what-is-refactoring&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/automation&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/go&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/go/anti_patterns&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/go/build_an_application&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/go/fundamentals&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/go/testing_fundamentals&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/go/tips&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/javascript&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/javascript/0 The Golden Rule&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/javascript/1 The Test Anatomy&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/javascript/2 Backend&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/javascript/3 Frontend&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/javascript/4 Measuring Tests Effectiveness&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/javascript/5 Continuous Integration&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/javascript/assets&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/Design Patterns&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/Design Patterns/catalog&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/Design Patterns/catalog/behavioral&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/Design Patterns/catalog/creational&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/Design Patterns/catalog/structural&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/Design Patterns/intro&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/Design Patterns/react&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/Design Patterns/vanilla&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/rendering&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/rendering/react&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/rendering/vanilla&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/go&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/go/anti_patterns&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/go/build_an_application&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/go/fundamentals&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/go/testing_fundamentals&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/go/tips&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/javascript&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/javascript/0 The Golden Rule&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/javascript/1 The Test Anatomy&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/javascript/2 Backend&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/javascript/3 Frontend&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/javascript/4 Measuring Tests Effectiveness&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/javascript/5 Continuous Integration&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/javascript/assets&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/bizSys&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/bizSys/externalView&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/bizSys/internalView&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/ITSys&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/ITSys/behavioralView&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/ITSys/externalView&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/ITSys/externalView/the-elements-of-view&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/ITSys/interactionView&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/ITSys/structuralView&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/prepIntegr&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/prepIntegr/processView&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/prepIntegr/staticView&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;seed&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;seed/computing&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;seed/software development&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;seed/Unix&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;tree&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;tree/Product Design&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;tree/Product Design/Design&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;tree/Software Development&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;tree/Software Development/Architecture&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;tree/Software Development/Project Layout&quot;,&quot;collapsed&quot;:true}]"><h1>Explorer</h1><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="explorer-content"><ul class="overflow" id="explorer-ul"><li><div><div class="folder-outer open"><ul style="padding-left:0;" class="content" data-folderul><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core"><button class="folder-button"><p class="folder-title">core</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge"><button class="folder-button"><p class="folder-title">background-knowledge</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/fundamental"><button class="folder-button"><p class="folder-title">fundamental</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/fundamental"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/fundamental/design"><button class="folder-button"><p class="folder-title">design</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/fundamental/design"><li><li><a href="../../../../core/background-knowledge/fundamental/design/BASIS_01_laws" data-for="core/background-knowledge/fundamental/design/BASIS_01_laws">BASIS_01_laws</a></li></li><li><li><a href="../../../../core/background-knowledge/fundamental/design/BASIS_02_process" data-for="core/background-knowledge/fundamental/design/BASIS_02_process">BASIS_02_process</a></li></li><li><li><a href="../../../../core/background-knowledge/fundamental/design/BASIS_02_process-gist" data-for="core/background-knowledge/fundamental/design/BASIS_02_process-gist">BASIS_02_process-gist</a></li></li><li><li><a href="../../../../core/background-knowledge/fundamental/design/BASIS_03_information_architecture" data-for="core/background-knowledge/fundamental/design/BASIS_03_information_architecture">BASIS_03_information_architecture</a></li></li><li><li><a href="../../../../core/background-knowledge/fundamental/design/LAYOUT_01_artboard_and_margin" data-for="core/background-knowledge/fundamental/design/LAYOUT_01_artboard_and_margin">LAYOUT_01_artboard_and_margin</a></li></li><li><li><a href="../../../../core/background-knowledge/fundamental/design/LAYOUT_02_grid_basis" data-for="core/background-knowledge/fundamental/design/LAYOUT_02_grid_basis">LAYOUT_02_grid_basis</a></li></li><li><li><a href="../../../../core/background-knowledge/fundamental/design/LAYOUT_03_set_grid_layout" data-for="core/background-knowledge/fundamental/design/LAYOUT_03_set_grid_layout">LAYOUT_03_set_grid_layout</a></li></li><li><li><a href="../../../../core/background-knowledge/fundamental/design/LAYOUT_04_grouping" data-for="core/background-knowledge/fundamental/design/LAYOUT_04_grouping">LAYOUT_04_grouping</a></li></li><li><li><a href="../../../../core/background-knowledge/fundamental/design/LAYOUT_05_sorting" data-for="core/background-knowledge/fundamental/design/LAYOUT_05_sorting">LAYOUT_05_sorting</a></li></li><li><li><a href="../../../../core/background-knowledge/fundamental/design/LAYOUT_06_contrast" data-for="core/background-knowledge/fundamental/design/LAYOUT_06_contrast">LAYOUT_06_contrast</a></li></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/law"><button class="folder-button"><p class="folder-title">law</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/law"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/law/computing"><button class="folder-button"><p class="folder-title">computing</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/law/computing"><li><li><a href="../../../../core/background-knowledge/law/computing/Amdahls-Law" data-for="core/background-knowledge/law/computing/Amdahls-Law">Amdahls-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/computing/Galls-Law" data-for="core/background-knowledge/law/computing/Galls-Law">Galls-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/computing/Metcalfes-Law" data-for="core/background-knowledge/law/computing/Metcalfes-Law">Metcalfes-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/computing/Moores-Law" data-for="core/background-knowledge/law/computing/Moores-Law">Moores-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/computing/Reeds-Law" data-for="core/background-knowledge/law/computing/Reeds-Law">Reeds-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/computing/The-Law-of-Conservation-of-Complexity-Teslers-Law" data-for="core/background-knowledge/law/computing/The-Law-of-Conservation-of-Complexity-Teslers-Law">The-Law-of-Conservation-of-Complexity-Teslers-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/computing/The-Law-of-Leaky-Abstractions" data-for="core/background-knowledge/law/computing/The-Law-of-Leaky-Abstractions">The-Law-of-Leaky-Abstractions</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/law/dev"><button class="folder-button"><p class="folder-title">dev</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/law/dev"><li><li><a href="../../../../core/background-knowledge/law/dev/Brooks-Law" data-for="core/background-knowledge/law/dev/Brooks-Law">Brooks-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/dev/Conways-Law" data-for="core/background-knowledge/law/dev/Conways-Law">Conways-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/dev/Cunninghams-Law" data-for="core/background-knowledge/law/dev/Cunninghams-Law">Cunninghams-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/dev/Hutbers-Law" data-for="core/background-knowledge/law/dev/Hutbers-Law">Hutbers-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/dev/Hyrums-Law-The-Law-of-Implicit-Interfaces" data-for="core/background-knowledge/law/dev/Hyrums-Law-The-Law-of-Implicit-Interfaces">Hyrums-Law-The-Law-of-Implicit-Interfaces</a></li></li><li><li><a href="../../../../core/background-knowledge/law/dev/Kernighans-Law" data-for="core/background-knowledge/law/dev/Kernighans-Law">Kernighans-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/dev/The-Law-of-Triviality" data-for="core/background-knowledge/law/dev/The-Law-of-Triviality">The-Law-of-Triviality</a></li></li><li><li><a href="../../../../core/background-knowledge/law/dev/Wadlers-Law" data-for="core/background-knowledge/law/dev/Wadlers-Law">Wadlers-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/dev/Wheatons-Law" data-for="core/background-knowledge/law/dev/Wheatons-Law">Wheatons-Law</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/law/management"><button class="folder-button"><p class="folder-title">management</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/law/management"><li><li><a href="../../../../core/background-knowledge/law/management/Goodharts-Law" data-for="core/background-knowledge/law/management/Goodharts-Law">Goodharts-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/management/Hofstadters-Law" data-for="core/background-knowledge/law/management/Hofstadters-Law">Hofstadters-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/management/Parkinsons-Law" data-for="core/background-knowledge/law/management/Parkinsons-Law">Parkinsons-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/management/Putts-Law" data-for="core/background-knowledge/law/management/Putts-Law">Putts-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/management/The-Hype-Cycle--Amaras-Law" data-for="core/background-knowledge/law/management/The-Hype-Cycle--Amaras-Law">The-Hype-Cycle--Amaras-Law</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/law/ux"><button class="folder-button"><p class="folder-title">ux</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/law/ux"><li><li><a href="../../../../core/background-knowledge/law/ux/[cognitiveBias]Peak-End_Rule" data-for="core/background-knowledge/law/ux/[cognitiveBias]Peak-End_Rule">[cognitiveBias]Peak-End_Rule</a></li></li><li><li><a href="../../../../core/background-knowledge/law/ux/[cognitiveBias]Serial_Position_Effect" data-for="core/background-knowledge/law/ux/[cognitiveBias]Serial_Position_Effect">[cognitiveBias]Serial_Position_Effect</a></li></li><li><li><a href="../../../../core/background-knowledge/law/ux/[cognitiveBias]Von_Restorff_Effect" data-for="core/background-knowledge/law/ux/[cognitiveBias]Von_Restorff_Effect">[cognitiveBias]Von_Restorff_Effect</a></li></li><li><li><a href="../../../../core/background-knowledge/law/ux/[cognitiveBias]Zeigarnik_Effect" data-for="core/background-knowledge/law/ux/[cognitiveBias]Zeigarnik_Effect">[cognitiveBias]Zeigarnik_Effect</a></li></li><li><li><a href="../../../../core/background-knowledge/law/ux/[gestalt]Law_of_Common_Region" data-for="core/background-knowledge/law/ux/[gestalt]Law_of_Common_Region">[gestalt]Law_of_Common_Region</a></li></li><li><li><a href="../../../../core/background-knowledge/law/ux/[gestalt]Law_of_Prägnanz" data-for="core/background-knowledge/law/ux/[gestalt]Law_of_Prägnanz">[gestalt]Law_of_Prägnanz</a></li></li><li><li><a href="../../../../core/background-knowledge/law/ux/[gestalt]Law_of_Proximity" data-for="core/background-knowledge/law/ux/[gestalt]Law_of_Proximity">[gestalt]Law_of_Proximity</a></li></li><li><li><a href="../../../../core/background-knowledge/law/ux/[gestalt]Law_of_Similarity" data-for="core/background-knowledge/law/ux/[gestalt]Law_of_Similarity">[gestalt]Law_of_Similarity</a></li></li><li><li><a href="../../../../core/background-knowledge/law/ux/[gestalt]Law_of_Uniform_Connectedness" data-for="core/background-knowledge/law/ux/[gestalt]Law_of_Uniform_Connectedness">[gestalt]Law_of_Uniform_Connectedness</a></li></li><li><li><a href="../../../../core/background-knowledge/law/ux/[heuristic]Aesthetic-Usability_Effect" data-for="core/background-knowledge/law/ux/[heuristic]Aesthetic-Usability_Effect">[heuristic]Aesthetic-Usability_Effect</a></li></li><li><li><a href="../../../../core/background-knowledge/law/ux/[heuristic]Fitts’s_Law" data-for="core/background-knowledge/law/ux/[heuristic]Fitts’s_Law">[heuristic]Fitts’s_Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/ux/[heuristic]Goal-Gradient_Effect" data-for="core/background-knowledge/law/ux/[heuristic]Goal-Gradient_Effect">[heuristic]Goal-Gradient_Effect</a></li></li><li><li><a href="../../../../core/background-knowledge/law/ux/[heuristic]Hick’s_Law" data-for="core/background-knowledge/law/ux/[heuristic]Hick’s_Law">[heuristic]Hick’s_Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/ux/[heuristic]Jakob’s_Law" data-for="core/background-knowledge/law/ux/[heuristic]Jakob’s_Law">[heuristic]Jakob’s_Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/ux/[heuristic]Miller’s_Law" data-for="core/background-knowledge/law/ux/[heuristic]Miller’s_Law">[heuristic]Miller’s_Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/ux/[heuristic]Parkinson’s_Law" data-for="core/background-knowledge/law/ux/[heuristic]Parkinson’s_Law">[heuristic]Parkinson’s_Law</a></li></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/paradigm"><button class="folder-button"><p class="folder-title">paradigm</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/paradigm"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/paradigm/FP"><button class="folder-button"><p class="folder-title">FP</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/paradigm/FP"><li><li><a href="../../../../core/background-knowledge/paradigm/FP/ApendixA_Essential_Functions_Support" data-for="core/background-knowledge/paradigm/FP/ApendixA_Essential_Functions_Support">ApendixA_Essential_Functions_Support</a></li></li><li><li><a href="../../../../core/background-knowledge/paradigm/FP/ApendixB_Algebraic_Structures_Support" data-for="core/background-knowledge/paradigm/FP/ApendixB_Algebraic_Structures_Support">ApendixB_Algebraic_Structures_Support</a></li></li><li><li><a href="../../../../core/background-knowledge/paradigm/FP/ApendixC_Pointfree_Utilities" data-for="core/background-knowledge/paradigm/FP/ApendixC_Pointfree_Utilities">ApendixC_Pointfree_Utilities</a></li></li><li><li><a href="../../../../core/background-knowledge/paradigm/FP/CH_01_What_Ever_Are_We_Doing" data-for="core/background-knowledge/paradigm/FP/CH_01_What_Ever_Are_We_Doing">CH_01_What_Ever_Are_We_Doing</a></li></li><li><li><a href="../../../../core/background-knowledge/paradigm/FP/CH_02_First_Class_Functions" data-for="core/background-knowledge/paradigm/FP/CH_02_First_Class_Functions">CH_02_First_Class_Functions</a></li></li><li><li><a href="../../../../core/background-knowledge/paradigm/FP/CH_03_Pure_Happiness_with_Pure_Functions" data-for="core/background-knowledge/paradigm/FP/CH_03_Pure_Happiness_with_Pure_Functions">CH_03_Pure_Happiness_with_Pure_Functions</a></li></li><li><li><a href="../../../../core/background-knowledge/paradigm/FP/CH_04_Currying" data-for="core/background-knowledge/paradigm/FP/CH_04_Currying">CH_04_Currying</a></li></li><li><li><a href="../../../../core/background-knowledge/paradigm/FP/CH_05_Coding_by_Composing" data-for="core/background-knowledge/paradigm/FP/CH_05_Coding_by_Composing">CH_05_Coding_by_Composing</a></li></li><li><li><a href="../../../../core/background-knowledge/paradigm/FP/CH_06_Example_Application" data-for="core/background-knowledge/paradigm/FP/CH_06_Example_Application">CH_06_Example_Application</a></li></li><li><li><a href="../../../../core/background-knowledge/paradigm/FP/CH_07_Hindley-Milner_and_Me" data-for="core/background-knowledge/paradigm/FP/CH_07_Hindley-Milner_and_Me">CH_07_Hindley-Milner_and_Me</a></li></li><li><li><a href="../../../../core/background-knowledge/paradigm/FP/CH_08_Tupperware" data-for="core/background-knowledge/paradigm/FP/CH_08_Tupperware">CH_08_Tupperware</a></li></li><li><li><a href="../../../../core/background-knowledge/paradigm/FP/CH_09_Monadic_Onions" data-for="core/background-knowledge/paradigm/FP/CH_09_Monadic_Onions">CH_09_Monadic_Onions</a></li></li><li><li><a href="../../../../core/background-knowledge/paradigm/FP/CH_10_Applicative_Functors" data-for="core/background-knowledge/paradigm/FP/CH_10_Applicative_Functors">CH_10_Applicative_Functors</a></li></li><li><li><a href="../../../../core/background-knowledge/paradigm/FP/CH_11_Transform_Again,_Naturally" data-for="core/background-knowledge/paradigm/FP/CH_11_Transform_Again,_Naturally">CH_11_Transform_Again,_Naturally</a></li></li><li><li><a href="../../../../core/background-knowledge/paradigm/FP/CH_12_Traversing_the_Stone" data-for="core/background-knowledge/paradigm/FP/CH_12_Traversing_the_Stone">CH_12_Traversing_the_Stone</a></li></li><li><li><a href="../../../../core/background-knowledge/paradigm/FP/CH_13_Monoids_bring_it_all_together" data-for="core/background-knowledge/paradigm/FP/CH_13_Monoids_bring_it_all_together">CH_13_Monoids_bring_it_all_together</a></li></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/principle"><button class="folder-button"><p class="folder-title">principle</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/principle"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/principle/computing"><button class="folder-button"><p class="folder-title">computing</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/principle/computing"><li><li><a href="../../../../core/background-knowledge/principle/computing/The-Fallacies-of-Distributed-Computing" data-for="core/background-knowledge/principle/computing/The-Fallacies-of-Distributed-Computing">The-Fallacies-of-Distributed-Computing</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/computing/The-Spotify-Model" data-for="core/background-knowledge/principle/computing/The-Spotify-Model">The-Spotify-Model</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/computing/The-Unix-Philosophy" data-for="core/background-knowledge/principle/computing/The-Unix-Philosophy">The-Unix-Philosophy</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/principle/dev"><button class="folder-button"><p class="folder-title">dev</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/principle/dev"><li><li><a href="../../../../core/background-knowledge/principle/dev/Premature-Optimization-Effect" data-for="core/background-knowledge/principle/dev/Premature-Optimization-Effect">Premature-Optimization-Effect</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/dev/SOLID" data-for="core/background-knowledge/principle/dev/SOLID">SOLID</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/dev/The-Dependency-Inversion-Principle" data-for="core/background-knowledge/principle/dev/The-Dependency-Inversion-Principle">The-Dependency-Inversion-Principle</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/dev/The-DRY-Principle" data-for="core/background-knowledge/principle/dev/The-DRY-Principle">The-DRY-Principle</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/dev/The-Interface-Segregation-Principle" data-for="core/background-knowledge/principle/dev/The-Interface-Segregation-Principle">The-Interface-Segregation-Principle</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/dev/The-KISS-principle" data-for="core/background-knowledge/principle/dev/The-KISS-principle">The-KISS-principle</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/dev/The-Liskov-Substitution-Principle" data-for="core/background-knowledge/principle/dev/The-Liskov-Substitution-Principle">The-Liskov-Substitution-Principle</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/dev/The-OpenClosed-Principle" data-for="core/background-knowledge/principle/dev/The-OpenClosed-Principle">The-OpenClosed-Principle</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/dev/The-Robustness-Principle-Postels-Law" data-for="core/background-knowledge/principle/dev/The-Robustness-Principle-Postels-Law">The-Robustness-Principle-Postels-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/dev/The-Single-Responsibility-Principle" data-for="core/background-knowledge/principle/dev/The-Single-Responsibility-Principle">The-Single-Responsibility-Principle</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/dev/YAGNI" data-for="core/background-knowledge/principle/dev/YAGNI">YAGNI</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/principle/management"><button class="folder-button"><p class="folder-title">management</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/principle/management"><li><li><a href="../../../../core/background-knowledge/principle/management/Occams-Razor" data-for="core/background-knowledge/principle/management/Occams-Razor">Occams-Razor</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/management/The-Dilbert-Principle" data-for="core/background-knowledge/principle/management/The-Dilbert-Principle">The-Dilbert-Principle</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/management/The-Pareto-Principle-The-8020-Rule" data-for="core/background-knowledge/principle/management/The-Pareto-Principle-The-8020-Rule">The-Pareto-Principle-The-8020-Rule</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/management/The-Peter-Principle" data-for="core/background-knowledge/principle/management/The-Peter-Principle">The-Peter-Principle</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/principle/ux"><button class="folder-button"><p class="folder-title">ux</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/principle/ux"><li><li><a href="../../../../core/background-knowledge/principle/ux/Doherty_Threshold" data-for="core/background-knowledge/principle/ux/Doherty_Threshold">Doherty_Threshold</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/ux/Occam’s_Razor" data-for="core/background-knowledge/principle/ux/Occam’s_Razor">Occam’s_Razor</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/ux/Pareto_Principle" data-for="core/background-knowledge/principle/ux/Pareto_Principle">Pareto_Principle</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/ux/Postel’s_Law" data-for="core/background-knowledge/principle/ux/Postel’s_Law">Postel’s_Law</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/ux/Tesler’s_Law" data-for="core/background-knowledge/principle/ux/Tesler’s_Law">Tesler’s_Law</a></li></li></ul></div></div></li></ul></div></div></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower"><button class="folder-button"><p class="folder-title">flower</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring"><button class="folder-button"><p class="folder-title">refactoring</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/smells"><button class="folder-button"><p class="folder-title">smells</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/smells"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/smells/bloaters"><button class="folder-button"><p class="folder-title">bloaters</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/smells/bloaters"><li><li><a href="../../../../flower/refactoring/smells/bloaters/data-clumps" data-for="flower/refactoring/smells/bloaters/data-clumps">Data Clumps</a></li></li><li><li><a href="../../../../flower/refactoring/smells/bloaters/large-class" data-for="flower/refactoring/smells/bloaters/large-class">Large Class</a></li></li><li><li><a href="../../../../flower/refactoring/smells/bloaters/long-method" data-for="flower/refactoring/smells/bloaters/long-method">Long Method</a></li></li><li><li><a href="../../../../flower/refactoring/smells/bloaters/long-parameter-list" data-for="flower/refactoring/smells/bloaters/long-parameter-list">Long Parameter List</a></li></li><li><li><a href="../../../../flower/refactoring/smells/bloaters/primitive-obsession" data-for="flower/refactoring/smells/bloaters/primitive-obsession">Primitive Obsession</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/smells/change-preventers"><button class="folder-button"><p class="folder-title">change-preventers</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/smells/change-preventers"><li><li><a href="../../../../flower/refactoring/smells/change-preventers/divergent-change" data-for="flower/refactoring/smells/change-preventers/divergent-change">Divergent Change</a></li></li><li><li><a href="../../../../flower/refactoring/smells/change-preventers/parallel-inheritance-hierarchies" data-for="flower/refactoring/smells/change-preventers/parallel-inheritance-hierarchies">Parallel Inheritance Hierarchies</a></li></li><li><li><a href="../../../../flower/refactoring/smells/change-preventers/shotgun-surgery" data-for="flower/refactoring/smells/change-preventers/shotgun-surgery">Shotgun Surgery</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/smells/couplers"><button class="folder-button"><p class="folder-title">couplers</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/smells/couplers"><li><li><a href="../../../../flower/refactoring/smells/couplers/feature-envy" data-for="flower/refactoring/smells/couplers/feature-envy">Feature Envy</a></li></li><li><li><a href="../../../../flower/refactoring/smells/couplers/inappropriate-intimacy" data-for="flower/refactoring/smells/couplers/inappropriate-intimacy">Inappropriate Intimacy</a></li></li><li><li><a href="../../../../flower/refactoring/smells/couplers/message-chains" data-for="flower/refactoring/smells/couplers/message-chains">Message Chains</a></li></li><li><li><a href="../../../../flower/refactoring/smells/couplers/middle-man" data-for="flower/refactoring/smells/couplers/middle-man">Middle Man</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/smells/dispensables"><button class="folder-button"><p class="folder-title">dispensables</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/smells/dispensables"><li><li><a href="../../../../flower/refactoring/smells/dispensables/comments" data-for="flower/refactoring/smells/dispensables/comments">Comments</a></li></li><li><li><a href="../../../../flower/refactoring/smells/dispensables/data-class" data-for="flower/refactoring/smells/dispensables/data-class">Data Class</a></li></li><li><li><a href="../../../../flower/refactoring/smells/dispensables/dead-code" data-for="flower/refactoring/smells/dispensables/dead-code">Dead Code</a></li></li><li><li><a href="../../../../flower/refactoring/smells/dispensables/duplicate-code" data-for="flower/refactoring/smells/dispensables/duplicate-code">Duplicate Code</a></li></li><li><li><a href="../../../../flower/refactoring/smells/dispensables/lazy-class" data-for="flower/refactoring/smells/dispensables/lazy-class">Lazy Class</a></li></li><li><li><a href="../../../../flower/refactoring/smells/dispensables/speculative-generality" data-for="flower/refactoring/smells/dispensables/speculative-generality">Speculative Generality</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/smells/oo-abusers"><button class="folder-button"><p class="folder-title">oo-abusers</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/smells/oo-abusers"><li><li><a href="../../../../flower/refactoring/smells/oo-abusers/alternative-classes-with-different-interfaces" data-for="flower/refactoring/smells/oo-abusers/alternative-classes-with-different-interfaces">Alternative Classes with Different Interfaces</a></li></li><li><li><a href="../../../../flower/refactoring/smells/oo-abusers/refused-bequest" data-for="flower/refactoring/smells/oo-abusers/refused-bequest">Refused Bequest</a></li></li><li><li><a href="../../../../flower/refactoring/smells/oo-abusers/switch-statements" data-for="flower/refactoring/smells/oo-abusers/switch-statements">Switch Statements</a></li></li><li><li><a href="../../../../flower/refactoring/smells/oo-abusers/temporary-field" data-for="flower/refactoring/smells/oo-abusers/temporary-field">Temporary Field</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/smells/other"><button class="folder-button"><p class="folder-title">other</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/smells/other"><li><li><a href="../../../../flower/refactoring/smells/other/incomplete-library-class" data-for="flower/refactoring/smells/other/incomplete-library-class">Incomplete Library Class</a></li></li></ul></div></div></li><li><li><a href="../../../../flower/refactoring/smells/bloaters" data-for="flower/refactoring/smells/bloaters">Bloaters</a></li></li><li><li><a href="../../../../flower/refactoring/smells/change-preventers" data-for="flower/refactoring/smells/change-preventers">Change Preventers</a></li></li><li><li><a href="../../../../flower/refactoring/smells/couplers" data-for="flower/refactoring/smells/couplers">Couplers</a></li></li><li><li><a href="../../../../flower/refactoring/smells/dispensables" data-for="flower/refactoring/smells/dispensables">Dispensables</a></li></li><li><li><a href="../../../../flower/refactoring/smells/oo-abusers" data-for="flower/refactoring/smells/oo-abusers">Object-Orientation Abusers</a></li></li><li><li><a href="../../../../flower/refactoring/smells/other" data-for="flower/refactoring/smells/other">Other Smells</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/techniques"><button class="folder-button"><p class="folder-title">techniques</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/techniques"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/techniques/composing-methods"><button class="folder-button"><p class="folder-title">composing-methods</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/techniques/composing-methods"><li><li><a href="../../../../flower/refactoring/techniques/composing-methods/extract-method" data-for="flower/refactoring/techniques/composing-methods/extract-method">Extract Method</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/composing-methods/extract-variable" data-for="flower/refactoring/techniques/composing-methods/extract-variable">Extract Variable</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/composing-methods/inline-method" data-for="flower/refactoring/techniques/composing-methods/inline-method">Inline Method</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/composing-methods/inline-temp" data-for="flower/refactoring/techniques/composing-methods/inline-temp">Inline Temp</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/composing-methods/remove-assignments-to-parameters" data-for="flower/refactoring/techniques/composing-methods/remove-assignments-to-parameters">Remove Assignments to Parameters</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/composing-methods/replace-method-with-method-object" data-for="flower/refactoring/techniques/composing-methods/replace-method-with-method-object">Replace Method with Method Object</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/composing-methods/replace-temp-with-query" data-for="flower/refactoring/techniques/composing-methods/replace-temp-with-query">Replace Temp with Query</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/composing-methods/split-temporary-variable" data-for="flower/refactoring/techniques/composing-methods/split-temporary-variable">Split Temporary Variable</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/composing-methods/substitute-algorithm" data-for="flower/refactoring/techniques/composing-methods/substitute-algorithm">Substitute Algorithm</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/techniques/dealing-with-generalization"><button class="folder-button"><p class="folder-title">dealing-with-generalization</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/techniques/dealing-with-generalization"><li><li><a href="../../../../flower/refactoring/techniques/dealing-with-generalization/collapse-hierarchy" data-for="flower/refactoring/techniques/dealing-with-generalization/collapse-hierarchy">Collapse Hierarchy</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/dealing-with-generalization/extract-interface" data-for="flower/refactoring/techniques/dealing-with-generalization/extract-interface">Extract Interface</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/dealing-with-generalization/extract-subclass" data-for="flower/refactoring/techniques/dealing-with-generalization/extract-subclass">Extract Subclass</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/dealing-with-generalization/extract-superclass" data-for="flower/refactoring/techniques/dealing-with-generalization/extract-superclass">Extract Superclass</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/dealing-with-generalization/form-template-method" data-for="flower/refactoring/techniques/dealing-with-generalization/form-template-method">Form Template Method</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/dealing-with-generalization/pull-up-constructor-body" data-for="flower/refactoring/techniques/dealing-with-generalization/pull-up-constructor-body">Pull Up Constructor Body</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/dealing-with-generalization/pull-up-field" data-for="flower/refactoring/techniques/dealing-with-generalization/pull-up-field">Pull Up Field</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/dealing-with-generalization/pull-up-method" data-for="flower/refactoring/techniques/dealing-with-generalization/pull-up-method">Pull Up Method</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/dealing-with-generalization/push-down-field" data-for="flower/refactoring/techniques/dealing-with-generalization/push-down-field">Push Down Field</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/dealing-with-generalization/push-down-method" data-for="flower/refactoring/techniques/dealing-with-generalization/push-down-method">Push Down Method</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/dealing-with-generalization/replace-delegation-with-inheritance" data-for="flower/refactoring/techniques/dealing-with-generalization/replace-delegation-with-inheritance">Replace Delegation with Inheritance</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/dealing-with-generalization/replace-inheritance-with-delegation" data-for="flower/refactoring/techniques/dealing-with-generalization/replace-inheritance-with-delegation">Replace Inheritance with Delegation</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/techniques/moving-features-between-objects"><button class="folder-button"><p class="folder-title">moving-features-between-objects</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/techniques/moving-features-between-objects"><li><li><a href="../../../../flower/refactoring/techniques/moving-features-between-objects/extract-class" data-for="flower/refactoring/techniques/moving-features-between-objects/extract-class">Extract Class</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/moving-features-between-objects/hide-delegate" data-for="flower/refactoring/techniques/moving-features-between-objects/hide-delegate">Hide Delegate</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/moving-features-between-objects/inline-class" data-for="flower/refactoring/techniques/moving-features-between-objects/inline-class">Inline Class</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/moving-features-between-objects/introduce-foreign-method" data-for="flower/refactoring/techniques/moving-features-between-objects/introduce-foreign-method">Introduce Foreign Method</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/moving-features-between-objects/introduce-local-extension" data-for="flower/refactoring/techniques/moving-features-between-objects/introduce-local-extension">Introduce Local Extension</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/moving-features-between-objects/move-field" data-for="flower/refactoring/techniques/moving-features-between-objects/move-field">Move Field</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/moving-features-between-objects/move-method" data-for="flower/refactoring/techniques/moving-features-between-objects/move-method">Move Method</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/moving-features-between-objects/remove-middle-man" data-for="flower/refactoring/techniques/moving-features-between-objects/remove-middle-man">Remove Middle Man</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/techniques/organizing-data"><button class="folder-button"><p class="folder-title">organizing-data</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/techniques/organizing-data"><li><li><a href="../../../../flower/refactoring/techniques/organizing-data/change-bidirectional-association-to-unidirectional" data-for="flower/refactoring/techniques/organizing-data/change-bidirectional-association-to-unidirectional">Change Bidirectional Association to Unidirectional</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/organizing-data/change-reference-to-value" data-for="flower/refactoring/techniques/organizing-data/change-reference-to-value">Change Reference to Value</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/organizing-data/change-unidirectional-association-to-bidirectional" data-for="flower/refactoring/techniques/organizing-data/change-unidirectional-association-to-bidirectional">Change Unidirectional Association to Bidirectional</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/organizing-data/change-value-to-reference" data-for="flower/refactoring/techniques/organizing-data/change-value-to-reference">Change Value to Reference</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/organizing-data/duplicate-observed-data" data-for="flower/refactoring/techniques/organizing-data/duplicate-observed-data">Duplicate Observed Data</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/organizing-data/encapsulate-collection" data-for="flower/refactoring/techniques/organizing-data/encapsulate-collection">Encapsulate Collection</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/organizing-data/encapsulate-field" data-for="flower/refactoring/techniques/organizing-data/encapsulate-field">Encapsulate Field</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/organizing-data/replace-array-with-object" data-for="flower/refactoring/techniques/organizing-data/replace-array-with-object">Replace Array with Object</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/organizing-data/replace-data-value-with-object" data-for="flower/refactoring/techniques/organizing-data/replace-data-value-with-object">Replace Data Value with Object</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/organizing-data/replace-magic-number-with-symbolic-constant" data-for="flower/refactoring/techniques/organizing-data/replace-magic-number-with-symbolic-constant">Replace Magic Number with Symbolic Constant</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/organizing-data/replace-subclass-with-fields" data-for="flower/refactoring/techniques/organizing-data/replace-subclass-with-fields">Replace Subclass with Fields</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/organizing-data/replace-type-code-with-class" data-for="flower/refactoring/techniques/organizing-data/replace-type-code-with-class">Replace Type Code with Class</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/organizing-data/replace-type-code-with-state-strategy" data-for="flower/refactoring/techniques/organizing-data/replace-type-code-with-state-strategy">Replace Type Code with State/Strategy</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/organizing-data/replace-type-code-with-subclasses" data-for="flower/refactoring/techniques/organizing-data/replace-type-code-with-subclasses">Replace Type Code with Subclasses</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/organizing-data/self-encapsulate-field" data-for="flower/refactoring/techniques/organizing-data/self-encapsulate-field">Self Encapsulate Field</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/techniques/simplifying-conditional-expressions"><button class="folder-button"><p class="folder-title">simplifying-conditional-expressions</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/techniques/simplifying-conditional-expressions"><li><li><a href="../../../../flower/refactoring/techniques/simplifying-conditional-expressions/consolidate-conditional-expression" data-for="flower/refactoring/techniques/simplifying-conditional-expressions/consolidate-conditional-expression">Consolidate Conditional Expression</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-conditional-expressions/consolidate-duplicate-conditional-fragments" data-for="flower/refactoring/techniques/simplifying-conditional-expressions/consolidate-duplicate-conditional-fragments">Consolidate Duplicate Conditional Fragments</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-conditional-expressions/decompose-conditional" data-for="flower/refactoring/techniques/simplifying-conditional-expressions/decompose-conditional">Decompose Conditional</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-conditional-expressions/introduce-assertion" data-for="flower/refactoring/techniques/simplifying-conditional-expressions/introduce-assertion">Introduce Assertion</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-conditional-expressions/introduce-null-object" data-for="flower/refactoring/techniques/simplifying-conditional-expressions/introduce-null-object">Introduce Null Object</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-conditional-expressions/remove-control-flag" data-for="flower/refactoring/techniques/simplifying-conditional-expressions/remove-control-flag">Remove Control Flag</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-conditional-expressions/replace-conditional-with-polymorphism" data-for="flower/refactoring/techniques/simplifying-conditional-expressions/replace-conditional-with-polymorphism">Replace Conditional with Polymorphism</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-conditional-expressions/replace-nested-conditional-with-guard-clauses" data-for="flower/refactoring/techniques/simplifying-conditional-expressions/replace-nested-conditional-with-guard-clauses">Replace Nested Conditional with Guard Clauses</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/techniques/simplifying-method-calls"><button class="folder-button"><p class="folder-title">simplifying-method-calls</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/techniques/simplifying-method-calls"><li><li><a href="../../../../flower/refactoring/techniques/simplifying-method-calls/add-parameter" data-for="flower/refactoring/techniques/simplifying-method-calls/add-parameter">Add Parameter</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-method-calls/hide-method" data-for="flower/refactoring/techniques/simplifying-method-calls/hide-method">Hide Method</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-method-calls/introduce-parameter-object" data-for="flower/refactoring/techniques/simplifying-method-calls/introduce-parameter-object">Introduce Parameter Object</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-method-calls/parameterize-method" data-for="flower/refactoring/techniques/simplifying-method-calls/parameterize-method">Parameterize Method</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-method-calls/preserve-whole-object" data-for="flower/refactoring/techniques/simplifying-method-calls/preserve-whole-object">Preserve Whole Object</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-method-calls/remove-parameter" data-for="flower/refactoring/techniques/simplifying-method-calls/remove-parameter">Remove Parameter</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-method-calls/remove-setting-method" data-for="flower/refactoring/techniques/simplifying-method-calls/remove-setting-method">Remove Setting Method</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-method-calls/rename-method" data-for="flower/refactoring/techniques/simplifying-method-calls/rename-method">Rename Method</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-method-calls/replace-constructor-with-factory-method" data-for="flower/refactoring/techniques/simplifying-method-calls/replace-constructor-with-factory-method">Replace Constructor with Factory Method</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-method-calls/replace-error-code-with-exception" data-for="flower/refactoring/techniques/simplifying-method-calls/replace-error-code-with-exception">Replace Error Code with Exception</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-method-calls/replace-exception-with-test" data-for="flower/refactoring/techniques/simplifying-method-calls/replace-exception-with-test">Replace Exception with Test</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-method-calls/replace-parameter-with-explicit-methods" data-for="flower/refactoring/techniques/simplifying-method-calls/replace-parameter-with-explicit-methods">Replace Parameter with Explicit Methods</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-method-calls/replace-parameter-with-method-call" data-for="flower/refactoring/techniques/simplifying-method-calls/replace-parameter-with-method-call">Replace Parameter with Method Call</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-method-calls/separate-query-from-modifier" data-for="flower/refactoring/techniques/simplifying-method-calls/separate-query-from-modifier">Separate Query from Modifier</a></li></li></ul></div></div></li><li><li><a href="../../../../flower/refactoring/techniques/composing-methods" data-for="flower/refactoring/techniques/composing-methods">Composing Methods</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/dealing-with-generalization" data-for="flower/refactoring/techniques/dealing-with-generalization">Dealing with Generalization</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/moving-features-between-objects" data-for="flower/refactoring/techniques/moving-features-between-objects">Moving Features between Objects</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/organizing-data" data-for="flower/refactoring/techniques/organizing-data">Organizing Data</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-conditional-expressions" data-for="flower/refactoring/techniques/simplifying-conditional-expressions">Simplifying Conditional Expressions</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-method-calls" data-for="flower/refactoring/techniques/simplifying-method-calls">Simplifying Method Calls</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/what-is-refactoring"><button class="folder-button"><p class="folder-title">what-is-refactoring</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/what-is-refactoring"><li><li><a href="../../../../flower/refactoring/what-is-refactoring/Clean-code" data-for="flower/refactoring/what-is-refactoring/Clean-code">Clean code</a></li></li><li><li><a href="../../../../flower/refactoring/what-is-refactoring/how-to" data-for="flower/refactoring/what-is-refactoring/how-to">How to refactor</a></li></li><li><li><a href="../../../../flower/refactoring/what-is-refactoring/technical-debt" data-for="flower/refactoring/what-is-refactoring/technical-debt">Technical debt</a></li></li><li><li><a href="../../../../flower/refactoring/what-is-refactoring/when" data-for="flower/refactoring/what-is-refactoring/when">When to refactor</a></li></li></ul></div></div></li><li><li><a href="../../../../flower/refactoring/catalog" data-for="flower/refactoring/catalog">Catalog of Refactoring</a></li></li><li><li><a href="../../../../flower/refactoring/Cheat-Sheet" data-for="flower/refactoring/Cheat-Sheet">Cheat Sheet</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing"><button class="folder-button"><p class="folder-title">testing</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/automation"><button class="folder-button"><p class="folder-title">automation</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/automation"><li><li><a href="../../../../flower/testing/automation/Importance" data-for="flower/testing/automation/Importance">Importance</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/go"><button class="folder-button"><p class="folder-title">go</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/go"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/go/anti_patterns"><button class="folder-button"><p class="folder-title">anti_patterns</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/go/anti_patterns"><li><li><a href="../../../../flower/testing/go/anti_patterns/anti-patterns" data-for="flower/testing/go/anti_patterns/anti-patterns">anti-patterns</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/go/build_an_application"><button class="folder-button"><p class="folder-title">build_an_application</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/go/build_an_application"><li><li><a href="../../../../flower/testing/go/build_an_application/command-line" data-for="flower/testing/go/build_an_application/command-line">command-line</a></li></li><li><li><a href="../../../../flower/testing/go/build_an_application/http-server" data-for="flower/testing/go/build_an_application/http-server">http-server</a></li></li><li><li><a href="../../../../flower/testing/go/build_an_application/io" data-for="flower/testing/go/build_an_application/io">io</a></li></li><li><li><a href="../../../../flower/testing/go/build_an_application/json" data-for="flower/testing/go/build_an_application/json">json</a></li></li><li><li><a href="../../../../flower/testing/go/build_an_application/time" data-for="flower/testing/go/build_an_application/time">time</a></li></li><li><li><a href="../../../../flower/testing/go/build_an_application/websockets" data-for="flower/testing/go/build_an_application/websockets">websockets</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/go/fundamentals"><button class="folder-button"><p class="folder-title">fundamentals</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/go/fundamentals"><li><li><a href="../../../../flower/testing/go/fundamentals/arrays-and-slices" data-for="flower/testing/go/fundamentals/arrays-and-slices">arrays-and-slices</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/concurrency" data-for="flower/testing/go/fundamentals/concurrency">concurrency</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/context" data-for="flower/testing/go/fundamentals/context">context</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/dependency-injection" data-for="flower/testing/go/fundamentals/dependency-injection">dependency-injection</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/generics" data-for="flower/testing/go/fundamentals/generics">generics</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/hello-world" data-for="flower/testing/go/fundamentals/hello-world">hello-world</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/install-go" data-for="flower/testing/go/fundamentals/install-go">install-go</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/integers" data-for="flower/testing/go/fundamentals/integers">integers</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/iteration" data-for="flower/testing/go/fundamentals/iteration">iteration</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/maps" data-for="flower/testing/go/fundamentals/maps">maps</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/math" data-for="flower/testing/go/fundamentals/math">math</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/mocking" data-for="flower/testing/go/fundamentals/mocking">mocking</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/pointers-and-errors" data-for="flower/testing/go/fundamentals/pointers-and-errors">pointers-and-errors</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/reading-files" data-for="flower/testing/go/fundamentals/reading-files">reading-files</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/reflection" data-for="flower/testing/go/fundamentals/reflection">reflection</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/revisiting-arrays-and-slices-with-generics" data-for="flower/testing/go/fundamentals/revisiting-arrays-and-slices-with-generics">revisiting-arrays-and-slices-with-generics</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/roman-numerals" data-for="flower/testing/go/fundamentals/roman-numerals">roman-numerals</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/select" data-for="flower/testing/go/fundamentals/select">select</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/structs-methods-and-interfaces" data-for="flower/testing/go/fundamentals/structs-methods-and-interfaces">structs-methods-and-interfaces</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/sync" data-for="flower/testing/go/fundamentals/sync">sync</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/template" data-for="flower/testing/go/fundamentals/template">template</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/go/testing_fundamentals"><button class="folder-button"><p class="folder-title">testing_fundamentals</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/go/testing_fundamentals"><li><li><a href="../../../../flower/testing/go/testing_fundamentals/intro-to-acceptance-tests" data-for="flower/testing/go/testing_fundamentals/intro-to-acceptance-tests">intro-to-acceptance-tests</a></li></li><li><li><a href="../../../../flower/testing/go/testing_fundamentals/scaling-acceptance-tests" data-for="flower/testing/go/testing_fundamentals/scaling-acceptance-tests">scaling-acceptance-tests</a></li></li><li><li><a href="../../../../flower/testing/go/testing_fundamentals/working-without-mocks" data-for="flower/testing/go/testing_fundamentals/working-without-mocks">working-without-mocks</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/go/tips"><button class="folder-button"><p class="folder-title">tips</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/go/tips"><li><li><a href="../../../../flower/testing/go/tips/context-aware-reader" data-for="flower/testing/go/tips/context-aware-reader">context-aware-reader</a></li></li><li><li><a href="../../../../flower/testing/go/tips/error-types" data-for="flower/testing/go/tips/error-types">error-types</a></li></li><li><li><a href="../../../../flower/testing/go/tips/http-handlers-revisited" data-for="flower/testing/go/tips/http-handlers-revisited">http-handlers-revisited</a></li></li><li><li><a href="../../../../flower/testing/go/tips/os-exec" data-for="flower/testing/go/tips/os-exec">os-exec</a></li></li><li><li><a href="../../../../flower/testing/go/tips/why-unit-test" data-for="flower/testing/go/tips/why-unit-test">why-unit-test</a></li></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/javascript"><button class="folder-button"><p class="folder-title">javascript</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/javascript"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/javascript/0 The Golden Rule"><button class="folder-button"><p class="folder-title">0 The Golden Rule</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/javascript/0 The Golden Rule"><li><li><a href="../../../../flower/testing/javascript/0-The-Golden-Rule/0-Design-for-lean-testing" data-for="flower/testing/javascript/0-The-Golden-Rule/0-Design-for-lean-testing">0 Design for lean testing</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/javascript/1 The Test Anatomy"><button class="folder-button"><p class="folder-title">1 The Test Anatomy</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/javascript/1 The Test Anatomy"><li><li><a href="../../../../flower/testing/javascript/1-The-Test-Anatomy/1-1-Include-3-parts-in-each-test-name" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-1-Include-3-parts-in-each-test-name">1-1 Include 3 parts in each test name</a></li></li><li><li><a href="../../../../flower/testing/javascript/1-The-Test-Anatomy/1-2-Structure-tests-by-the-AAA-pattern" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-2-Structure-tests-by-the-AAA-pattern">1-2 Structure tests by the AAA pattern</a></li></li><li><li><a href="../../../../flower/testing/javascript/1-The-Test-Anatomy/1-3-Describe-expectations-in-a-product-language-use-BDD-style-assertions" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-3-Describe-expectations-in-a-product-language-use-BDD-style-assertions">1-3 Describe expectations in a product language use BDD-style assertions</a></li></li><li><li><a href="../../../../flower/testing/javascript/1-The-Test-Anatomy/1-4-Stick-to-black-box-testing-Test-only-public-methods" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-4-Stick-to-black-box-testing-Test-only-public-methods">1-4 Stick to black-box testing Test only public methods</a></li></li><li><li><a href="../../../../flower/testing/javascript/1-The-Test-Anatomy/1-5-Choose-the-right-test-doubles-Avoid-mocks-in-favor-of-stubs-and-spies" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-5-Choose-the-right-test-doubles-Avoid-mocks-in-favor-of-stubs-and-spies">1-5 Choose the right test doubles Avoid mocks in favor of stubs and spies</a></li></li><li><li><a href="../../../../flower/testing/javascript/1-The-Test-Anatomy/1-6-Dont-foo-use-realistic-input-data" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-6-Dont-foo-use-realistic-input-data">1-6 Dont foo use realistic input data</a></li></li><li><li><a href="../../../../flower/testing/javascript/1-The-Test-Anatomy/1-7-Test-many-input-combinations-using-Property-based-testing" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-7-Test-many-input-combinations-using-Property-based-testing">1-7 Test many input combinations using Property-based testing</a></li></li><li><li><a href="../../../../flower/testing/javascript/1-The-Test-Anatomy/1-8-If-needed-use-only-short--inline-snapshots" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-8-If-needed-use-only-short--inline-snapshots">1-8 If needed use only short  inline snapshots</a></li></li><li><li><a href="../../../../flower/testing/javascript/1-The-Test-Anatomy/1-9-Copy-code-but-only-whats-neccessary" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-9-Copy-code-but-only-whats-neccessary">1-9 Copy code but only whats neccessary</a></li></li><li><li><a href="../../../../flower/testing/javascript/1-The-Test-Anatomy/1-10-Dont-catch-errors-expect-them" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-10-Dont-catch-errors-expect-them">1-10 Dont catch errors expect them</a></li></li><li><li><a href="../../../../flower/testing/javascript/1-The-Test-Anatomy/1-11-Tag-your-tests" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-11-Tag-your-tests">1-11 Tag your tests</a></li></li><li><li><a href="../../../../flower/testing/javascript/1-The-Test-Anatomy/1-12-Categorize-tests-under-at-least-2-levels" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-12-Categorize-tests-under-at-least-2-levels">1-12 Categorize tests under at least 2 levels</a></li></li><li><li><a href="../../../../flower/testing/javascript/1-The-Test-Anatomy/1-13-Other-generic-good-testing-hygiene" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-13-Other-generic-good-testing-hygiene">1-13 Other generic good testing hygiene</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/javascript/2 Backend"><button class="folder-button"><p class="folder-title">2 Backend</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/javascript/2 Backend"><li><li><a href="../../../../flower/testing/javascript/2-Backend/2-1-Enrich-your-testing-portfolio-Look-beyond-unit-tests-and-the-pyramid" data-for="flower/testing/javascript/2-Backend/2-1-Enrich-your-testing-portfolio-Look-beyond-unit-tests-and-the-pyramid">2-1 Enrich your testing portfolio Look beyond unit tests and the pyramid</a></li></li><li><li><a href="../../../../flower/testing/javascript/2-Backend/2-2-Component-testing-might-be-your-best-affair" data-for="flower/testing/javascript/2-Backend/2-2-Component-testing-might-be-your-best-affair">2-2 Component testing might be your best affair</a></li></li><li><li><a href="../../../../flower/testing/javascript/2-Backend/2-3-Ensure-new-releases-dont-break-the-API-using-contract-tests" data-for="flower/testing/javascript/2-Backend/2-3-Ensure-new-releases-dont-break-the-API-using-contract-tests">2-3 Ensure new releases dont break the API using contract tests</a></li></li><li><li><a href="../../../../flower/testing/javascript/2-Backend/2-4-Test-your-middlewares-in-isolation" data-for="flower/testing/javascript/2-Backend/2-4-Test-your-middlewares-in-isolation">2-4 Test your middlewares in isolation</a></li></li><li><li><a href="../../../../flower/testing/javascript/2-Backend/2-5-Measure-and-refactor-using-static-analysis-tools" data-for="flower/testing/javascript/2-Backend/2-5-Measure-and-refactor-using-static-analysis-tools">2-5 Measure and refactor using static analysis tools</a></li></li><li><li><a href="../../../../flower/testing/javascript/2-Backend/2-6-Check-your-readiness-for-Node-related-chaos" data-for="flower/testing/javascript/2-Backend/2-6-Check-your-readiness-for-Node-related-chaos">2-6 Check your readiness for Node-related chaos</a></li></li><li><li><a href="../../../../flower/testing/javascript/2-Backend/2-7-Avoid-global-test-fixtures-and-seeds-add-data-per-test" data-for="flower/testing/javascript/2-Backend/2-7-Avoid-global-test-fixtures-and-seeds-add-data-per-test">2-7 Avoid global test fixtures and seeds add data per-test</a></li></li><li><li><a href="../../../../flower/testing/javascript/2-Backend/2-8-Choose-a-clear-data-clean-up-strategy-After-all-recommended-or-after-each" data-for="flower/testing/javascript/2-Backend/2-8-Choose-a-clear-data-clean-up-strategy-After-all-recommended-or-after-each">2-8 Choose a clear data clean-up strategy After-all recommended or after-each</a></li></li><li><li><a href="../../../../flower/testing/javascript/2-Backend/2-9-Isolate-the-component-from-the-world-using-HTTP-interceptor" data-for="flower/testing/javascript/2-Backend/2-9-Isolate-the-component-from-the-world-using-HTTP-interceptor">2-9 Isolate the component from the world using HTTP interceptor</a></li></li><li><li><a href="../../../../flower/testing/javascript/2-Backend/2-10-Test-the-response-schema-mostly-when-there-are-auto-generated-fields" data-for="flower/testing/javascript/2-Backend/2-10-Test-the-response-schema-mostly-when-there-are-auto-generated-fields">2-10 Test the response schema mostly when there are auto-generated fields</a></li></li><li><li><a href="../../../../flower/testing/javascript/2-Backend/2-11-Check-integrations-corner-cases-and-chaos" data-for="flower/testing/javascript/2-Backend/2-11-Check-integrations-corner-cases-and-chaos">2-11 Check integrations corner cases and chaos</a></li></li><li><li><a href="../../../../flower/testing/javascript/2-Backend/2-12-Test-the-five-potential-outcomes" data-for="flower/testing/javascript/2-Backend/2-12-Test-the-five-potential-outcomes">2-12 Test the five potential outcomes</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/javascript/3 Frontend"><button class="folder-button"><p class="folder-title">3 Frontend</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/javascript/3 Frontend"><li><li><a href="../../../../flower/testing/javascript/3-Frontend/3-1-Separate-UI-from-functionality" data-for="flower/testing/javascript/3-Frontend/3-1-Separate-UI-from-functionality">3-1 Separate UI from functionality</a></li></li><li><li><a href="../../../../flower/testing/javascript/3-Frontend/3-2-Query-HTML-elements-based-on-attributes-that-are-unlikely-to-change" data-for="flower/testing/javascript/3-Frontend/3-2-Query-HTML-elements-based-on-attributes-that-are-unlikely-to-change">3-2 Query HTML elements based on attributes that are unlikely to change</a></li></li><li><li><a href="../../../../flower/testing/javascript/3-Frontend/3-3-Whenever-possible-test-with-a-realistic-and-fully-rendered-component" data-for="flower/testing/javascript/3-Frontend/3-3-Whenever-possible-test-with-a-realistic-and-fully-rendered-component">3-3 Whenever possible test with a realistic and fully rendered component</a></li></li><li><li><a href="../../../../flower/testing/javascript/3-Frontend/3-4-Dont-sleep-use-frameworks-built-in-support-for-async-events.-Also-try-to-speed-things-up" data-for="flower/testing/javascript/3-Frontend/3-4-Dont-sleep-use-frameworks-built-in-support-for-async-events.-Also-try-to-speed-things-up">3-4 Dont sleep use frameworks built-in support for async events. Also try to speed things up</a></li></li><li><li><a href="../../../../flower/testing/javascript/3-Frontend/3-5-Watch-how-the-content-is-served-over-the-network" data-for="flower/testing/javascript/3-Frontend/3-5-Watch-how-the-content-is-served-over-the-network">3-5 Watch how the content is served over the network</a></li></li><li><li><a href="../../../../flower/testing/javascript/3-Frontend/3-6-Stub-flaky-and-slow-resources-like-backend-APIs" data-for="flower/testing/javascript/3-Frontend/3-6-Stub-flaky-and-slow-resources-like-backend-APIs">3-6 Stub flaky and slow resources like backend APIs</a></li></li><li><li><a href="../../../../flower/testing/javascript/3-Frontend/3-7-Have-very-few-end-to-end-tests-that-spans-the-whole-system" data-for="flower/testing/javascript/3-Frontend/3-7-Have-very-few-end-to-end-tests-that-spans-the-whole-system">3-7 Have very few end-to-end tests that spans the whole system</a></li></li><li><li><a href="../../../../flower/testing/javascript/3-Frontend/3-8-Speed-up-E2E-tests-by-reusing-login-credentials" data-for="flower/testing/javascript/3-Frontend/3-8-Speed-up-E2E-tests-by-reusing-login-credentials">3-8 Speed-up E2E tests by reusing login credentials</a></li></li><li><li><a href="../../../../flower/testing/javascript/3-Frontend/3-9-Have-one-E2E-smoke-test-that-just-travels-across-the-site-map" data-for="flower/testing/javascript/3-Frontend/3-9-Have-one-E2E-smoke-test-that-just-travels-across-the-site-map">3-9 Have one E2E smoke test that just travels across the site map</a></li></li><li><li><a href="../../../../flower/testing/javascript/3-Frontend/3-10-Expose-the-tests-as-a-live-collaborative-document" data-for="flower/testing/javascript/3-Frontend/3-10-Expose-the-tests-as-a-live-collaborative-document">3-10 Expose the tests as a live collaborative document</a></li></li><li><li><a href="../../../../flower/testing/javascript/3-Frontend/3-11-Detect-visual-issues-with-automated-tools" data-for="flower/testing/javascript/3-Frontend/3-11-Detect-visual-issues-with-automated-tools">3-11 Detect visual issues with automated tools</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/javascript/4 Measuring Tests Effectiveness"><button class="folder-button"><p class="folder-title">4 Measuring Tests Effectiveness</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/javascript/4 Measuring Tests Effectiveness"><li><li><a href="../../../../flower/testing/javascript/4-Measuring-Tests-Effectiveness/4-1-Get-enough-coverage-for-being-confident-80-seems-to-be-the-lucky-number" data-for="flower/testing/javascript/4-Measuring-Tests-Effectiveness/4-1-Get-enough-coverage-for-being-confident-80-seems-to-be-the-lucky-number">4-1 Get enough coverage for being confident 80 seems to be the lucky number</a></li></li><li><li><a href="../../../../flower/testing/javascript/4-Measuring-Tests-Effectiveness/4-2-Inspect-coverage-reports-to-detect-untested-areas-and-other-oddities" data-for="flower/testing/javascript/4-Measuring-Tests-Effectiveness/4-2-Inspect-coverage-reports-to-detect-untested-areas-and-other-oddities">4-2 Inspect coverage reports to detect untested areas and other oddities</a></li></li><li><li><a href="../../../../flower/testing/javascript/4-Measuring-Tests-Effectiveness/4-3-Measure-logical-coverage-using-mutation-testing" data-for="flower/testing/javascript/4-Measuring-Tests-Effectiveness/4-3-Measure-logical-coverage-using-mutation-testing">4-3 Measure logical coverage using mutation testing</a></li></li><li><li><a href="../../../../flower/testing/javascript/4-Measuring-Tests-Effectiveness/4-4-Preventing-test-code-issues-with-Test-linters" data-for="flower/testing/javascript/4-Measuring-Tests-Effectiveness/4-4-Preventing-test-code-issues-with-Test-linters">4-4 Preventing test code issues with Test linters</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/javascript/5 Continuous Integration"><button class="folder-button"><p class="folder-title">5 Continuous Integration</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/javascript/5 Continuous Integration"><li><li><a href="../../../../flower/testing/javascript/5-Continuous-Integration/5-1-Enrich-your-linters-and-abort-builds-that-have-linting-issues" data-for="flower/testing/javascript/5-Continuous-Integration/5-1-Enrich-your-linters-and-abort-builds-that-have-linting-issues">5-1 Enrich your linters and abort builds that have linting issues</a></li></li><li><li><a href="../../../../flower/testing/javascript/5-Continuous-Integration/5-2-Shorten-the-feedback-loop-with-local-developer-CI" data-for="flower/testing/javascript/5-Continuous-Integration/5-2-Shorten-the-feedback-loop-with-local-developer-CI">5-2 Shorten the feedback loop with local developer-CI</a></li></li><li><li><a href="../../../../flower/testing/javascript/5-Continuous-Integration/5-3-Perform-e2e-testing-over-a-true-production-mirror" data-for="flower/testing/javascript/5-Continuous-Integration/5-3-Perform-e2e-testing-over-a-true-production-mirror">5-3 Perform e2e testing over a true production-mirror</a></li></li><li><li><a href="../../../../flower/testing/javascript/5-Continuous-Integration/5-4-Parallelize-test-execution" data-for="flower/testing/javascript/5-Continuous-Integration/5-4-Parallelize-test-execution">5-4 Parallelize test execution</a></li></li><li><li><a href="../../../../flower/testing/javascript/5-Continuous-Integration/5-5-Stay-away-from-legal-issues-using-license-and-plagiarism-check" data-for="flower/testing/javascript/5-Continuous-Integration/5-5-Stay-away-from-legal-issues-using-license-and-plagiarism-check">5-5 Stay away from legal issues using license and plagiarism check</a></li></li><li><li><a href="../../../../flower/testing/javascript/5-Continuous-Integration/5-6-Constantly-inspect-for-vulnerable-dependencies" data-for="flower/testing/javascript/5-Continuous-Integration/5-6-Constantly-inspect-for-vulnerable-dependencies">5-6 Constantly inspect for vulnerable dependencies</a></li></li><li><li><a href="../../../../flower/testing/javascript/5-Continuous-Integration/5-7-Automate-dependency-updates" data-for="flower/testing/javascript/5-Continuous-Integration/5-7-Automate-dependency-updates">5-7 Automate dependency updates</a></li></li><li><li><a href="../../../../flower/testing/javascript/5-Continuous-Integration/5-8-Other-non-Node-related-CI-tips" data-for="flower/testing/javascript/5-Continuous-Integration/5-8-Other-non-Node-related-CI-tips">5-8 Other non-Node related CI tips</a></li></li><li><li><a href="../../../../flower/testing/javascript/5-Continuous-Integration/5-9-Build-matrix-Run-the-same-CI-steps-using-multiple-Node-versions" data-for="flower/testing/javascript/5-Continuous-Integration/5-9-Build-matrix-Run-the-same-CI-steps-using-multiple-Node-versions">5-9 Build matrix Run the same CI steps using multiple Node versions</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/javascript/assets"><button class="folder-button"><p class="folder-title">assets</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/javascript/assets"><li><li><a href="../../../../flower/testing/javascript/assets/readme" data-for="flower/testing/javascript/assets/readme">readme</a></li></li></ul></div></div></li></ul></div></div></li></ul></div></div></li><li><li><a href="../../../../flower/Table-of-contents" data-for="flower/Table-of-contents">Table of contents</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit"><button class="folder-button"><p class="folder-title">fruit</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding"><button class="folder-button"><p class="folder-title">Coding</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns"><button class="folder-button"><p class="folder-title">Patterns</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/Design Patterns"><button class="folder-button"><p class="folder-title">Design Patterns</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/Design Patterns"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/Design Patterns/catalog"><button class="folder-button"><p class="folder-title">catalog</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/Design Patterns/catalog"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/Design Patterns/catalog/behavioral"><button class="folder-button"><p class="folder-title">behavioral</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/Design Patterns/catalog/behavioral"><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/chain-of-responsibility" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/chain-of-responsibility">chain-of-responsibility</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/command" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/command">command</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/iterator" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/iterator">iterator</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/mediator" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/mediator">mediator</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/memento" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/memento">memento</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/observer" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/observer">observer</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/state" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/state">state</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/strategy" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/strategy">strategy</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/template-method" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/template-method">template-method</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/visitor" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/visitor">visitor</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/Design Patterns/catalog/creational"><button class="folder-button"><p class="folder-title">creational</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/Design Patterns/catalog/creational"><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/creational/abstract-factory" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/creational/abstract-factory">abstract-factory</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/creational/builder" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/creational/builder">builder</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/creational/factory-method" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/creational/factory-method">factory-method</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/creational/prototype" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/creational/prototype">prototype</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/creational/singleton" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/creational/singleton">singleton</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/Design Patterns/catalog/structural"><button class="folder-button"><p class="folder-title">structural</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/Design Patterns/catalog/structural"><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/structural/adapter" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/structural/adapter">adapter</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/structural/bridge" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/structural/bridge">bridge</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/structural/composite" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/structural/composite">composite</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/structural/decorator" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/structural/decorator">decorator</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/structural/facade" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/structural/facade">facade</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/structural/flyweight" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/structural/flyweight">flyweight</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/structural/proxy" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/structural/proxy">proxy</a></li></li></ul></div></div></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral-patterns" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral-patterns">behavioral-patterns</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/catalog" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/catalog">catalog</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/creational-patterns" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/creational-patterns">creational-patterns</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/structural-patterns" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/structural-patterns">structural-patterns</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/Design Patterns/intro"><button class="folder-button"><p class="folder-title">intro</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/Design Patterns/intro"><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/intro/classification" data-for="fruit/Coding/Patterns/Design-Patterns/intro/classification">classification</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/intro/criticism" data-for="fruit/Coding/Patterns/Design-Patterns/intro/criticism">criticism</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/intro/history" data-for="fruit/Coding/Patterns/Design-Patterns/intro/history">history</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/intro/what-is-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/intro/what-is-pattern">what-is-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/intro/why-learn-patterns" data-for="fruit/Coding/Patterns/Design-Patterns/intro/why-learn-patterns">why-learn-patterns</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/Design Patterns/react"><button class="folder-button"><p class="folder-title">react</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/Design Patterns/react"><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/react/compound-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/react/compound-pattern">compound-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/react/hoc-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/react/hoc-pattern">hoc-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/react/hooks-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/react/hooks-pattern">hooks-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/react/presentational-container-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/react/presentational-container-pattern">presentational-container-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/react/render-props-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/react/render-props-pattern">render-props-pattern</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/Design Patterns/vanilla"><button class="folder-button"><p class="folder-title">vanilla</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/Design Patterns/vanilla"><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/command-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/command-pattern">command-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/factory-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/factory-pattern">factory-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/flyweight-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/flyweight-pattern">flyweight-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/mediator-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/mediator-pattern">mediator-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/mixin-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/mixin-pattern">mixin-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/module-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/module-pattern">module-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/observer-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/observer-pattern">observer-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/prototype-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/prototype-pattern">prototype-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/provider-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/provider-pattern">provider-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/proxy-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/proxy-pattern">proxy-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/singleton-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/singleton-pattern">singleton-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/static-import" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/static-import">static-import</a></li></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/rendering"><button class="folder-button"><p class="folder-title">rendering</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/rendering"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/rendering/react"><button class="folder-button"><p class="folder-title">react</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/rendering/react"><li><li><a href="../../../../fruit/Coding/Patterns/rendering/react/client-side-rendering" data-for="fruit/Coding/Patterns/rendering/react/client-side-rendering">client-side-rendering</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/rendering/react/incremental-static-rendering" data-for="fruit/Coding/Patterns/rendering/react/incremental-static-rendering">incremental-static-rendering</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/rendering/react/progressive-hydration" data-for="fruit/Coding/Patterns/rendering/react/progressive-hydration">progressive-hydration</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/rendering/react/react-selective-hydration" data-for="fruit/Coding/Patterns/rendering/react/react-selective-hydration">react-selective-hydration</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/rendering/react/react-server-components" data-for="fruit/Coding/Patterns/rendering/react/react-server-components">react-server-components</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/rendering/react/server-side-rendering" data-for="fruit/Coding/Patterns/rendering/react/server-side-rendering">server-side-rendering</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/rendering/react/static-rendering" data-for="fruit/Coding/Patterns/rendering/react/static-rendering">static-rendering</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/rendering/react/streaming-ssr" data-for="fruit/Coding/Patterns/rendering/react/streaming-ssr">streaming-ssr</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/rendering/vanilla"><button class="folder-button"><p class="folder-title">vanilla</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/rendering/vanilla"><li><li><a href="../../../../fruit/Coding/Patterns/rendering/vanilla/islands-architecture" data-for="fruit/Coding/Patterns/rendering/vanilla/islands-architecture">islands-architecture</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/rendering/vanilla/rendering-patterns" data-for="fruit/Coding/Patterns/rendering/vanilla/rendering-patterns">rendering-patterns</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/rendering/vanilla/view-transitions" data-for="fruit/Coding/Patterns/rendering/vanilla/view-transitions">view-transitions</a></li></li></ul></div></div></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing"><button class="folder-button"><p class="folder-title">Testing</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/go"><button class="folder-button"><p class="folder-title">go</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/go"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/go/anti_patterns"><button class="folder-button"><p class="folder-title">anti_patterns</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/go/anti_patterns"><li><li><a href="../../../../fruit/Coding/Testing/go/anti_patterns/anti-patterns" data-for="fruit/Coding/Testing/go/anti_patterns/anti-patterns">anti-patterns</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/go/build_an_application"><button class="folder-button"><p class="folder-title">build_an_application</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/go/build_an_application"><li><li><a href="../../../../fruit/Coding/Testing/go/build_an_application/command-line" data-for="fruit/Coding/Testing/go/build_an_application/command-line">command-line</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/build_an_application/http-server" data-for="fruit/Coding/Testing/go/build_an_application/http-server">http-server</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/build_an_application/io" data-for="fruit/Coding/Testing/go/build_an_application/io">io</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/build_an_application/json" data-for="fruit/Coding/Testing/go/build_an_application/json">json</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/build_an_application/time" data-for="fruit/Coding/Testing/go/build_an_application/time">time</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/build_an_application/websockets" data-for="fruit/Coding/Testing/go/build_an_application/websockets">websockets</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/go/fundamentals"><button class="folder-button"><p class="folder-title">fundamentals</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/go/fundamentals"><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/arrays-and-slices" data-for="fruit/Coding/Testing/go/fundamentals/arrays-and-slices">arrays-and-slices</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/concurrency" data-for="fruit/Coding/Testing/go/fundamentals/concurrency">concurrency</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/context" data-for="fruit/Coding/Testing/go/fundamentals/context">context</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/dependency-injection" data-for="fruit/Coding/Testing/go/fundamentals/dependency-injection">dependency-injection</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/generics" data-for="fruit/Coding/Testing/go/fundamentals/generics">generics</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/hello-world" data-for="fruit/Coding/Testing/go/fundamentals/hello-world">hello-world</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/install-go" data-for="fruit/Coding/Testing/go/fundamentals/install-go">install-go</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/integers" data-for="fruit/Coding/Testing/go/fundamentals/integers">integers</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/iteration" data-for="fruit/Coding/Testing/go/fundamentals/iteration">iteration</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/maps" data-for="fruit/Coding/Testing/go/fundamentals/maps">maps</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/math" data-for="fruit/Coding/Testing/go/fundamentals/math">math</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/mocking" data-for="fruit/Coding/Testing/go/fundamentals/mocking">mocking</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/pointers-and-errors" data-for="fruit/Coding/Testing/go/fundamentals/pointers-and-errors">pointers-and-errors</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/reading-files" data-for="fruit/Coding/Testing/go/fundamentals/reading-files">reading-files</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/reflection" data-for="fruit/Coding/Testing/go/fundamentals/reflection">reflection</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/revisiting-arrays-and-slices-with-generics" data-for="fruit/Coding/Testing/go/fundamentals/revisiting-arrays-and-slices-with-generics">revisiting-arrays-and-slices-with-generics</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/roman-numerals" data-for="fruit/Coding/Testing/go/fundamentals/roman-numerals">roman-numerals</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/select" data-for="fruit/Coding/Testing/go/fundamentals/select">select</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/structs-methods-and-interfaces" data-for="fruit/Coding/Testing/go/fundamentals/structs-methods-and-interfaces">structs-methods-and-interfaces</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/sync" data-for="fruit/Coding/Testing/go/fundamentals/sync">sync</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/template" data-for="fruit/Coding/Testing/go/fundamentals/template">template</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/go/testing_fundamentals"><button class="folder-button"><p class="folder-title">testing_fundamentals</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/go/testing_fundamentals"><li><li><a href="../../../../fruit/Coding/Testing/go/testing_fundamentals/intro-to-acceptance-tests" data-for="fruit/Coding/Testing/go/testing_fundamentals/intro-to-acceptance-tests">intro-to-acceptance-tests</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/testing_fundamentals/scaling-acceptance-tests" data-for="fruit/Coding/Testing/go/testing_fundamentals/scaling-acceptance-tests">scaling-acceptance-tests</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/testing_fundamentals/working-without-mocks" data-for="fruit/Coding/Testing/go/testing_fundamentals/working-without-mocks">working-without-mocks</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/go/tips"><button class="folder-button"><p class="folder-title">tips</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/go/tips"><li><li><a href="../../../../fruit/Coding/Testing/go/tips/context-aware-reader" data-for="fruit/Coding/Testing/go/tips/context-aware-reader">context-aware-reader</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/tips/error-types" data-for="fruit/Coding/Testing/go/tips/error-types">error-types</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/tips/http-handlers-revisited" data-for="fruit/Coding/Testing/go/tips/http-handlers-revisited">http-handlers-revisited</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/tips/os-exec" data-for="fruit/Coding/Testing/go/tips/os-exec">os-exec</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/tips/why-unit-test" data-for="fruit/Coding/Testing/go/tips/why-unit-test">why-unit-test</a></li></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/javascript"><button class="folder-button"><p class="folder-title">javascript</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/javascript"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/javascript/0 The Golden Rule"><button class="folder-button"><p class="folder-title">0 The Golden Rule</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/javascript/0 The Golden Rule"><li><li><a href="../../../../fruit/Coding/Testing/javascript/0-The-Golden-Rule/0-Design-for-lean-testing" data-for="fruit/Coding/Testing/javascript/0-The-Golden-Rule/0-Design-for-lean-testing">0 Design for lean testing</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/javascript/1 The Test Anatomy"><button class="folder-button"><p class="folder-title">1 The Test Anatomy</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/javascript/1 The Test Anatomy"><li><li><a href="../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-1-Include-3-parts-in-each-test-name" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-1-Include-3-parts-in-each-test-name">1-1 Include 3 parts in each test name</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-2-Structure-tests-by-the-AAA-pattern" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-2-Structure-tests-by-the-AAA-pattern">1-2 Structure tests by the AAA pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-3-Describe-expectations-in-a-product-language-use-BDD-style-assertions" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-3-Describe-expectations-in-a-product-language-use-BDD-style-assertions">1-3 Describe expectations in a product language use BDD-style assertions</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-4-Stick-to-black-box-testing-Test-only-public-methods" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-4-Stick-to-black-box-testing-Test-only-public-methods">1-4 Stick to black-box testing Test only public methods</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-5-Choose-the-right-test-doubles-Avoid-mocks-in-favor-of-stubs-and-spies" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-5-Choose-the-right-test-doubles-Avoid-mocks-in-favor-of-stubs-and-spies">1-5 Choose the right test doubles Avoid mocks in favor of stubs and spies</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-6-Dont-foo-use-realistic-input-data" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-6-Dont-foo-use-realistic-input-data">1-6 Dont foo use realistic input data</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-7-Test-many-input-combinations-using-Property-based-testing" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-7-Test-many-input-combinations-using-Property-based-testing">1-7 Test many input combinations using Property-based testing</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-8-If-needed-use-only-short--inline-snapshots" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-8-If-needed-use-only-short--inline-snapshots">1-8 If needed use only short  inline snapshots</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-9-Copy-code-but-only-whats-neccessary" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-9-Copy-code-but-only-whats-neccessary">1-9 Copy code but only whats neccessary</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-10-Dont-catch-errors-expect-them" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-10-Dont-catch-errors-expect-them">1-10 Dont catch errors expect them</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-11-Tag-your-tests" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-11-Tag-your-tests">1-11 Tag your tests</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-12-Categorize-tests-under-at-least-2-levels" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-12-Categorize-tests-under-at-least-2-levels">1-12 Categorize tests under at least 2 levels</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-13-Other-generic-good-testing-hygiene" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-13-Other-generic-good-testing-hygiene">1-13 Other generic good testing hygiene</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/javascript/2 Backend"><button class="folder-button"><p class="folder-title">2 Backend</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/javascript/2 Backend"><li><li><a href="../../../../fruit/Coding/Testing/javascript/2-Backend/2-1-Enrich-your-testing-portfolio-Look-beyond-unit-tests-and-the-pyramid" data-for="fruit/Coding/Testing/javascript/2-Backend/2-1-Enrich-your-testing-portfolio-Look-beyond-unit-tests-and-the-pyramid">2-1 Enrich your testing portfolio Look beyond unit tests and the pyramid</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/2-Backend/2-2-Component-testing-might-be-your-best-affair" data-for="fruit/Coding/Testing/javascript/2-Backend/2-2-Component-testing-might-be-your-best-affair">2-2 Component testing might be your best affair</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/2-Backend/2-3-Ensure-new-releases-dont-break-the-API-using-contract-tests" data-for="fruit/Coding/Testing/javascript/2-Backend/2-3-Ensure-new-releases-dont-break-the-API-using-contract-tests">2-3 Ensure new releases dont break the API using contract tests</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/2-Backend/2-4-Test-your-middlewares-in-isolation" data-for="fruit/Coding/Testing/javascript/2-Backend/2-4-Test-your-middlewares-in-isolation">2-4 Test your middlewares in isolation</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/2-Backend/2-5-Measure-and-refactor-using-static-analysis-tools" data-for="fruit/Coding/Testing/javascript/2-Backend/2-5-Measure-and-refactor-using-static-analysis-tools">2-5 Measure and refactor using static analysis tools</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/2-Backend/2-6-Check-your-readiness-for-Node-related-chaos" data-for="fruit/Coding/Testing/javascript/2-Backend/2-6-Check-your-readiness-for-Node-related-chaos">2-6 Check your readiness for Node-related chaos</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/2-Backend/2-7-Avoid-global-test-fixtures-and-seeds-add-data-per-test" data-for="fruit/Coding/Testing/javascript/2-Backend/2-7-Avoid-global-test-fixtures-and-seeds-add-data-per-test">2-7 Avoid global test fixtures and seeds add data per-test</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/2-Backend/2-8-Choose-a-clear-data-clean-up-strategy-After-all-recommended-or-after-each" data-for="fruit/Coding/Testing/javascript/2-Backend/2-8-Choose-a-clear-data-clean-up-strategy-After-all-recommended-or-after-each">2-8 Choose a clear data clean-up strategy After-all recommended or after-each</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/2-Backend/2-9-Isolate-the-component-from-the-world-using-HTTP-interceptor" data-for="fruit/Coding/Testing/javascript/2-Backend/2-9-Isolate-the-component-from-the-world-using-HTTP-interceptor">2-9 Isolate the component from the world using HTTP interceptor</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/2-Backend/2-10-Test-the-response-schema-mostly-when-there-are-auto-generated-fields" data-for="fruit/Coding/Testing/javascript/2-Backend/2-10-Test-the-response-schema-mostly-when-there-are-auto-generated-fields">2-10 Test the response schema mostly when there are auto-generated fields</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/2-Backend/2-11-Check-integrations-corner-cases-and-chaos" data-for="fruit/Coding/Testing/javascript/2-Backend/2-11-Check-integrations-corner-cases-and-chaos">2-11 Check integrations corner cases and chaos</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/2-Backend/2-12-Test-the-five-potential-outcomes" data-for="fruit/Coding/Testing/javascript/2-Backend/2-12-Test-the-five-potential-outcomes">2-12 Test the five potential outcomes</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/javascript/3 Frontend"><button class="folder-button"><p class="folder-title">3 Frontend</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/javascript/3 Frontend"><li><li><a href="../../../../fruit/Coding/Testing/javascript/3-Frontend/3-1-Separate-UI-from-functionality" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-1-Separate-UI-from-functionality">3-1 Separate UI from functionality</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/3-Frontend/3-2-Query-HTML-elements-based-on-attributes-that-are-unlikely-to-change" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-2-Query-HTML-elements-based-on-attributes-that-are-unlikely-to-change">3-2 Query HTML elements based on attributes that are unlikely to change</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/3-Frontend/3-3-Whenever-possible-test-with-a-realistic-and-fully-rendered-component" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-3-Whenever-possible-test-with-a-realistic-and-fully-rendered-component">3-3 Whenever possible test with a realistic and fully rendered component</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/3-Frontend/3-4-Dont-sleep-use-frameworks-built-in-support-for-async-events.-Also-try-to-speed-things-up" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-4-Dont-sleep-use-frameworks-built-in-support-for-async-events.-Also-try-to-speed-things-up">3-4 Dont sleep use frameworks built-in support for async events. Also try to speed things up</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/3-Frontend/3-5-Watch-how-the-content-is-served-over-the-network" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-5-Watch-how-the-content-is-served-over-the-network">3-5 Watch how the content is served over the network</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/3-Frontend/3-6-Stub-flaky-and-slow-resources-like-backend-APIs" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-6-Stub-flaky-and-slow-resources-like-backend-APIs">3-6 Stub flaky and slow resources like backend APIs</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/3-Frontend/3-7-Have-very-few-end-to-end-tests-that-spans-the-whole-system" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-7-Have-very-few-end-to-end-tests-that-spans-the-whole-system">3-7 Have very few end-to-end tests that spans the whole system</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/3-Frontend/3-8-Speed-up-E2E-tests-by-reusing-login-credentials" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-8-Speed-up-E2E-tests-by-reusing-login-credentials">3-8 Speed-up E2E tests by reusing login credentials</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/3-Frontend/3-9-Have-one-E2E-smoke-test-that-just-travels-across-the-site-map" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-9-Have-one-E2E-smoke-test-that-just-travels-across-the-site-map">3-9 Have one E2E smoke test that just travels across the site map</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/3-Frontend/3-10-Expose-the-tests-as-a-live-collaborative-document" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-10-Expose-the-tests-as-a-live-collaborative-document">3-10 Expose the tests as a live collaborative document</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/3-Frontend/3-11-Detect-visual-issues-with-automated-tools" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-11-Detect-visual-issues-with-automated-tools">3-11 Detect visual issues with automated tools</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/javascript/4 Measuring Tests Effectiveness"><button class="folder-button"><p class="folder-title">4 Measuring Tests Effectiveness</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/javascript/4 Measuring Tests Effectiveness"><li><li><a href="../../../../fruit/Coding/Testing/javascript/4-Measuring-Tests-Effectiveness/4-1-Get-enough-coverage-for-being-confident-80-seems-to-be-the-lucky-number" data-for="fruit/Coding/Testing/javascript/4-Measuring-Tests-Effectiveness/4-1-Get-enough-coverage-for-being-confident-80-seems-to-be-the-lucky-number">4-1 Get enough coverage for being confident 80 seems to be the lucky number</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/4-Measuring-Tests-Effectiveness/4-2-Inspect-coverage-reports-to-detect-untested-areas-and-other-oddities" data-for="fruit/Coding/Testing/javascript/4-Measuring-Tests-Effectiveness/4-2-Inspect-coverage-reports-to-detect-untested-areas-and-other-oddities">4-2 Inspect coverage reports to detect untested areas and other oddities</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/4-Measuring-Tests-Effectiveness/4-3-Measure-logical-coverage-using-mutation-testing" data-for="fruit/Coding/Testing/javascript/4-Measuring-Tests-Effectiveness/4-3-Measure-logical-coverage-using-mutation-testing">4-3 Measure logical coverage using mutation testing</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/4-Measuring-Tests-Effectiveness/4-4-Preventing-test-code-issues-with-Test-linters" data-for="fruit/Coding/Testing/javascript/4-Measuring-Tests-Effectiveness/4-4-Preventing-test-code-issues-with-Test-linters">4-4 Preventing test code issues with Test linters</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/javascript/5 Continuous Integration"><button class="folder-button"><p class="folder-title">5 Continuous Integration</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/javascript/5 Continuous Integration"><li><li><a href="../../../../fruit/Coding/Testing/javascript/5-Continuous-Integration/5-1-Enrich-your-linters-and-abort-builds-that-have-linting-issues" data-for="fruit/Coding/Testing/javascript/5-Continuous-Integration/5-1-Enrich-your-linters-and-abort-builds-that-have-linting-issues">5-1 Enrich your linters and abort builds that have linting issues</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/5-Continuous-Integration/5-2-Shorten-the-feedback-loop-with-local-developer-CI" data-for="fruit/Coding/Testing/javascript/5-Continuous-Integration/5-2-Shorten-the-feedback-loop-with-local-developer-CI">5-2 Shorten the feedback loop with local developer-CI</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/5-Continuous-Integration/5-3-Perform-e2e-testing-over-a-true-production-mirror" data-for="fruit/Coding/Testing/javascript/5-Continuous-Integration/5-3-Perform-e2e-testing-over-a-true-production-mirror">5-3 Perform e2e testing over a true production-mirror</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/5-Continuous-Integration/5-4-Parallelize-test-execution" data-for="fruit/Coding/Testing/javascript/5-Continuous-Integration/5-4-Parallelize-test-execution">5-4 Parallelize test execution</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/5-Continuous-Integration/5-5-Stay-away-from-legal-issues-using-license-and-plagiarism-check" data-for="fruit/Coding/Testing/javascript/5-Continuous-Integration/5-5-Stay-away-from-legal-issues-using-license-and-plagiarism-check">5-5 Stay away from legal issues using license and plagiarism check</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/5-Continuous-Integration/5-6-Constantly-inspect-for-vulnerable-dependencies" data-for="fruit/Coding/Testing/javascript/5-Continuous-Integration/5-6-Constantly-inspect-for-vulnerable-dependencies">5-6 Constantly inspect for vulnerable dependencies</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/5-Continuous-Integration/5-7-Automate-dependency-updates" data-for="fruit/Coding/Testing/javascript/5-Continuous-Integration/5-7-Automate-dependency-updates">5-7 Automate dependency updates</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/5-Continuous-Integration/5-8-Other-non-Node-related-CI-tips" data-for="fruit/Coding/Testing/javascript/5-Continuous-Integration/5-8-Other-non-Node-related-CI-tips">5-8 Other non-Node related CI tips</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/5-Continuous-Integration/5-9-Build-matrix-Run-the-same-CI-steps-using-multiple-Node-versions" data-for="fruit/Coding/Testing/javascript/5-Continuous-Integration/5-9-Build-matrix-Run-the-same-CI-steps-using-multiple-Node-versions">5-9 Build matrix Run the same CI steps using multiple Node versions</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/javascript/assets"><button class="folder-button"><p class="folder-title">assets</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/javascript/assets"><li><li><a href="../../../../fruit/Coding/Testing/javascript/assets/readme" data-for="fruit/Coding/Testing/javascript/assets/readme">readme</a></li></li></ul></div></div></li></ul></div></div></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming"><button class="folder-button"><p class="folder-title">Diagraming</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/bizSys"><button class="folder-button"><p class="folder-title">bizSys</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/bizSys"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/bizSys/externalView"><button class="folder-button"><p class="folder-title">externalView</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/bizSys/externalView"><li><li><a href="../../../../fruit/Diagraming/bizSys/externalView/constructing-sequence-diagrams" data-for="fruit/Diagraming/bizSys/externalView/constructing-sequence-diagrams">constructing-sequence-diagrams</a></li></li><li><li><a href="../../../../fruit/Diagraming/bizSys/externalView/high-level-sequence-diagrams" data-for="fruit/Diagraming/bizSys/externalView/high-level-sequence-diagrams">high-level-sequence-diagrams</a></li></li><li><li><a href="../../../../fruit/Diagraming/bizSys/externalView/sequence-diagrams" data-for="fruit/Diagraming/bizSys/externalView/sequence-diagrams">sequence-diagrams</a></li></li><li><li><a href="../../../../fruit/Diagraming/bizSys/externalView/sequence-diagrams-for-scenarios-of-business-use-cases" data-for="fruit/Diagraming/bizSys/externalView/sequence-diagrams-for-scenarios-of-business-use-cases">sequence-diagrams-for-scenarios-of-business-use-cases</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/bizSys/internalView"><button class="folder-button"><p class="folder-title">internalView</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/bizSys/internalView"><li><li><a href="../../../../fruit/Diagraming/bizSys/internalView/activity-diagram" data-for="fruit/Diagraming/bizSys/internalView/activity-diagram">activity-diagram</a></li></li><li><li><a href="../../../../fruit/Diagraming/bizSys/internalView/class-diagram" data-for="fruit/Diagraming/bizSys/internalView/class-diagram">class-diagram</a></li></li><li><li><a href="../../../../fruit/Diagraming/bizSys/internalView/constructing-class-diagrams" data-for="fruit/Diagraming/bizSys/internalView/constructing-class-diagrams">constructing-class-diagrams</a></li></li><li><li><a href="../../../../fruit/Diagraming/bizSys/internalView/constructing-package-diagrams" data-for="fruit/Diagraming/bizSys/internalView/constructing-package-diagrams">constructing-package-diagrams</a></li></li><li><li><a href="../../../../fruit/Diagraming/bizSys/internalView/package-diagram" data-for="fruit/Diagraming/bizSys/internalView/package-diagram">package-diagram</a></li></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/ITSys"><button class="folder-button"><p class="folder-title">ITSys</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/ITSys"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/ITSys/behavioralView"><button class="folder-button"><p class="folder-title">behavioralView</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/ITSys/behavioralView"><li><li><a href="../../../../fruit/Diagraming/ITSys/behavioralView/constructing-statechart-diagrams" data-for="fruit/Diagraming/ITSys/behavioralView/constructing-statechart-diagrams">constructing-statechart-diagrams</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/behavioralView/statechart-diagram" data-for="fruit/Diagraming/ITSys/behavioralView/statechart-diagram">statechart-diagram</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/behavioralView/the-elements-of-the-view" data-for="fruit/Diagraming/ITSys/behavioralView/the-elements-of-the-view">the-elements-of-the-view</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/behavioralView/the-life-of-an-object" data-for="fruit/Diagraming/ITSys/behavioralView/the-life-of-an-object">the-life-of-an-object</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/ITSys/externalView"><button class="folder-button"><p class="folder-title">externalView</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/ITSys/externalView"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/ITSys/externalView/the-elements-of-view"><button class="folder-button"><p class="folder-title">the-elements-of-view</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/ITSys/externalView/the-elements-of-view"><li><li><a href="../../../../fruit/Diagraming/ITSys/externalView/the-elements-of-view/use-case-diagram" data-for="fruit/Diagraming/ITSys/externalView/the-elements-of-view/use-case-diagram">use-case-diagram</a></li></li></ul></div></div></li><li><li><a href="../../../../fruit/Diagraming/ITSys/externalView/constructing-the-external-view" data-for="fruit/Diagraming/ITSys/externalView/constructing-the-external-view">constructing-the-external-view</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/externalView/query-events-and-mutation-events" data-for="fruit/Diagraming/ITSys/externalView/query-events-and-mutation-events">query-events-and-mutation-events</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/externalView/the-user-view-or-i-dont-care-how-it-works-as-long-as-it-works" data-for="fruit/Diagraming/ITSys/externalView/the-user-view-or-i-dont-care-how-it-works-as-long-as-it-works">the-user-view-or-i-dont-care-how-it-works-as-long-as-it-works</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/externalView/use-case-sequence-diagram" data-for="fruit/Diagraming/ITSys/externalView/use-case-sequence-diagram">use-case-sequence-diagram</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/ITSys/interactionView"><button class="folder-button"><p class="folder-title">interactionView</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/ITSys/interactionView"><li><li><a href="../../../../fruit/Diagraming/ITSys/interactionView/communication-diagram" data-for="fruit/Diagraming/ITSys/interactionView/communication-diagram">communication-diagram</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/interactionView/constructing-communication-diagrams" data-for="fruit/Diagraming/ITSys/interactionView/constructing-communication-diagrams">constructing-communication-diagrams</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/interactionView/constructing-sequence-diagrams" data-for="fruit/Diagraming/ITSys/interactionView/constructing-sequence-diagrams">constructing-sequence-diagrams</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/interactionView/elements-of-the-view" data-for="fruit/Diagraming/ITSys/interactionView/elements-of-the-view">elements-of-the-view</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/interactionView/seeing-what-happens-inside-the-it-system" data-for="fruit/Diagraming/ITSys/interactionView/seeing-what-happens-inside-the-it-system">seeing-what-happens-inside-the-it-system</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/interactionView/sequence-diagram" data-for="fruit/Diagraming/ITSys/interactionView/sequence-diagram">sequence-diagram</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/ITSys/structuralView"><button class="folder-button"><p class="folder-title">structuralView</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/ITSys/structuralView"><li><li><a href="../../../../fruit/Diagraming/ITSys/structuralView/class-diagram" data-for="fruit/Diagraming/ITSys/structuralView/class-diagram">class-diagram</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/structuralView/constructing-class-diagrams" data-for="fruit/Diagraming/ITSys/structuralView/constructing-class-diagrams">constructing-class-diagrams</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/structuralView/elements-of-the-view" data-for="fruit/Diagraming/ITSys/structuralView/elements-of-the-view">elements-of-the-view</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/structuralView/generalization-specialization-and-inheritance" data-for="fruit/Diagraming/ITSys/structuralView/generalization-specialization-and-inheritance">generalization-specialization-and-inheritance</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/structuralView/objects-and-classes" data-for="fruit/Diagraming/ITSys/structuralView/objects-and-classes">objects-and-classes</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/structuralView/static-and-dynamic-business-rules" data-for="fruit/Diagraming/ITSys/structuralView/static-and-dynamic-business-rules">static-and-dynamic-business-rules</a></li></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/prepIntegr"><button class="folder-button"><p class="folder-title">prepIntegr</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/prepIntegr"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/prepIntegr/processView"><button class="folder-button"><p class="folder-title">processView</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/prepIntegr/processView"><li><li><a href="../../../../fruit/Diagraming/prepIntegr/processView/activity-diagrams" data-for="fruit/Diagraming/prepIntegr/processView/activity-diagrams">activity-diagrams</a></li></li><li><li><a href="../../../../fruit/Diagraming/prepIntegr/processView/constructing-diagrams-in-the-process-view" data-for="fruit/Diagraming/prepIntegr/processView/constructing-diagrams-in-the-process-view">constructing-diagrams-in-the-process-view</a></li></li><li><li><a href="../../../../fruit/Diagraming/prepIntegr/processView/elements-of-the-view" data-for="fruit/Diagraming/prepIntegr/processView/elements-of-the-view">elements-of-the-view</a></li></li><li><li><a href="../../../../fruit/Diagraming/prepIntegr/processView/sequence-diagram" data-for="fruit/Diagraming/prepIntegr/processView/sequence-diagram">sequence-diagram</a></li></li><li><li><a href="../../../../fruit/Diagraming/prepIntegr/processView/the-business-system-model-as-foundation" data-for="fruit/Diagraming/prepIntegr/processView/the-business-system-model-as-foundation">the-business-system-model-as-foundation</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/prepIntegr/staticView"><button class="folder-button"><p class="folder-title">staticView</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/prepIntegr/staticView"><li><li><a href="../../../../fruit/Diagraming/prepIntegr/staticView/class-diagram" data-for="fruit/Diagraming/prepIntegr/staticView/class-diagram">class-diagram</a></li></li><li><li><a href="../../../../fruit/Diagraming/prepIntegr/staticView/constructing-class-diagrams" data-for="fruit/Diagraming/prepIntegr/staticView/constructing-class-diagrams">constructing-class-diagrams</a></li></li><li><li><a href="../../../../fruit/Diagraming/prepIntegr/staticView/elements-of-the-view" data-for="fruit/Diagraming/prepIntegr/staticView/elements-of-the-view">elements-of-the-view</a></li></li><li><li><a href="../../../../fruit/Diagraming/prepIntegr/staticView/transformation-of-uml-messages-into-various-stan" data-for="fruit/Diagraming/prepIntegr/staticView/transformation-of-uml-messages-into-various-stan">transformation-of-uml-messages-into-various-stan</a></li></li><li><li><a href="../../../../fruit/Diagraming/prepIntegr/staticView/transforming-data-from-the-it-system-to-the-mess" data-for="fruit/Diagraming/prepIntegr/staticView/transforming-data-from-the-it-system-to-the-mess">transforming-data-from-the-it-system-to-the-mess</a></li></li></ul></div></div></li></ul></div></div></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/seed"><button class="folder-button"><p class="folder-title">seed</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/seed"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/seed/computing"><button class="folder-button"><p class="folder-title">computing</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/seed/computing"><li><li><a href="../../../../seed/computing/ployglot-(computing)" data-for="seed/computing/ployglot-(computing)">ployglot (computing)</a></li></li><li><li><a href="../../../../seed/computing/Seeding-(computing)" data-for="seed/computing/Seeding-(computing)">Seeding (computing)</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/seed/software development"><button class="folder-button"><p class="folder-title">software development</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/seed/software development"><li><li><a href="../../../../seed/software-development/artifact-(software-development)" data-for="seed/software-development/artifact-(software-development)">artifact (software development)</a></li></li><li><li><a href="../../../../seed/software-development/Generic-function" data-for="seed/software-development/Generic-function">Generic function</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/seed/Unix"><button class="folder-button"><p class="folder-title">Unix</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/seed/Unix"><li><li><a href="../../../../seed/Unix/Shebang-(Unix)" data-for="seed/Unix/Shebang-(Unix)">Shebang (Unix)</a></li></li></ul></div></div></li><li><li><a href="../../../../seed/artifact" data-for="seed/artifact">artifact</a></li></li><li><li><a href="../../../../seed/polyglot" data-for="seed/polyglot">polyglot</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/tree"><button class="folder-button"><p class="folder-title">tree</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/tree"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/tree/Product Design"><button class="folder-button"><p class="folder-title">Product Design</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/tree/Product Design"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/tree/Product Design/Design"><button class="folder-button"><p class="folder-title">Design</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/tree/Product Design/Design"><li><li><a href="../../../../tree/Product-Design/Design/Business-Model-Canvas" data-for="tree/Product-Design/Design/Business-Model-Canvas">Business Model Canvas</a></li></li><li><li><a href="../../../../tree/Product-Design/Design/Call-to-Action" data-for="tree/Product-Design/Design/Call-to-Action">Call to Action</a></li></li><li><li><a href="../../../../tree/Product-Design/Design/Cheating" data-for="tree/Product-Design/Design/Cheating">Cheating</a></li></li><li><li><a href="../../../../tree/Product-Design/Design/Deploy-Social-Proof" data-for="tree/Product-Design/Design/Deploy-Social-Proof">Deploy Social Proof</a></li></li><li><li><a href="../../../../tree/Product-Design/Design/Incremental-A,-B-Testing" data-for="tree/Product-Design/Design/Incremental-A,-B-Testing">Incremental A, B Testing</a></li></li><li><li><a href="../../../../tree/Product-Design/Design/Lean-Canvas" data-for="tree/Product-Design/Design/Lean-Canvas">Lean Canvas</a></li></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/tree/Software Development"><button class="folder-button"><p class="folder-title">Software Development</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/tree/Software Development"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/tree/Software Development/Architecture"><button class="folder-button"><p class="folder-title">Architecture</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/tree/Software Development/Architecture"><li><li><a href="../../../../tree/Software-Development/Architecture/Untitled" data-for="tree/Software-Development/Architecture/Untitled">Untitled</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/tree/Software Development/Project Layout"><button class="folder-button"><p class="folder-title">Project Layout</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/tree/Software Development/Project Layout"><li><li><a href="../../../../tree/Software-Development/Project-Layout/Untitled" data-for="tree/Software-Development/Project-Layout/Untitled">Untitled</a></li></li></ul></div></div></li></ul></div></div></li></ul></div></div></li><li><li><a href="../../../../Applications" data-for="Applications">Applications</a></li></li><li><li><a href="../../../../Inbox" data-for="Inbox">Inbox</a></li></li></ul></div></div></li><li id="explorer-end"></li></ul></div></div></div><div class="center"><div class="page-header"><div class="popover-hint"><nav class="breadcrumb-container " aria-label="breadcrumbs"><div class="breadcrumb-element"><a href="../../../..">Home</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../../../flower/">flower</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../../../flower/testing/">testing</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../../../flower/testing/go/">go</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../../../flower/testing/go/build_an_application/">build_an_application</a><p> ❯ </p></div><div class="breadcrumb-element"><a href>io</a></div></nav><h1 class="article-title ">io</h1><p class="content-meta ">Dec 22, 2023, 27 min read</p></div></div><article class="popover-hint"><h1 id="io-and-sorting">IO and sorting<a aria-hidden="true" tabindex="-1" href="#io-and-sorting" class="internal alias"> §</a></h1>
<p><strong><a href="https://github.com/quii/learn-go-with-tests/tree/main/io" class="external alias">You can find all the code for this chapter here</a></strong></p>
<p><a href="../../../../flower/testing/go/build_an_application/json" class="internal alias" data-slug="flower/testing/go/build_an_application/json">In the previous chapter</a> we continued iterating on our application by adding a new endpoint <code>/league</code>. Along the way we learned about how to deal with JSON, embedding types and routing.</p>
<p>Our product owner is somewhat perturbed by the software losing the scores when the server was restarted. This is because our implementation of our store is in-memory. She is also not pleased that we didn’t interpret the <code>/league</code> endpoint should return the players ordered by the number of wins!</p>
<h2 id="the-code-so-far">The code so far<a aria-hidden="true" tabindex="-1" href="#the-code-so-far" class="internal alias"> §</a></h2>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">// server.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">package</span><span style="color:var(--shiki-color-text);"> main</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;encoding/json&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;fmt&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;net/http&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;strings&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-comment);">// PlayerStore stores score information about players</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">PlayerStore</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">interface</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">GetPlayerScore</span><span style="color:var(--shiki-color-text);">(name </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) </span><span style="color:var(--shiki-token-keyword);">int</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">RecordWin</span><span style="color:var(--shiki-color-text);">(name </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">GetLeague</span><span style="color:var(--shiki-color-text);">() []Player</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-comment);">// Player stores a name with a number of wins</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Player</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">struct</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	Name </span><span style="color:var(--shiki-token-keyword);">string</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	Wins </span><span style="color:var(--shiki-token-keyword);">int</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-comment);">// PlayerServer is a HTTP interface for player information</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">PlayerServer</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">struct</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	store PlayerStore</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	http.Handler</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> jsonContentType </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;application/json&quot;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-comment);">// NewPlayerServer creates a PlayerServer with routing configured</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NewPlayerServer</span><span style="color:var(--shiki-color-text);">(store PlayerStore) </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">PlayerServer {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	p </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">new</span><span style="color:var(--shiki-color-text);">(PlayerServer)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	p.store </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> store</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	router </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> http.</span><span style="color:var(--shiki-token-function);">NewServeMux</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	router.</span><span style="color:var(--shiki-token-function);">Handle</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;/league&quot;</span><span style="color:var(--shiki-color-text);">, http.</span><span style="color:var(--shiki-token-function);">HandlerFunc</span><span style="color:var(--shiki-color-text);">(p.leagueHandler))</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	router.</span><span style="color:var(--shiki-token-function);">Handle</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;/players/&quot;</span><span style="color:var(--shiki-color-text);">, http.</span><span style="color:var(--shiki-token-function);">HandlerFunc</span><span style="color:var(--shiki-color-text);">(p.playersHandler))</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	p.Handler </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> router</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> p</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (p </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">PlayerServer) </span><span style="color:var(--shiki-token-function);">leagueHandler</span><span style="color:var(--shiki-color-text);">(w http.ResponseWriter, r </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">http.Request) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	w.</span><span style="color:var(--shiki-token-function);">Header</span><span style="color:var(--shiki-color-text);">().</span><span style="color:var(--shiki-token-function);">Set</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;content-type&quot;</span><span style="color:var(--shiki-color-text);">, jsonContentType)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	json.</span><span style="color:var(--shiki-token-function);">NewEncoder</span><span style="color:var(--shiki-color-text);">(w).</span><span style="color:var(--shiki-token-function);">Encode</span><span style="color:var(--shiki-color-text);">(p.store.</span><span style="color:var(--shiki-token-function);">GetLeague</span><span style="color:var(--shiki-color-text);">())</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (p </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">PlayerServer) </span><span style="color:var(--shiki-token-function);">playersHandler</span><span style="color:var(--shiki-color-text);">(w http.ResponseWriter, r </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">http.Request) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	player </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> strings.</span><span style="color:var(--shiki-token-function);">TrimPrefix</span><span style="color:var(--shiki-color-text);">(r.URL.Path, </span><span style="color:var(--shiki-token-string-expression);">&quot;/players/&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">switch</span><span style="color:var(--shiki-color-text);"> r.Method {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">case</span><span style="color:var(--shiki-color-text);"> http.MethodPost:</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		p.</span><span style="color:var(--shiki-token-function);">processWin</span><span style="color:var(--shiki-color-text);">(w, player)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">case</span><span style="color:var(--shiki-color-text);"> http.MethodGet:</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		p.</span><span style="color:var(--shiki-token-function);">showScore</span><span style="color:var(--shiki-color-text);">(w, player)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (p </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">PlayerServer) </span><span style="color:var(--shiki-token-function);">showScore</span><span style="color:var(--shiki-color-text);">(w http.ResponseWriter, player </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	score </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> p.store.</span><span style="color:var(--shiki-token-function);">GetPlayerScore</span><span style="color:var(--shiki-color-text);">(player)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> score </span><span style="color:var(--shiki-token-keyword);">==</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		w.</span><span style="color:var(--shiki-token-function);">WriteHeader</span><span style="color:var(--shiki-color-text);">(http.StatusNotFound)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	fmt.</span><span style="color:var(--shiki-token-function);">Fprint</span><span style="color:var(--shiki-color-text);">(w, score)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (p </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">PlayerServer) </span><span style="color:var(--shiki-token-function);">processWin</span><span style="color:var(--shiki-color-text);">(w http.ResponseWriter, player </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	p.store.</span><span style="color:var(--shiki-token-function);">RecordWin</span><span style="color:var(--shiki-color-text);">(player)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	w.</span><span style="color:var(--shiki-token-function);">WriteHeader</span><span style="color:var(--shiki-color-text);">(http.StatusAccepted)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">// in_memory_player_store.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">package</span><span style="color:var(--shiki-color-text);"> main</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NewInMemoryPlayerStore</span><span style="color:var(--shiki-color-text);">() </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">InMemoryPlayerStore {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">InMemoryPlayerStore{</span><span style="color:var(--shiki-token-keyword);">map</span><span style="color:var(--shiki-color-text);">[</span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">]</span><span style="color:var(--shiki-token-keyword);">int</span><span style="color:var(--shiki-color-text);">{}}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">InMemoryPlayerStore</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">struct</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	store </span><span style="color:var(--shiki-token-keyword);">map</span><span style="color:var(--shiki-color-text);">[</span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">]</span><span style="color:var(--shiki-token-keyword);">int</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (i </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">InMemoryPlayerStore) </span><span style="color:var(--shiki-token-function);">GetLeague</span><span style="color:var(--shiki-color-text);">() []Player {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">var</span><span style="color:var(--shiki-color-text);"> league []Player</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">for</span><span style="color:var(--shiki-color-text);"> name, wins </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">range</span><span style="color:var(--shiki-color-text);"> i.store {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		league </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">append</span><span style="color:var(--shiki-color-text);">(league, Player{name, wins})</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> league</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (i </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">InMemoryPlayerStore) </span><span style="color:var(--shiki-token-function);">RecordWin</span><span style="color:var(--shiki-color-text);">(name </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	i.store[name]</span><span style="color:var(--shiki-token-keyword);">++</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (i </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">InMemoryPlayerStore) </span><span style="color:var(--shiki-token-function);">GetPlayerScore</span><span style="color:var(--shiki-color-text);">(name </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) </span><span style="color:var(--shiki-token-keyword);">int</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> i.store[name]</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">// main.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">package</span><span style="color:var(--shiki-color-text);"> main</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;log&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;net/http&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">main</span><span style="color:var(--shiki-color-text);">() {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	server </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NewPlayerServer</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-function);">NewInMemoryPlayerStore</span><span style="color:var(--shiki-color-text);">())</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	log.</span><span style="color:var(--shiki-token-function);">Fatal</span><span style="color:var(--shiki-color-text);">(http.</span><span style="color:var(--shiki-token-function);">ListenAndServe</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;:5000&quot;</span><span style="color:var(--shiki-color-text);">, server))</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>You can find the corresponding tests in the link at the top of the chapter.</p>
<h2 id="store-the-data">Store the data<a aria-hidden="true" tabindex="-1" href="#store-the-data" class="internal alias"> §</a></h2>
<p>There are dozens of databases we could use for this but we’re going to go for a very simple approach. We’re going to store the data for this application in a file as JSON.</p>
<p>This keeps the data very portable and is relatively simple to implement.</p>
<p>It won’t scale especially well but given this is a prototype it’ll be fine for now. If our circumstances change and it’s no longer appropriate it’ll be simple to swap it out for something different because of the <code>PlayerStore</code> abstraction we have used.</p>
<p>We will keep the <code>InMemoryPlayerStore</code> for now so that the integration tests keep passing as we develop our new store. Once we are confident our new implementation is sufficient to make the integration test pass we will swap it in and then delete <code>InMemoryPlayerStore</code>.</p>
<h2 id="write-the-test-first">Write the test first<a aria-hidden="true" tabindex="-1" href="#write-the-test-first" class="internal alias"> §</a></h2>
<p>By now you should be familiar with the interfaces around the standard library for reading data (<code>io.Reader</code>), writing data (<code>io.Writer</code>) and how we can use the standard library to test these functions without having to use real files.</p>
<p>For this work to be complete we’ll need to implement <code>PlayerStore</code> so we’ll write tests for our store calling the methods we need to implement. We’ll start with <code>GetLeague</code>.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store_test.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">TestFileSystemStore</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T) {</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	t.</span><span style="color:var(--shiki-token-function);">Run</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;league from a reader&quot;</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		database </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> strings.</span><span style="color:var(--shiki-token-function);">NewReader</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">`[</span></span>
<span data-line><span style="color:var(--shiki-token-string-expression);">			{&quot;Name&quot;: &quot;Cleo&quot;, &quot;Wins&quot;: 10},</span></span>
<span data-line><span style="color:var(--shiki-token-string-expression);">			{&quot;Name&quot;: &quot;Chris&quot;, &quot;Wins&quot;: 33}]`</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">		store </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> FileSystemPlayerStore{database}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">		got </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> store.</span><span style="color:var(--shiki-token-function);">GetLeague</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">		want </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> []Player{</span></span>
<span data-line><span style="color:var(--shiki-color-text);">			{</span><span style="color:var(--shiki-token-string-expression);">&quot;Cleo&quot;</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-constant);">10</span><span style="color:var(--shiki-color-text);">},</span></span>
<span data-line><span style="color:var(--shiki-color-text);">			{</span><span style="color:var(--shiki-token-string-expression);">&quot;Chris&quot;</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-constant);">33</span><span style="color:var(--shiki-color-text);">},</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-function);">assertLeague</span><span style="color:var(--shiki-color-text);">(t, got, want)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	})</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>We’re using <code>strings.NewReader</code> which will return us a <code>Reader</code>, which is what our <code>FileSystemPlayerStore</code> will use to read data. In <code>main</code> we will open a file, which is also a <code>Reader</code>.</p>
<h2 id="try-to-run-the-test">Try to run the test<a aria-hidden="true" tabindex="-1" href="#try-to-run-the-test" class="internal alias"> §</a></h2>
<pre><code># github.com/quii/learn-go-with-tests/io/v1
./file_system_store_test.go:15:12: undefined: FileSystemPlayerStore
</code></pre>
<h2 id="write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output">Write the minimal amount of code for the test to run and check the failing test output<a aria-hidden="true" tabindex="-1" href="#write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output" class="internal alias"> §</a></h2>
<p>Let’s define <code>FileSystemPlayerStore</code> in a new file</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">FileSystemPlayerStore</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">struct</span><span style="color:var(--shiki-color-text);">{}</span></span></code></pre></div>
<p>Try again</p>
<pre><code># github.com/quii/learn-go-with-tests/io/v1
./file_system_store_test.go:15:28: too many values in struct initializer
./file_system_store_test.go:17:15: store.GetLeague undefined (type FileSystemPlayerStore has no field or method GetLeague)
</code></pre>
<p>It’s complaining because we’re passing in a <code>Reader</code> but not expecting one and it doesn’t have <code>GetLeague</code> defined yet.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">FileSystemPlayerStore</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">struct</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	database io.Reader</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (f </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">FileSystemPlayerStore) </span><span style="color:var(--shiki-token-function);">GetLeague</span><span style="color:var(--shiki-color-text);">() []Player {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>One more try…</p>
<pre><code>=== RUN   TestFileSystemStore//league_from_a_reader
    --- FAIL: TestFileSystemStore//league_from_a_reader (0.00s)
        file_system_store_test.go:24: got [] want [{Cleo 10} {Chris 33}]
</code></pre>
<h2 id="write-enough-code-to-make-it-pass">Write enough code to make it pass<a aria-hidden="true" tabindex="-1" href="#write-enough-code-to-make-it-pass" class="internal alias"> §</a></h2>
<p>We’ve read JSON from a reader before</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (f </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">FileSystemPlayerStore) </span><span style="color:var(--shiki-token-function);">GetLeague</span><span style="color:var(--shiki-color-text);">() []Player {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">var</span><span style="color:var(--shiki-color-text);"> league []Player</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	json.</span><span style="color:var(--shiki-token-function);">NewDecoder</span><span style="color:var(--shiki-color-text);">(f.database).</span><span style="color:var(--shiki-token-function);">Decode</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">league)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> league</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>The test should pass.</p>
<h2 id="refactor">Refactor<a aria-hidden="true" tabindex="-1" href="#refactor" class="internal alias"> §</a></h2>
<p>We <em>have</em> done this before! Our test code for the server had to decode the JSON from the response.</p>
<p>Let’s try DRYing this up into a function.</p>
<p>Create a new file called <code>league.go</code> and put this inside.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//league.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NewLeague</span><span style="color:var(--shiki-color-text);">(rdr io.Reader) ([]Player, </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">var</span><span style="color:var(--shiki-color-text);"> league []Player</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> json.</span><span style="color:var(--shiki-token-function);">NewDecoder</span><span style="color:var(--shiki-color-text);">(rdr).</span><span style="color:var(--shiki-token-function);">Decode</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">league)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		err </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> fmt.</span><span style="color:var(--shiki-token-function);">Errorf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;problem parsing league, </span><span style="color:var(--shiki-token-constant);">%v</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> league, err</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Call this in our implementation and in our test helper <code>getLeagueFromResponse</code> in <code>server_test.go</code></p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (f </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">FileSystemPlayerStore) </span><span style="color:var(--shiki-token-function);">GetLeague</span><span style="color:var(--shiki-color-text);">() []Player {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	league, _ </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NewLeague</span><span style="color:var(--shiki-color-text);">(f.database)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> league</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>We haven’t got a strategy yet for dealing with parsing errors but let’s press on.</p>
<h3 id="seeking-problems">Seeking problems<a aria-hidden="true" tabindex="-1" href="#seeking-problems" class="internal alias"> §</a></h3>
<p>There is a flaw in our implementation. First of all, let’s remind ourselves how <code>io.Reader</code> is defined.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Reader</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">interface</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">Read</span><span style="color:var(--shiki-color-text);">(p []</span><span style="color:var(--shiki-token-keyword);">byte</span><span style="color:var(--shiki-color-text);">) (n </span><span style="color:var(--shiki-token-keyword);">int</span><span style="color:var(--shiki-color-text);">, err </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>With our file, you can imagine it reading through byte by byte until the end. What happens if you try to <code>Read</code> a second time?</p>
<p>Add the following to the end of our current test.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store_test.go</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-comment);">// read again</span></span>
<span data-line><span style="color:var(--shiki-color-text);">got </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> store.</span><span style="color:var(--shiki-token-function);">GetLeague</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-token-function);">assertLeague</span><span style="color:var(--shiki-color-text);">(t, got, want)</span></span></code></pre></div>
<p>We want this to pass, but if you run the test it doesn’t.</p>
<p>The problem is our <code>Reader</code> has reached the end so there is nothing more to read. We need a way to tell it to go back to the start.</p>
<p><a href="https://golang.org/pkg/io/#ReadSeeker" class="external alias">ReadSeeker</a> is another interface in the standard library that can help.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">ReadSeeker</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">interface</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	Reader</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	Seeker</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Remember embedding? This is an interface comprised of <code>Reader</code> and <a href="https://golang.org/pkg/io/#Seeker" class="external"><code>Seeker</code></a></p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Seeker</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">interface</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">Seek</span><span style="color:var(--shiki-color-text);">(offset </span><span style="color:var(--shiki-token-keyword);">int64</span><span style="color:var(--shiki-color-text);">, whence </span><span style="color:var(--shiki-token-keyword);">int</span><span style="color:var(--shiki-color-text);">) (</span><span style="color:var(--shiki-token-keyword);">int64</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>This sounds good, can we change <code>FileSystemPlayerStore</code> to take this interface instead?</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">FileSystemPlayerStore</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">struct</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	database io.ReadSeeker</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (f </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">FileSystemPlayerStore) </span><span style="color:var(--shiki-token-function);">GetLeague</span><span style="color:var(--shiki-color-text);">() []Player {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	f.database.</span><span style="color:var(--shiki-token-function);">Seek</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	league, _ </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NewLeague</span><span style="color:var(--shiki-color-text);">(f.database)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> league</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Try running the test, it now passes! Happily for us <code>strings.NewReader</code> that we used in our test also implements <code>ReadSeeker</code> so we didn’t have to make any other changes.</p>
<p>Next we’ll implement <code>GetPlayerScore</code>.</p>
<h2 id="write-the-test-first-1">Write the test first<a aria-hidden="true" tabindex="-1" href="#write-the-test-first-1" class="internal alias"> §</a></h2>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store_test.go</span></span>
<span data-line><span style="color:var(--shiki-color-text);">t.</span><span style="color:var(--shiki-token-function);">Run</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;get player score&quot;</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	database </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> strings.</span><span style="color:var(--shiki-token-function);">NewReader</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">`[</span></span>
<span data-line><span style="color:var(--shiki-token-string-expression);">		{&quot;Name&quot;: &quot;Cleo&quot;, &quot;Wins&quot;: 10},</span></span>
<span data-line><span style="color:var(--shiki-token-string-expression);">		{&quot;Name&quot;: &quot;Chris&quot;, &quot;Wins&quot;: 33}]`</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	store </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> FileSystemPlayerStore{database}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	got </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> store.</span><span style="color:var(--shiki-token-function);">GetPlayerScore</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;Chris&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	want </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">33</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> got </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> want {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		t.</span><span style="color:var(--shiki-token-function);">Errorf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;got </span><span style="color:var(--shiki-token-constant);">%d</span><span style="color:var(--shiki-token-string-expression);"> want </span><span style="color:var(--shiki-token-constant);">%d</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, got, want)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">})</span></span></code></pre></div>
<h2 id="try-to-run-the-test-1">Try to run the test<a aria-hidden="true" tabindex="-1" href="#try-to-run-the-test-1" class="internal alias"> §</a></h2>
<pre><code>./file_system_store_test.go:38:15: store.GetPlayerScore undefined (type FileSystemPlayerStore has no field or method GetPlayerScore)
</code></pre>
<h2 id="write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output-1">Write the minimal amount of code for the test to run and check the failing test output<a aria-hidden="true" tabindex="-1" href="#write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output-1" class="internal alias"> §</a></h2>
<p>We need to add the method to our new type to get the test to compile.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (f </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">FileSystemPlayerStore) </span><span style="color:var(--shiki-token-function);">GetPlayerScore</span><span style="color:var(--shiki-color-text);">(name </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) </span><span style="color:var(--shiki-token-keyword);">int</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">0</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Now it compiles and the test fails</p>
<pre><code>=== RUN   TestFileSystemStore/get_player_score
    --- FAIL: TestFileSystemStore//get_player_score (0.00s)
        file_system_store_test.go:43: got 0 want 33
</code></pre>
<h2 id="write-enough-code-to-make-it-pass-1">Write enough code to make it pass<a aria-hidden="true" tabindex="-1" href="#write-enough-code-to-make-it-pass-1" class="internal alias"> §</a></h2>
<p>We can iterate over the league to find the player and return their score</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (f </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">FileSystemPlayerStore) </span><span style="color:var(--shiki-token-function);">GetPlayerScore</span><span style="color:var(--shiki-color-text);">(name </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) </span><span style="color:var(--shiki-token-keyword);">int</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">var</span><span style="color:var(--shiki-color-text);"> wins </span><span style="color:var(--shiki-token-keyword);">int</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">for</span><span style="color:var(--shiki-color-text);"> _, player </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">range</span><span style="color:var(--shiki-color-text);"> f.</span><span style="color:var(--shiki-token-function);">GetLeague</span><span style="color:var(--shiki-color-text);">() {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> player.Name </span><span style="color:var(--shiki-token-keyword);">==</span><span style="color:var(--shiki-color-text);"> name {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">			wins </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> player.Wins</span></span>
<span data-line><span style="color:var(--shiki-color-text);">			</span><span style="color:var(--shiki-token-keyword);">break</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> wins</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<h2 id="refactor-1">Refactor<a aria-hidden="true" tabindex="-1" href="#refactor-1" class="internal alias"> §</a></h2>
<p>You will have seen dozens of test helper refactorings so I’ll leave this to you to make it work</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store_test.go</span></span>
<span data-line><span style="color:var(--shiki-color-text);">t.</span><span style="color:var(--shiki-token-function);">Run</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;get player score&quot;</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	database </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> strings.</span><span style="color:var(--shiki-token-function);">NewReader</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">`[</span></span>
<span data-line><span style="color:var(--shiki-token-string-expression);">		{&quot;Name&quot;: &quot;Cleo&quot;, &quot;Wins&quot;: 10},</span></span>
<span data-line><span style="color:var(--shiki-token-string-expression);">		{&quot;Name&quot;: &quot;Chris&quot;, &quot;Wins&quot;: 33}]`</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	store </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> FileSystemPlayerStore{database}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	got </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> store.</span><span style="color:var(--shiki-token-function);">GetPlayerScore</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;Chris&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	want </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">33</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">assertScoreEquals</span><span style="color:var(--shiki-color-text);">(t, got, want)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">})</span></span></code></pre></div>
<p>Finally, we need to start recording scores with <code>RecordWin</code>.</p>
<h2 id="write-the-test-first-2">Write the test first<a aria-hidden="true" tabindex="-1" href="#write-the-test-first-2" class="internal alias"> §</a></h2>
<p>Our approach is fairly short-sighted for writes. We can’t (easily) just update one “row” of JSON in a file. We’ll need to store the <em>whole</em> new representation of our database on every write.</p>
<p>How do we write? We’d normally use a <code>Writer</code> but we already have our <code>ReadSeeker</code>. Potentially we could have two dependencies but the standard library already has an interface for us <code>ReadWriteSeeker</code> which lets us do all the things we’ll need to do with a file.</p>
<p>Let’s update our type</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">FileSystemPlayerStore</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">struct</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	database io.ReadWriteSeeker</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>See if it compiles</p>
<pre><code>./file_system_store_test.go:15:34: cannot use database (type *strings.Reader) as type io.ReadWriteSeeker in field value:
    *strings.Reader does not implement io.ReadWriteSeeker (missing Write method)
./file_system_store_test.go:36:34: cannot use database (type *strings.Reader) as type io.ReadWriteSeeker in field value:
    *strings.Reader does not implement io.ReadWriteSeeker (missing Write method)
</code></pre>
<p>It’s not too surprising that <code>strings.Reader</code> does not implement <code>ReadWriteSeeker</code> so what do we do?</p>
<p>We have two choices</p>
<ul>
<li>Create a temporary file for each test. <code>*os.File</code> implements <code>ReadWriteSeeker</code>. The pro of this is it becomes more of an integration test, we’re really reading and writing from the file system so it will give us a very high level of confidence. The cons are we prefer unit tests because they are faster and generally simpler. We will also need to do more work around creating temporary files and then making sure they’re removed after the test.</li>
<li>We could use a third party library. <a href="https://github.com/mattetti" class="external alias">Mattetti</a> has written a library <a href="https://github.com/mattetti/filebuffer" class="external alias">filebuffer</a> which implements the interface we need and doesn’t touch the file system.</li>
</ul>
<p>I don’t think there’s an especially wrong answer here, but by choosing to use a third party library I would have to explain dependency management! So we will use files instead.</p>
<p>Before adding our test we need to make our other tests compile by replacing the <code>strings.Reader</code> with an <code>os.File</code>.</p>
<p>Let’s create some helper functions which will create a temporary file with some data inside it, and abstract our score tests</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store_test.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">createTempFile</span><span style="color:var(--shiki-color-text);">(t testing.TB, initialData </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) (io.ReadWriteSeeker, </span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">()) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	t.</span><span style="color:var(--shiki-token-function);">Helper</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	tmpfile, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> os.</span><span style="color:var(--shiki-token-function);">CreateTemp</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;&quot;</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-string-expression);">&quot;db&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		t.</span><span style="color:var(--shiki-token-function);">Fatalf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;could not create temp file </span><span style="color:var(--shiki-token-constant);">%v</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	tmpfile.</span><span style="color:var(--shiki-token-function);">Write</span><span style="color:var(--shiki-color-text);">([]</span><span style="color:var(--shiki-token-function);">byte</span><span style="color:var(--shiki-color-text);">(initialData))</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	removeFile </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">() {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		tmpfile.</span><span style="color:var(--shiki-token-function);">Close</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		os.</span><span style="color:var(--shiki-token-function);">Remove</span><span style="color:var(--shiki-color-text);">(tmpfile.</span><span style="color:var(--shiki-token-function);">Name</span><span style="color:var(--shiki-color-text);">())</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> tmpfile, removeFile</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">assertScoreEquals</span><span style="color:var(--shiki-color-text);">(t testing.TB, got, want </span><span style="color:var(--shiki-token-keyword);">int</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	t.</span><span style="color:var(--shiki-token-function);">Helper</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> got </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> want {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		t.</span><span style="color:var(--shiki-token-function);">Errorf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;got </span><span style="color:var(--shiki-token-constant);">%d</span><span style="color:var(--shiki-token-string-expression);"> want </span><span style="color:var(--shiki-token-constant);">%d</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, got, want)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p><a href="https://pkg.go.dev/os#CreateTemp" class="external alias">CreateTemp</a> creates a temporary file for us to use. The <code>&quot;db&quot;</code> value we’ve passed in is a prefix put on a random file name it will create. This is to ensure it won’t clash with other files by accident.</p>
<p>You’ll notice we’re not only returning our <code>ReadWriteSeeker</code> (the file) but also a function. We need to make sure that the file is removed once the test is finished. We don’t want to leak details of the files into the test as it’s prone to error and uninteresting for the reader. By returning a <code>removeFile</code> function, we can take care of the details in our helper and all the caller has to do is run <code>defer cleanDatabase()</code>.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store_test.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">TestFileSystemStore</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T) {</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	t.</span><span style="color:var(--shiki-token-function);">Run</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;league from a reader&quot;</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		database, cleanDatabase </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">createTempFile</span><span style="color:var(--shiki-color-text);">(t, </span><span style="color:var(--shiki-token-string-expression);">`[</span></span>
<span data-line><span style="color:var(--shiki-token-string-expression);">			{&quot;Name&quot;: &quot;Cleo&quot;, &quot;Wins&quot;: 10},</span></span>
<span data-line><span style="color:var(--shiki-token-string-expression);">			{&quot;Name&quot;: &quot;Chris&quot;, &quot;Wins&quot;: 33}]`</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">defer</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">cleanDatabase</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">		store </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> FileSystemPlayerStore{database}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">		got </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> store.</span><span style="color:var(--shiki-token-function);">GetLeague</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">		want </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> []Player{</span></span>
<span data-line><span style="color:var(--shiki-color-text);">			{</span><span style="color:var(--shiki-token-string-expression);">&quot;Cleo&quot;</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-constant);">10</span><span style="color:var(--shiki-color-text);">},</span></span>
<span data-line><span style="color:var(--shiki-color-text);">			{</span><span style="color:var(--shiki-token-string-expression);">&quot;Chris&quot;</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-constant);">33</span><span style="color:var(--shiki-color-text);">},</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-function);">assertLeague</span><span style="color:var(--shiki-color-text);">(t, got, want)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-comment);">// read again</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		got </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> store.</span><span style="color:var(--shiki-token-function);">GetLeague</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-function);">assertLeague</span><span style="color:var(--shiki-color-text);">(t, got, want)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	})</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	t.</span><span style="color:var(--shiki-token-function);">Run</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;get player score&quot;</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		database, cleanDatabase </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">createTempFile</span><span style="color:var(--shiki-color-text);">(t, </span><span style="color:var(--shiki-token-string-expression);">`[</span></span>
<span data-line><span style="color:var(--shiki-token-string-expression);">			{&quot;Name&quot;: &quot;Cleo&quot;, &quot;Wins&quot;: 10},</span></span>
<span data-line><span style="color:var(--shiki-token-string-expression);">			{&quot;Name&quot;: &quot;Chris&quot;, &quot;Wins&quot;: 33}]`</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">defer</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">cleanDatabase</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">		store </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> FileSystemPlayerStore{database}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">		got </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> store.</span><span style="color:var(--shiki-token-function);">GetPlayerScore</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;Chris&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		want </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">33</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-function);">assertScoreEquals</span><span style="color:var(--shiki-color-text);">(t, got, want)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	})</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Run the tests and they should be passing! There were a fair amount of changes but now it feels like we have our interface definition complete and it should be very easy to add new tests from now.</p>
<p>Let’s get the first iteration of recording a win for an existing player</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store_test.go</span></span>
<span data-line><span style="color:var(--shiki-color-text);">t.</span><span style="color:var(--shiki-token-function);">Run</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;store wins for existing players&quot;</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	database, cleanDatabase </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">createTempFile</span><span style="color:var(--shiki-color-text);">(t, </span><span style="color:var(--shiki-token-string-expression);">`[</span></span>
<span data-line><span style="color:var(--shiki-token-string-expression);">		{&quot;Name&quot;: &quot;Cleo&quot;, &quot;Wins&quot;: 10},</span></span>
<span data-line><span style="color:var(--shiki-token-string-expression);">		{&quot;Name&quot;: &quot;Chris&quot;, &quot;Wins&quot;: 33}]`</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">defer</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">cleanDatabase</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	store </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> FileSystemPlayerStore{database}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	store.</span><span style="color:var(--shiki-token-function);">RecordWin</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;Chris&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	got </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> store.</span><span style="color:var(--shiki-token-function);">GetPlayerScore</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;Chris&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	want </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">34</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">assertScoreEquals</span><span style="color:var(--shiki-color-text);">(t, got, want)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">})</span></span></code></pre></div>
<h2 id="try-to-run-the-test-2">Try to run the test<a aria-hidden="true" tabindex="-1" href="#try-to-run-the-test-2" class="internal alias"> §</a></h2>
<p><code>./file_system_store_test.go:67:8: store.RecordWin undefined (type FileSystemPlayerStore has no field or method RecordWin)</code></p>
<h2 id="write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output-2">Write the minimal amount of code for the test to run and check the failing test output<a aria-hidden="true" tabindex="-1" href="#write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output-2" class="internal alias"> §</a></h2>
<p>Add the new method</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (f </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">FileSystemPlayerStore) </span><span style="color:var(--shiki-token-function);">RecordWin</span><span style="color:var(--shiki-color-text);">(name </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<pre><code>=== RUN   TestFileSystemStore/store_wins_for_existing_players
    --- FAIL: TestFileSystemStore/store_wins_for_existing_players (0.00s)
        file_system_store_test.go:71: got 33 want 34
</code></pre>
<p>Our implementation is empty so the old score is getting returned.</p>
<h2 id="write-enough-code-to-make-it-pass-2">Write enough code to make it pass<a aria-hidden="true" tabindex="-1" href="#write-enough-code-to-make-it-pass-2" class="internal alias"> §</a></h2>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (f </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">FileSystemPlayerStore) </span><span style="color:var(--shiki-token-function);">RecordWin</span><span style="color:var(--shiki-color-text);">(name </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	league </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> f.</span><span style="color:var(--shiki-token-function);">GetLeague</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">for</span><span style="color:var(--shiki-color-text);"> i, player </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">range</span><span style="color:var(--shiki-color-text);"> league {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> player.Name </span><span style="color:var(--shiki-token-keyword);">==</span><span style="color:var(--shiki-color-text);"> name {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">			league[i].Wins</span><span style="color:var(--shiki-token-keyword);">++</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	f.database.</span><span style="color:var(--shiki-token-function);">Seek</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	json.</span><span style="color:var(--shiki-token-function);">NewEncoder</span><span style="color:var(--shiki-color-text);">(f.database).</span><span style="color:var(--shiki-token-function);">Encode</span><span style="color:var(--shiki-color-text);">(league)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>You may be asking yourself why I am doing <code>league[i].Wins++</code> rather than <code>player.Wins++</code>.</p>
<p>When you <code>range</code> over a slice you are returned the current index of the loop (in our case <code>i</code>) and a <em>copy</em> of the element at that index. Changing the <code>Wins</code> value of a copy won’t have any effect on the <code>league</code> slice that we iterate on. For that reason, we need to get the reference to the actual value by doing <code>league[i]</code> and then changing that value instead.</p>
<p>If you run the tests, they should now be passing.</p>
<h2 id="refactor-2">Refactor<a aria-hidden="true" tabindex="-1" href="#refactor-2" class="internal alias"> §</a></h2>
<p>In <code>GetPlayerScore</code> and <code>RecordWin</code>, we are iterating over <code>[]Player</code> to find a player by name.</p>
<p>We could refactor this common code in the internals of <code>FileSystemStore</code> but to me, it feels like this is maybe useful code we can lift into a new type. Working with a “League” so far has always been with <code>[]Player</code> but we can create a new type called <code>League</code>. This will be easier for other developers to understand and then we can attach useful methods onto that type for us to use.</p>
<p>Inside <code>league.go</code> add the following</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//league.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">League</span><span style="color:var(--shiki-color-text);"> []Player</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (l League) </span><span style="color:var(--shiki-token-function);">Find</span><span style="color:var(--shiki-color-text);">(name </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">Player {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">for</span><span style="color:var(--shiki-color-text);"> i, p </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">range</span><span style="color:var(--shiki-color-text);"> l {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> p.Name </span><span style="color:var(--shiki-token-keyword);">==</span><span style="color:var(--shiki-color-text);"> name {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">			</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">l[i]</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Now if anyone has a <code>League</code> they can easily find a given player.</p>
<p>Change our <code>PlayerStore</code> interface to return <code>League</code> rather than <code>[]Player</code>. Try to re-run the tests, you’ll get a compilation problem because we’ve changed the interface but it’s very easy to fix; just change the return type from <code>[]Player</code> to <code>League</code>.</p>
<p>This lets us simplify our methods in <code>file_system_store</code>.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (f </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">FileSystemPlayerStore) </span><span style="color:var(--shiki-token-function);">GetPlayerScore</span><span style="color:var(--shiki-color-text);">(name </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) </span><span style="color:var(--shiki-token-keyword);">int</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	player </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> f.</span><span style="color:var(--shiki-token-function);">GetLeague</span><span style="color:var(--shiki-color-text);">().</span><span style="color:var(--shiki-token-function);">Find</span><span style="color:var(--shiki-color-text);">(name)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> player </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> player.Wins</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">0</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (f </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">FileSystemPlayerStore) </span><span style="color:var(--shiki-token-function);">RecordWin</span><span style="color:var(--shiki-color-text);">(name </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	league </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> f.</span><span style="color:var(--shiki-token-function);">GetLeague</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	player </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> league.</span><span style="color:var(--shiki-token-function);">Find</span><span style="color:var(--shiki-color-text);">(name)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> player </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		player.Wins</span><span style="color:var(--shiki-token-keyword);">++</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	f.database.</span><span style="color:var(--shiki-token-function);">Seek</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	json.</span><span style="color:var(--shiki-token-function);">NewEncoder</span><span style="color:var(--shiki-color-text);">(f.database).</span><span style="color:var(--shiki-token-function);">Encode</span><span style="color:var(--shiki-color-text);">(league)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>This is looking much better and we can see how we might be able to find other useful functionality around <code>League</code> that can be refactored.</p>
<p>We now need to handle the scenario of recording wins of new players.</p>
<h2 id="write-the-test-first-3">Write the test first<a aria-hidden="true" tabindex="-1" href="#write-the-test-first-3" class="internal alias"> §</a></h2>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store_test.go</span></span>
<span data-line><span style="color:var(--shiki-color-text);">t.</span><span style="color:var(--shiki-token-function);">Run</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;store wins for new players&quot;</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	database, cleanDatabase </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">createTempFile</span><span style="color:var(--shiki-color-text);">(t, </span><span style="color:var(--shiki-token-string-expression);">`[</span></span>
<span data-line><span style="color:var(--shiki-token-string-expression);">		{&quot;Name&quot;: &quot;Cleo&quot;, &quot;Wins&quot;: 10},</span></span>
<span data-line><span style="color:var(--shiki-token-string-expression);">		{&quot;Name&quot;: &quot;Chris&quot;, &quot;Wins&quot;: 33}]`</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">defer</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">cleanDatabase</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	store </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> FileSystemPlayerStore{database}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	store.</span><span style="color:var(--shiki-token-function);">RecordWin</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;Pepper&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	got </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> store.</span><span style="color:var(--shiki-token-function);">GetPlayerScore</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;Pepper&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	want </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">assertScoreEquals</span><span style="color:var(--shiki-color-text);">(t, got, want)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">})</span></span></code></pre></div>
<h2 id="try-to-run-the-test-3">Try to run the test<a aria-hidden="true" tabindex="-1" href="#try-to-run-the-test-3" class="internal alias"> §</a></h2>
<pre><code>=== RUN   TestFileSystemStore/store_wins_for_new_players#01
    --- FAIL: TestFileSystemStore/store_wins_for_new_players#01 (0.00s)
        file_system_store_test.go:86: got 0 want 1
</code></pre>
<h2 id="write-enough-code-to-make-it-pass-3">Write enough code to make it pass<a aria-hidden="true" tabindex="-1" href="#write-enough-code-to-make-it-pass-3" class="internal alias"> §</a></h2>
<p>We just need to handle the scenario where <code>Find</code> returns <code>nil</code> because it couldn’t find the player.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (f </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">FileSystemPlayerStore) </span><span style="color:var(--shiki-token-function);">RecordWin</span><span style="color:var(--shiki-color-text);">(name </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	league </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> f.</span><span style="color:var(--shiki-token-function);">GetLeague</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	player </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> league.</span><span style="color:var(--shiki-token-function);">Find</span><span style="color:var(--shiki-color-text);">(name)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> player </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		player.Wins</span><span style="color:var(--shiki-token-keyword);">++</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	} </span><span style="color:var(--shiki-token-keyword);">else</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		league </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">append</span><span style="color:var(--shiki-color-text);">(league, Player{name, </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">})</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	f.database.</span><span style="color:var(--shiki-token-function);">Seek</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	json.</span><span style="color:var(--shiki-token-function);">NewEncoder</span><span style="color:var(--shiki-color-text);">(f.database).</span><span style="color:var(--shiki-token-function);">Encode</span><span style="color:var(--shiki-color-text);">(league)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>The happy path is looking ok so we can now try using our new <code>Store</code> in the integration test. This will give us more confidence that the software works and then we can delete the redundant <code>InMemoryPlayerStore</code>.</p>
<p>In <code>TestRecordingWinsAndRetrievingThem</code> replace the old store.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//server_integration_test.go</span></span>
<span data-line><span style="color:var(--shiki-color-text);">database, cleanDatabase </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">createTempFile</span><span style="color:var(--shiki-color-text);">(t, </span><span style="color:var(--shiki-token-string-expression);">&quot;&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">defer</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">cleanDatabase</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">store </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">FileSystemPlayerStore{database}</span></span></code></pre></div>
<p>If you run the test it should pass and now we can delete <code>InMemoryPlayerStore</code>. <code>main.go</code> will now have compilation problems which will motivate us to now use our new store in the “real” code.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">// main.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">package</span><span style="color:var(--shiki-color-text);"> main</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;log&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;net/http&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;os&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> dbFileName </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;game.db.json&quot;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">main</span><span style="color:var(--shiki-color-text);">() {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	db, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> os.</span><span style="color:var(--shiki-token-function);">OpenFile</span><span style="color:var(--shiki-color-text);">(dbFileName, os.O_RDWR</span><span style="color:var(--shiki-token-keyword);">|</span><span style="color:var(--shiki-color-text);">os.O_CREATE, </span><span style="color:var(--shiki-token-constant);">0666</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		log.</span><span style="color:var(--shiki-token-function);">Fatalf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;problem opening </span><span style="color:var(--shiki-token-constant);">%s</span><span style="color:var(--shiki-token-string-expression);"> </span><span style="color:var(--shiki-token-constant);">%v</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, dbFileName, err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	store </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">FileSystemPlayerStore{db}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	server </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NewPlayerServer</span><span style="color:var(--shiki-color-text);">(store)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> http.</span><span style="color:var(--shiki-token-function);">ListenAndServe</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;:5000&quot;</span><span style="color:var(--shiki-color-text);">, server); err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		log.</span><span style="color:var(--shiki-token-function);">Fatalf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;could not listen on port 5000 </span><span style="color:var(--shiki-token-constant);">%v</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<ul>
<li>We create a file for our database.</li>
<li>The 2nd argument to <code>os.OpenFile</code> lets you define the permissions for opening the file, in our case <code>O_RDWR</code> means we want to read and write <em>and</em> <code>os.O_CREATE</code> means create the file if it doesn’t exist.</li>
<li>The 3rd argument means sets permissions for the file, in our case, all users can read and write the file. <a href="https://superuser.com/questions/295591/what-is-the-meaning-of-chmod-666" class="external alias">(See superuser.com for a more detailed explanation)</a>.</li>
</ul>
<p>Running the program now persists the data in a file in between restarts, hooray!</p>
<h2 id="more-refactoring-and-performance-concerns">More refactoring and performance concerns<a aria-hidden="true" tabindex="-1" href="#more-refactoring-and-performance-concerns" class="internal alias"> §</a></h2>
<p>Every time someone calls <code>GetLeague()</code> or <code>GetPlayerScore()</code> we are reading the entire file and parsing it into JSON. We should not have to do that because <code>FileSystemStore</code> is entirely responsible for the state of the league; it should only need to read the file when the program starts up and only need to update the file when data changes.</p>
<p>We can create a constructor which can do some of this initialisation for us and store the league as a value in our <code>FileSystemStore</code> to be used on the reads instead.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">FileSystemPlayerStore</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">struct</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	database io.ReadWriteSeeker</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	league   League</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NewFileSystemPlayerStore</span><span style="color:var(--shiki-color-text);">(database io.ReadWriteSeeker) </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">FileSystemPlayerStore {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	database.</span><span style="color:var(--shiki-token-function);">Seek</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	league, _ </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NewLeague</span><span style="color:var(--shiki-color-text);">(database)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">FileSystemPlayerStore{</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		database: database,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		league:   league,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>This way we only have to read from disk once. We can now replace all of our previous calls to getting the league from disk and just use <code>f.league</code> instead.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (f </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">FileSystemPlayerStore) </span><span style="color:var(--shiki-token-function);">GetLeague</span><span style="color:var(--shiki-color-text);">() League {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> f.league</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (f </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">FileSystemPlayerStore) </span><span style="color:var(--shiki-token-function);">GetPlayerScore</span><span style="color:var(--shiki-color-text);">(name </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) </span><span style="color:var(--shiki-token-keyword);">int</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	player </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> f.league.</span><span style="color:var(--shiki-token-function);">Find</span><span style="color:var(--shiki-color-text);">(name)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> player </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> player.Wins</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">0</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (f </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">FileSystemPlayerStore) </span><span style="color:var(--shiki-token-function);">RecordWin</span><span style="color:var(--shiki-color-text);">(name </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	player </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> f.league.</span><span style="color:var(--shiki-token-function);">Find</span><span style="color:var(--shiki-color-text);">(name)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> player </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		player.Wins</span><span style="color:var(--shiki-token-keyword);">++</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	} </span><span style="color:var(--shiki-token-keyword);">else</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		f.league </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">append</span><span style="color:var(--shiki-color-text);">(f.league, Player{name, </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">})</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	f.database.</span><span style="color:var(--shiki-token-function);">Seek</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	json.</span><span style="color:var(--shiki-token-function);">NewEncoder</span><span style="color:var(--shiki-color-text);">(f.database).</span><span style="color:var(--shiki-token-function);">Encode</span><span style="color:var(--shiki-color-text);">(f.league)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>If you try to run the tests it will now complain about initialising <code>FileSystemPlayerStore</code> so just fix them by calling our new constructor.</p>
<h3 id="another-problem">Another problem<a aria-hidden="true" tabindex="-1" href="#another-problem" class="internal alias"> §</a></h3>
<p>There is some more naivety in the way we are dealing with files which <em>could</em> create a very nasty bug down the line.</p>
<p>When we <code>RecordWin</code>, we <code>Seek</code> back to the start of the file and then write the new data—but what if the new data was smaller than what was there before?</p>
<p>In our current case, this is impossible. We never edit or delete scores so the data can only get bigger. However, it would be irresponsible for us to leave the code like this; it’s not unthinkable that a delete scenario could come up.</p>
<p>How will we test for this though? What we need to do is first refactor our code so we separate out the concern of the <em>kind of data we write, from the writing</em>. We can then test that separately to check it works how we hope.</p>
<p>We’ll create a new type to encapsulate our “when we write we go from the beginning” functionality. I’m going to call it <code>Tape</code>. Create a new file with the following:</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">// tape.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">package</span><span style="color:var(--shiki-color-text);"> main</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;io&quot;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">tape</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">struct</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	file io.ReadWriteSeeker</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">tape) </span><span style="color:var(--shiki-token-function);">Write</span><span style="color:var(--shiki-color-text);">(p []</span><span style="color:var(--shiki-token-keyword);">byte</span><span style="color:var(--shiki-color-text);">) (n </span><span style="color:var(--shiki-token-keyword);">int</span><span style="color:var(--shiki-color-text);">, err </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	t.file.</span><span style="color:var(--shiki-token-function);">Seek</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> t.file.</span><span style="color:var(--shiki-token-function);">Write</span><span style="color:var(--shiki-color-text);">(p)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Notice that we’re only implementing <code>Write</code> now, as it encapsulates the <code>Seek</code> part. This means our <code>FileSystemStore</code> can just have a reference to a <code>Writer</code> instead.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">FileSystemPlayerStore</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">struct</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	database io.Writer</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	league   League</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Update the constructor to use <code>Tape</code></p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NewFileSystemPlayerStore</span><span style="color:var(--shiki-color-text);">(database io.ReadWriteSeeker) </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">FileSystemPlayerStore {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	database.</span><span style="color:var(--shiki-token-function);">Seek</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	league, _ </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NewLeague</span><span style="color:var(--shiki-color-text);">(database)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">FileSystemPlayerStore{</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		database: </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">tape{database},</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		league:   league,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Finally, we can get the amazing payoff we wanted by removing the <code>Seek</code> call from <code>RecordWin</code>. Yes, it doesn’t feel much, but at least it means if we do any other kind of writes we can rely on our <code>Write</code> to behave how we need it to. Plus it will now let us test the potentially problematic code separately and fix it.</p>
<p>Let’s write the test where we want to update the entire contents of a file with something that is smaller than the original contents.</p>
<h2 id="write-the-test-first-4">Write the test first<a aria-hidden="true" tabindex="-1" href="#write-the-test-first-4" class="internal alias"> §</a></h2>
<p>Our test will create a file with some content, try to write to it using the <code>tape</code>, and read it all again to see what’s in the file. In <code>tape_test.go</code>:</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//tape_test.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">TestTape_Write</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	file, clean </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">createTempFile</span><span style="color:var(--shiki-color-text);">(t, </span><span style="color:var(--shiki-token-string-expression);">&quot;12345&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">defer</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">clean</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	tape </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">tape{file}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	tape.</span><span style="color:var(--shiki-token-function);">Write</span><span style="color:var(--shiki-color-text);">([]</span><span style="color:var(--shiki-token-function);">byte</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;abc&quot;</span><span style="color:var(--shiki-color-text);">))</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	file.</span><span style="color:var(--shiki-token-function);">Seek</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	newFileContents, _ </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> io.</span><span style="color:var(--shiki-token-function);">ReadAll</span><span style="color:var(--shiki-color-text);">(file)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	got </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">string</span><span style="color:var(--shiki-color-text);">(newFileContents)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	want </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;abc&quot;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> got </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> want {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		t.</span><span style="color:var(--shiki-token-function);">Errorf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;got </span><span style="color:var(--shiki-token-constant);">%q</span><span style="color:var(--shiki-token-string-expression);"> want </span><span style="color:var(--shiki-token-constant);">%q</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, got, want)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<h2 id="try-to-run-the-test-4">Try to run the test<a aria-hidden="true" tabindex="-1" href="#try-to-run-the-test-4" class="internal alias"> §</a></h2>
<pre><code>=== RUN   TestTape_Write
--- FAIL: TestTape_Write (0.00s)
    tape_test.go:23: got 'abc45' want 'abc'
</code></pre>
<p>As we thought! It writes the data we want, but leaves the rest of the original data remaining.</p>
<h2 id="write-enough-code-to-make-it-pass-4">Write enough code to make it pass<a aria-hidden="true" tabindex="-1" href="#write-enough-code-to-make-it-pass-4" class="internal alias"> §</a></h2>
<p><code>os.File</code> has a truncate function that will let us effectively empty the file. We should be able to just call this to get what we want.</p>
<p>Change <code>tape</code> to the following:</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//tape.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">tape</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">struct</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	file </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">os.File</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">tape) </span><span style="color:var(--shiki-token-function);">Write</span><span style="color:var(--shiki-color-text);">(p []</span><span style="color:var(--shiki-token-keyword);">byte</span><span style="color:var(--shiki-color-text);">) (n </span><span style="color:var(--shiki-token-keyword);">int</span><span style="color:var(--shiki-color-text);">, err </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	t.file.</span><span style="color:var(--shiki-token-function);">Truncate</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	t.file.</span><span style="color:var(--shiki-token-function);">Seek</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> t.file.</span><span style="color:var(--shiki-token-function);">Write</span><span style="color:var(--shiki-color-text);">(p)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>The compiler will fail in a number of places where we are expecting an <code>io.ReadWriteSeeker</code> but we are sending in <code>*os.File</code>. You should be able to fix these problems yourself by now but if you get stuck just check the source code.</p>
<p>Once you get it refactoring our <code>TestTape_Write</code> test should be passing!</p>
<h3 id="one-other-small-refactor">One other small refactor<a aria-hidden="true" tabindex="-1" href="#one-other-small-refactor" class="internal alias"> §</a></h3>
<p>In <code>RecordWin</code> we have the line <code>json.NewEncoder(f.database).Encode(f.league)</code>.</p>
<p>We don’t need to create a new encoder every time we write, we can initialise one in our constructor and use that instead.</p>
<p>Store a reference to an <code>Encoder</code> in our type and initialise it in the constructor:</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">FileSystemPlayerStore</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">struct</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	database </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">json.Encoder</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	league   League</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NewFileSystemPlayerStore</span><span style="color:var(--shiki-color-text);">(file </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">os.File) </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">FileSystemPlayerStore {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	file.</span><span style="color:var(--shiki-token-function);">Seek</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	league, _ </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NewLeague</span><span style="color:var(--shiki-color-text);">(file)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">FileSystemPlayerStore{</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		database: json.</span><span style="color:var(--shiki-token-function);">NewEncoder</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">tape{file}),</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		league:   league,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Use it in <code>RecordWin</code>.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (f </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">FileSystemPlayerStore) </span><span style="color:var(--shiki-token-function);">RecordWin</span><span style="color:var(--shiki-color-text);">(name </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	player </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> f.league.</span><span style="color:var(--shiki-token-function);">Find</span><span style="color:var(--shiki-color-text);">(name)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> player </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		player.Wins</span><span style="color:var(--shiki-token-keyword);">++</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	} </span><span style="color:var(--shiki-token-keyword);">else</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		f.league </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">append</span><span style="color:var(--shiki-color-text);">(f.league, Player{name, </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">})</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	f.database.</span><span style="color:var(--shiki-token-function);">Encode</span><span style="color:var(--shiki-color-text);">(f.league)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<h2 id="didnt-we-just-break-some-rules-there-testing-private-things-no-interfaces">Didn’t we just break some rules there? Testing private things? No interfaces?<a aria-hidden="true" tabindex="-1" href="#didnt-we-just-break-some-rules-there-testing-private-things-no-interfaces" class="internal alias"> §</a></h2>
<h3 id="on-testing-private-types">On testing private types<a aria-hidden="true" tabindex="-1" href="#on-testing-private-types" class="internal alias"> §</a></h3>
<p>It’s true that <em>in general</em> you should favour not testing private things as that can sometimes lead to your tests being too tightly coupled to the implementation, which can hinder refactoring in future.</p>
<p>However, we must not forget that tests should give us <em>confidence</em>.</p>
<p>We were not confident that our implementation would work if we added any kind of edit or delete functionality. We did not want to leave the code like that, especially if this was being worked on by more than one person who may not be aware of the shortcomings of our initial approach.</p>
<p>Finally, it’s just one test! If we decide to change the way it works it won’t be a disaster to just delete the test but we have at the very least captured the requirement for future maintainers.</p>
<h3 id="interfaces">Interfaces<a aria-hidden="true" tabindex="-1" href="#interfaces" class="internal alias"> §</a></h3>
<p>We started off the code by using <code>io.Reader</code> as that was the easiest path for us to unit test our new <code>PlayerStore</code>. As we developed the code we moved on to <code>io.ReadWriter</code> and then <code>io.ReadWriteSeeker</code>. We then found out there was nothing in the standard library that actually implemented that apart from <code>*os.File</code>. We could’ve taken the decision to write our own or use an open source one but it felt pragmatic just to make temporary files for the tests.</p>
<p>Finally, we needed <code>Truncate</code> which is also on <code>*os.File</code>. It would’ve been an option to create our own interface capturing these requirements.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">ReadWriteSeekTruncate</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">interface</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	io.ReadWriteSeeker</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">Truncate</span><span style="color:var(--shiki-color-text);">(size </span><span style="color:var(--shiki-token-keyword);">int64</span><span style="color:var(--shiki-color-text);">) </span><span style="color:var(--shiki-token-keyword);">error</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>But what is this really giving us? Bear in mind we are <em>not mocking</em> and it is unrealistic for a <strong>file system</strong> store to take any type other than an <code>*os.File</code> so we don’t need the polymorphism that interfaces give us.</p>
<p>Don’t be afraid to chop and change types and experiment like we have here. The great thing about using a statically typed language is the compiler will help you with every change.</p>
<h2 id="error-handling">Error handling<a aria-hidden="true" tabindex="-1" href="#error-handling" class="internal alias"> §</a></h2>
<p>Before we start working on sorting we should make sure we’re happy with our current code and remove any technical debt we may have. It’s an important principle to get to working software as quickly as possible (stay out of the red state) but that doesn’t mean we should ignore error cases!</p>
<p>If we go back to <code>FileSystemStore.go</code> we have <code>league, _ := NewLeague(f.database)</code> in our constructor.</p>
<p><code>NewLeague</code> can return an error if it is unable to parse the league from the <code>io.Reader</code> that we provide.</p>
<p>It was pragmatic to ignore that at the time as we already had failing tests. If we had tried to tackle it at the same time, we would have been juggling two things at once.</p>
<p>Let’s make it so our constructor is capable of returning an error.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NewFileSystemPlayerStore</span><span style="color:var(--shiki-color-text);">(file </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">os.File) (</span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">FileSystemPlayerStore, </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	file.</span><span style="color:var(--shiki-token-function);">Seek</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	league, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NewLeague</span><span style="color:var(--shiki-color-text);">(file)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);">, fmt.</span><span style="color:var(--shiki-token-function);">Errorf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;problem loading player store from file </span><span style="color:var(--shiki-token-constant);">%s</span><span style="color:var(--shiki-token-string-expression);">, </span><span style="color:var(--shiki-token-constant);">%v</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, file.</span><span style="color:var(--shiki-token-function);">Name</span><span style="color:var(--shiki-color-text);">(), err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">FileSystemPlayerStore{</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		database: json.</span><span style="color:var(--shiki-token-function);">NewEncoder</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">tape{file}),</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		league:   league,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}, </span><span style="color:var(--shiki-token-constant);">nil</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Remember it is very important to give helpful error messages (just like your tests). People on the internet jokingly say that most Go code is:</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> err</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p><strong>That is 100% not idiomatic.</strong> Adding contextual information (i.e what you were doing to cause the error) to your error messages makes operating your software far easier.</p>
<p>If you try to compile you’ll get some errors.</p>
<pre><code>./main.go:18:35: multiple-value NewFileSystemPlayerStore() in single-value context
./file_system_store_test.go:35:36: multiple-value NewFileSystemPlayerStore() in single-value context
./file_system_store_test.go:57:36: multiple-value NewFileSystemPlayerStore() in single-value context
./file_system_store_test.go:70:36: multiple-value NewFileSystemPlayerStore() in single-value context
./file_system_store_test.go:85:36: multiple-value NewFileSystemPlayerStore() in single-value context
./server_integration_test.go:12:35: multiple-value NewFileSystemPlayerStore() in single-value context
</code></pre>
<p>In main we’ll want to exit the program, printing the error.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//main.go</span></span>
<span data-line><span style="color:var(--shiki-color-text);">store, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NewFileSystemPlayerStore</span><span style="color:var(--shiki-color-text);">(db)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	log.</span><span style="color:var(--shiki-token-function);">Fatalf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;problem creating file system player store, </span><span style="color:var(--shiki-token-constant);">%v</span><span style="color:var(--shiki-token-string-expression);"> &quot;</span><span style="color:var(--shiki-color-text);">, err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>In the tests we should assert there is no error. We can make a helper to help with this.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store_test.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">assertNoError</span><span style="color:var(--shiki-color-text);">(t testing.TB, err </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	t.</span><span style="color:var(--shiki-token-function);">Helper</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		t.</span><span style="color:var(--shiki-token-function);">Fatalf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;didn't expect an error but got one, </span><span style="color:var(--shiki-token-constant);">%v</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Work through the other compilation problems using this helper. Finally, you should have a failing test:</p>
<pre><code>=== RUN   TestRecordingWinsAndRetrievingThem
--- FAIL: TestRecordingWinsAndRetrievingThem (0.00s)
    server_integration_test.go:14: didn't expect an error but got one, problem loading player store from file /var/folders/nj/r_ccbj5d7flds0sf63yy4vb80000gn/T/db841037437, problem parsing league, EOF
</code></pre>
<p>We cannot parse the league because the file is empty. We weren’t getting errors before because we always just ignored them.</p>
<p>Let’s fix our big integration test by putting some valid JSON in it:</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//server_integration_test.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">TestRecordingWinsAndRetrievingThem</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	database, cleanDatabase </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">createTempFile</span><span style="color:var(--shiki-color-text);">(t, </span><span style="color:var(--shiki-token-string-expression);">`[]`</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-comment);">//etc...</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Now that all the tests are passing, we need to handle the scenario where the file is empty.</p>
<h2 id="write-the-test-first-5">Write the test first<a aria-hidden="true" tabindex="-1" href="#write-the-test-first-5" class="internal alias"> §</a></h2>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store_test.go</span></span>
<span data-line><span style="color:var(--shiki-color-text);">t.</span><span style="color:var(--shiki-token-function);">Run</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;works with an empty file&quot;</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	database, cleanDatabase </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">createTempFile</span><span style="color:var(--shiki-color-text);">(t, </span><span style="color:var(--shiki-token-string-expression);">&quot;&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">defer</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">cleanDatabase</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	_, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NewFileSystemPlayerStore</span><span style="color:var(--shiki-color-text);">(database)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">assertNoError</span><span style="color:var(--shiki-color-text);">(t, err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">})</span></span></code></pre></div>
<h2 id="try-to-run-the-test-5">Try to run the test<a aria-hidden="true" tabindex="-1" href="#try-to-run-the-test-5" class="internal alias"> §</a></h2>
<pre><code>=== RUN   TestFileSystemStore/works_with_an_empty_file
    --- FAIL: TestFileSystemStore/works_with_an_empty_file (0.00s)
        file_system_store_test.go:108: didn't expect an error but got one, problem loading player store from file /var/folders/nj/r_ccbj5d7flds0sf63yy4vb80000gn/T/db019548018, problem parsing league, EOF
</code></pre>
<h2 id="write-enough-code-to-make-it-pass-5">Write enough code to make it pass<a aria-hidden="true" tabindex="-1" href="#write-enough-code-to-make-it-pass-5" class="internal alias"> §</a></h2>
<p>Change our constructor to the following</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NewFileSystemPlayerStore</span><span style="color:var(--shiki-color-text);">(file </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">os.File) (</span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">FileSystemPlayerStore, </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	file.</span><span style="color:var(--shiki-token-function);">Seek</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	info, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> file.</span><span style="color:var(--shiki-token-function);">Stat</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);">, fmt.</span><span style="color:var(--shiki-token-function);">Errorf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;problem getting file info from file </span><span style="color:var(--shiki-token-constant);">%s</span><span style="color:var(--shiki-token-string-expression);">, </span><span style="color:var(--shiki-token-constant);">%v</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, file.</span><span style="color:var(--shiki-token-function);">Name</span><span style="color:var(--shiki-color-text);">(), err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> info.</span><span style="color:var(--shiki-token-function);">Size</span><span style="color:var(--shiki-color-text);">() </span><span style="color:var(--shiki-token-keyword);">==</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		file.</span><span style="color:var(--shiki-token-function);">Write</span><span style="color:var(--shiki-color-text);">([]</span><span style="color:var(--shiki-token-function);">byte</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;[]&quot;</span><span style="color:var(--shiki-color-text);">))</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		file.</span><span style="color:var(--shiki-token-function);">Seek</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	league, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NewLeague</span><span style="color:var(--shiki-color-text);">(file)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);">, fmt.</span><span style="color:var(--shiki-token-function);">Errorf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;problem loading player store from file </span><span style="color:var(--shiki-token-constant);">%s</span><span style="color:var(--shiki-token-string-expression);">, </span><span style="color:var(--shiki-token-constant);">%v</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, file.</span><span style="color:var(--shiki-token-function);">Name</span><span style="color:var(--shiki-color-text);">(), err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">FileSystemPlayerStore{</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		database: json.</span><span style="color:var(--shiki-token-function);">NewEncoder</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">tape{file}),</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		league:   league,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}, </span><span style="color:var(--shiki-token-constant);">nil</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p><code>file.Stat</code> returns stats on our file, which lets us check the size of the file. If it’s empty, we <code>Write</code> an empty JSON array and <code>Seek</code> back to the start, ready for the rest of the code.</p>
<h2 id="refactor-3">Refactor<a aria-hidden="true" tabindex="-1" href="#refactor-3" class="internal alias"> §</a></h2>
<p>Our constructor is a bit messy now, so let’s extract the initialise code into a function:</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">initialisePlayerDBFile</span><span style="color:var(--shiki-color-text);">(file </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">os.File) </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	file.</span><span style="color:var(--shiki-token-function);">Seek</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	info, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> file.</span><span style="color:var(--shiki-token-function);">Stat</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> fmt.</span><span style="color:var(--shiki-token-function);">Errorf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;problem getting file info from file </span><span style="color:var(--shiki-token-constant);">%s</span><span style="color:var(--shiki-token-string-expression);">, </span><span style="color:var(--shiki-token-constant);">%v</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, file.</span><span style="color:var(--shiki-token-function);">Name</span><span style="color:var(--shiki-color-text);">(), err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> info.</span><span style="color:var(--shiki-token-function);">Size</span><span style="color:var(--shiki-color-text);">() </span><span style="color:var(--shiki-token-keyword);">==</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		file.</span><span style="color:var(--shiki-token-function);">Write</span><span style="color:var(--shiki-color-text);">([]</span><span style="color:var(--shiki-token-function);">byte</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;[]&quot;</span><span style="color:var(--shiki-color-text);">))</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		file.</span><span style="color:var(--shiki-token-function);">Seek</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store.go</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NewFileSystemPlayerStore</span><span style="color:var(--shiki-color-text);">(file </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">os.File) (</span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">FileSystemPlayerStore, </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">initialisePlayerDBFile</span><span style="color:var(--shiki-color-text);">(file)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);">, fmt.</span><span style="color:var(--shiki-token-function);">Errorf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;problem initialising player db file, </span><span style="color:var(--shiki-token-constant);">%v</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	league, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NewLeague</span><span style="color:var(--shiki-color-text);">(file)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);">, fmt.</span><span style="color:var(--shiki-token-function);">Errorf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;problem loading player store from file </span><span style="color:var(--shiki-token-constant);">%s</span><span style="color:var(--shiki-token-string-expression);">, </span><span style="color:var(--shiki-token-constant);">%v</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, file.</span><span style="color:var(--shiki-token-function);">Name</span><span style="color:var(--shiki-color-text);">(), err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">FileSystemPlayerStore{</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		database: json.</span><span style="color:var(--shiki-token-function);">NewEncoder</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">tape{file}),</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		league:   league,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}, </span><span style="color:var(--shiki-token-constant);">nil</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<h2 id="sorting">Sorting<a aria-hidden="true" tabindex="-1" href="#sorting" class="internal alias"> §</a></h2>
<p>Our product owner wants <code>/league</code> to return the players sorted by their scores, from highest to lowest.</p>
<p>The main decision to make here is where in the software should this happen. If we were using a “real” database we would use things like <code>ORDER BY</code> so the sorting is super fast. For that reason, it feels like implementations of <code>PlayerStore</code> should be responsible.</p>
<h2 id="write-the-test-first-6">Write the test first<a aria-hidden="true" tabindex="-1" href="#write-the-test-first-6" class="internal alias"> §</a></h2>
<p>We can update the assertion on our first test in <code>TestFileSystemStore</code>:</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">//file_system_store_test.go</span></span>
<span data-line><span style="color:var(--shiki-color-text);">t.</span><span style="color:var(--shiki-token-function);">Run</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;league sorted&quot;</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	database, cleanDatabase </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">createTempFile</span><span style="color:var(--shiki-color-text);">(t, </span><span style="color:var(--shiki-token-string-expression);">`[</span></span>
<span data-line><span style="color:var(--shiki-token-string-expression);">		{&quot;Name&quot;: &quot;Cleo&quot;, &quot;Wins&quot;: 10},</span></span>
<span data-line><span style="color:var(--shiki-token-string-expression);">		{&quot;Name&quot;: &quot;Chris&quot;, &quot;Wins&quot;: 33}]`</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">defer</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">cleanDatabase</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	store, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NewFileSystemPlayerStore</span><span style="color:var(--shiki-color-text);">(database)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">assertNoError</span><span style="color:var(--shiki-color-text);">(t, err)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	got </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> store.</span><span style="color:var(--shiki-token-function);">GetLeague</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	want </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> League{</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		{</span><span style="color:var(--shiki-token-string-expression);">&quot;Chris&quot;</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-constant);">33</span><span style="color:var(--shiki-color-text);">},</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		{</span><span style="color:var(--shiki-token-string-expression);">&quot;Cleo&quot;</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-constant);">10</span><span style="color:var(--shiki-color-text);">},</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">assertLeague</span><span style="color:var(--shiki-color-text);">(t, got, want)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-comment);">// read again</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	got </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> store.</span><span style="color:var(--shiki-token-function);">GetLeague</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">assertLeague</span><span style="color:var(--shiki-color-text);">(t, got, want)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">})</span></span></code></pre></div>
<p>The order of the JSON coming in is in the wrong order and our <code>want</code> will check that it is returned to the caller in the correct order.</p>
<h2 id="try-to-run-the-test-6">Try to run the test<a aria-hidden="true" tabindex="-1" href="#try-to-run-the-test-6" class="internal alias"> §</a></h2>
<pre><code>=== RUN   TestFileSystemStore/league_from_a_reader,_sorted
    --- FAIL: TestFileSystemStore/league_from_a_reader,_sorted (0.00s)
        file_system_store_test.go:46: got [{Cleo 10} {Chris 33}] want [{Chris 33} {Cleo 10}]
        file_system_store_test.go:51: got [{Cleo 10} {Chris 33}] want [{Chris 33} {Cleo 10}]
</code></pre>
<h2 id="write-enough-code-to-make-it-pass-6">Write enough code to make it pass<a aria-hidden="true" tabindex="-1" href="#write-enough-code-to-make-it-pass-6" class="internal alias"> §</a></h2>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (f </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">FileSystemPlayerStore) </span><span style="color:var(--shiki-token-function);">GetLeague</span><span style="color:var(--shiki-color-text);">() League {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	sort.</span><span style="color:var(--shiki-token-function);">Slice</span><span style="color:var(--shiki-color-text);">(f.league, </span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">(i, j </span><span style="color:var(--shiki-token-keyword);">int</span><span style="color:var(--shiki-color-text);">) </span><span style="color:var(--shiki-token-keyword);">bool</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> f.league[i].Wins </span><span style="color:var(--shiki-token-keyword);">></span><span style="color:var(--shiki-color-text);"> f.league[j].Wins</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	})</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> f.league</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p><a href="https://golang.org/pkg/sort/#Slice" class="external"><code>sort.Slice</code></a></p>
<blockquote>
<p>Slice sorts the provided slice given the provided less function.</p>
</blockquote>
<p>Easy!</p>
<h2 id="wrapping-up">Wrapping up<a aria-hidden="true" tabindex="-1" href="#wrapping-up" class="internal alias"> §</a></h2>
<h3 id="what-weve-covered">What we’ve covered<a aria-hidden="true" tabindex="-1" href="#what-weve-covered" class="internal alias"> §</a></h3>
<ul>
<li>The <code>Seeker</code> interface and its relation to <code>Reader</code> and <code>Writer</code>.</li>
<li>Working with files.</li>
<li>Creating an easy to use helper for testing with files that hides all the messy stuff.</li>
<li><code>sort.Slice</code> for sorting slices.</li>
<li>Using the compiler to help us safely make structural changes to the application.</li>
</ul>
<h3 id="breaking-rules">Breaking rules<a aria-hidden="true" tabindex="-1" href="#breaking-rules" class="internal alias"> §</a></h3>
<ul>
<li>Most rules in software engineering aren’t really rules, just best practices that work 80% of the time.</li>
<li>We discovered a scenario where one of our previous “rules” of not testing internal functions was not helpful for us so we broke the rule.</li>
<li>It’s important when breaking rules to understand the trade-off you are making. In our case, we were ok with it because it was just one test and would’ve been very difficult to exercise the scenario otherwise.</li>
<li>In order to be able to break the rules <strong>you must understand them first</strong>. An analogy is with learning guitar. It doesn’t matter how creative you think you are, you must understand and practice the fundamentals.</li>
</ul>
<h3 id="where-our-software-is-at">Where our software is at<a aria-hidden="true" tabindex="-1" href="#where-our-software-is-at" class="internal alias"> §</a></h3>
<ul>
<li>We have an HTTP API where you can create players and increment their score.</li>
<li>We can return a league of everyone’s scores as JSON.</li>
<li>The data is persisted as a JSON file.</li>
</ul></article></div><div class="right sidebar"><div class="graph "><h3>Graph View</h3><div class="graph-outer"><div id="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[]}"></div><svg version="1.1" id="global-graph-icon" xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xmlSpace="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
	s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
	c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
	C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
	c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
	v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
	s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
	C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
	S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
	s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
	s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></div><div id="global-graph-outer"><div id="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[]}"></div></div></div><div class="toc desktop-only"><button type="button" id="toc" class><h3>Table of Contents</h3><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="toc-content"><ul class="overflow"><li class="depth-0"><a href="#io-and-sorting" data-for="io-and-sorting">IO and sorting</a></li><li class="depth-1"><a href="#the-code-so-far" data-for="the-code-so-far">The code so far</a></li><li class="depth-1"><a href="#store-the-data" data-for="store-the-data">Store the data</a></li><li class="depth-1"><a href="#write-the-test-first" data-for="write-the-test-first">Write the test first</a></li><li class="depth-1"><a href="#try-to-run-the-test" data-for="try-to-run-the-test">Try to run the test</a></li><li class="depth-1"><a href="#write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output" data-for="write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output">Write the minimal amount of code for the test to run and check the failing test output</a></li><li class="depth-1"><a href="#write-enough-code-to-make-it-pass" data-for="write-enough-code-to-make-it-pass">Write enough code to make it pass</a></li><li class="depth-1"><a href="#refactor" data-for="refactor">Refactor</a></li><li class="depth-2"><a href="#seeking-problems" data-for="seeking-problems">Seeking problems</a></li><li class="depth-1"><a href="#write-the-test-first-1" data-for="write-the-test-first-1">Write the test first</a></li><li class="depth-1"><a href="#try-to-run-the-test-1" data-for="try-to-run-the-test-1">Try to run the test</a></li><li class="depth-1"><a href="#write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output-1" data-for="write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output-1">Write the minimal amount of code for the test to run and check the failing test output</a></li><li class="depth-1"><a href="#write-enough-code-to-make-it-pass-1" data-for="write-enough-code-to-make-it-pass-1">Write enough code to make it pass</a></li><li class="depth-1"><a href="#refactor-1" data-for="refactor-1">Refactor</a></li><li class="depth-1"><a href="#write-the-test-first-2" data-for="write-the-test-first-2">Write the test first</a></li><li class="depth-1"><a href="#try-to-run-the-test-2" data-for="try-to-run-the-test-2">Try to run the test</a></li><li class="depth-1"><a href="#write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output-2" data-for="write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output-2">Write the minimal amount of code for the test to run and check the failing test output</a></li><li class="depth-1"><a href="#write-enough-code-to-make-it-pass-2" data-for="write-enough-code-to-make-it-pass-2">Write enough code to make it pass</a></li><li class="depth-1"><a href="#refactor-2" data-for="refactor-2">Refactor</a></li><li class="depth-1"><a href="#write-the-test-first-3" data-for="write-the-test-first-3">Write the test first</a></li><li class="depth-1"><a href="#try-to-run-the-test-3" data-for="try-to-run-the-test-3">Try to run the test</a></li><li class="depth-1"><a href="#write-enough-code-to-make-it-pass-3" data-for="write-enough-code-to-make-it-pass-3">Write enough code to make it pass</a></li><li class="depth-1"><a href="#more-refactoring-and-performance-concerns" data-for="more-refactoring-and-performance-concerns">More refactoring and performance concerns</a></li><li class="depth-2"><a href="#another-problem" data-for="another-problem">Another problem</a></li><li class="depth-1"><a href="#write-the-test-first-4" data-for="write-the-test-first-4">Write the test first</a></li><li class="depth-1"><a href="#try-to-run-the-test-4" data-for="try-to-run-the-test-4">Try to run the test</a></li><li class="depth-1"><a href="#write-enough-code-to-make-it-pass-4" data-for="write-enough-code-to-make-it-pass-4">Write enough code to make it pass</a></li><li class="depth-2"><a href="#one-other-small-refactor" data-for="one-other-small-refactor">One other small refactor</a></li><li class="depth-1"><a href="#didnt-we-just-break-some-rules-there-testing-private-things-no-interfaces" data-for="didnt-we-just-break-some-rules-there-testing-private-things-no-interfaces">Didn't we just break some rules there? Testing private things? No interfaces?</a></li><li class="depth-2"><a href="#on-testing-private-types" data-for="on-testing-private-types">On testing private types</a></li><li class="depth-2"><a href="#interfaces" data-for="interfaces">Interfaces</a></li><li class="depth-1"><a href="#error-handling" data-for="error-handling">Error handling</a></li><li class="depth-1"><a href="#write-the-test-first-5" data-for="write-the-test-first-5">Write the test first</a></li><li class="depth-1"><a href="#try-to-run-the-test-5" data-for="try-to-run-the-test-5">Try to run the test</a></li><li class="depth-1"><a href="#write-enough-code-to-make-it-pass-5" data-for="write-enough-code-to-make-it-pass-5">Write enough code to make it pass</a></li><li class="depth-1"><a href="#refactor-3" data-for="refactor-3">Refactor</a></li><li class="depth-1"><a href="#sorting" data-for="sorting">Sorting</a></li><li class="depth-1"><a href="#write-the-test-first-6" data-for="write-the-test-first-6">Write the test first</a></li><li class="depth-1"><a href="#try-to-run-the-test-6" data-for="try-to-run-the-test-6">Try to run the test</a></li><li class="depth-1"><a href="#write-enough-code-to-make-it-pass-6" data-for="write-enough-code-to-make-it-pass-6">Write enough code to make it pass</a></li><li class="depth-1"><a href="#wrapping-up" data-for="wrapping-up">Wrapping up</a></li><li class="depth-2"><a href="#what-weve-covered" data-for="what-weve-covered">What we've covered</a></li><li class="depth-2"><a href="#breaking-rules" data-for="breaking-rules">Breaking rules</a></li><li class="depth-2"><a href="#where-our-software-is-at" data-for="where-our-software-is-at">Where our software is at</a></li></ul></div></div><div class="backlinks "><h3>Backlinks</h3><ul class="overflow"><li>No backlinks found</li></ul></div></div></div><footer class><hr/><p>Created with <a href="https://quartz.jzhao.xyz/">Quartz v4.1.1</a>, © 2023</p><ul><li><a href="https://github.com/mindulle">GitHub</a></li></ul></footer></div></body><script type="application/javascript">// quartz/components/scripts/quartz/components/scripts/callout.inline.ts
function toggleCallout() {
  const outerBlock = this.parentElement;
  outerBlock.classList.toggle(`is-collapsed`);
  const collapsed = outerBlock.classList.contains(`is-collapsed`);
  const height = collapsed ? this.scrollHeight : outerBlock.scrollHeight;
  outerBlock.style.maxHeight = height + `px`;
  let current = outerBlock;
  let parent = outerBlock.parentElement;
  while (parent) {
    if (!parent.classList.contains(`callout`)) {
      return;
    }
    const collapsed2 = parent.classList.contains(`is-collapsed`);
    const height2 = collapsed2 ? parent.scrollHeight : parent.scrollHeight + current.scrollHeight;
    parent.style.maxHeight = height2 + `px`;
    current = parent;
    parent = parent.parentElement;
  }
}
function setupCallout() {
  const collapsible = document.getElementsByClassName(
    `callout is-collapsible`
  );
  for (const div of collapsible) {
    const title = div.firstElementChild;
    if (title) {
      title.removeEventListener(`click`, toggleCallout);
      title.addEventListener(`click`, toggleCallout);
      const collapsed = div.classList.contains(`is-collapsed`);
      const height = collapsed ? title.scrollHeight : div.scrollHeight;
      div.style.maxHeight = height + `px`;
    }
  }
}
document.addEventListener(`nav`, setupCallout);
window.addEventListener(`resize`, setupCallout);
</script><script type="module">
          import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
          const darkMode = document.documentElement.getAttribute('saved-theme') === 'dark'
          mermaid.initialize({
            startOnLoad: false,
            securityLevel: 'loose',
            theme: darkMode ? 'dark' : 'default'
          });
          document.addEventListener('nav', async () => {
            await mermaid.run({
              querySelector: '.mermaid'
            })
          });
          </script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/copy-tex.min.js" type="application/javascript"></script><script type="application/javascript">
          const socket = new WebSocket('ws://localhost:3001')
          socket.addEventListener('message', () => document.location.reload())
        </script><script src="../../../../postscript.js" type="module"></script></html>