<!DOCTYPE html>
<html><head><title>scaling-acceptance-tests</title><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:title" content="scaling-acceptance-tests"/><meta property="og:description" content="Learn Go with Tests - Scaling Acceptance Tests (and light intro to gRPC) § This chapter is a follow-up to Intro to acceptance tests. You can find the finished code for this chapter on GitHub."/><meta property="og:image" content="https://mindulle.github.io/garden/static/og-image.png"/><meta property="og:width" content="1200"/><meta property="og:height" content="675"/><link rel="icon" href="../../../../static/icon.png"/><meta name="description" content="Learn Go with Tests - Scaling Acceptance Tests (and light intro to gRPC) § This chapter is a follow-up to Intro to acceptance tests. You can find the finished code for this chapter on GitHub."/><meta name="generator" content="Quartz"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link href="../../../../index.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://fonts.googleapis.com/css2?family=IBM Plex Mono&amp;family=Schibsted Grotesk:wght@400;700&amp;family=Source Sans Pro:ital,wght@0,400;0,600;1,400;1,600&amp;display=swap" rel="stylesheet" type="text/css" spa-preserve/><script src="../../../../prescript.js" type="application/javascript" spa-preserve></script><script type="application/javascript" spa-preserve>const fetchData = fetch(`../../../../static/contentIndex.json`).then(data => data.json())</script></head><body data-slug="flower/testing/go/testing_fundamentals/scaling-acceptance-tests"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h1 class="page-title "><a href="../../../..">Mindulle Garden</a></h1><div class="spacer mobile-only"></div><div class="search "><div id="search-icon"><p>Search</p><div></div><svg tabIndex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search</title><desc id="desc">Search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg></div><div id="search-container"><div id="search-space"><input autocomplete="off" id="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div id="results-container"></div></div></div></div><div class="darkmode "><input class="toggle" id="darkmode-toggle" type="checkbox" tabIndex="-1"/><label id="toggle-label-light" for="darkmode-toggle" tabIndex="-1"><svg xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" version="1.1" id="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35;" xmlSpace="preserve"><title>Light mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg></label><label id="toggle-label-dark" for="darkmode-toggle" tabIndex="-1"><svg xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" version="1.1" id="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'" xmlSpace="preserve"><title>Dark mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></label></div><div class="explorer desktop-only"><button type="button" id="explorer" data-behavior="collapse" data-collapsed="collapsed" data-savestate="true" data-tree="[{&quot;path&quot;:&quot;core&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/fundamental&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/fundamental/design&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/law&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/law/computing&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/law/dev&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/law/management&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/law/ux&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/paradigm&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/paradigm/FP&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/principle&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/principle/computing&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/principle/dev&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/principle/management&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/principle/ux&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/smells&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/smells/bloaters&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/smells/change-preventers&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/smells/couplers&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/smells/dispensables&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/smells/oo-abusers&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/smells/other&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/techniques&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/techniques/composing-methods&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/techniques/dealing-with-generalization&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/techniques/moving-features-between-objects&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/techniques/organizing-data&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/techniques/simplifying-conditional-expressions&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/techniques/simplifying-method-calls&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/what-is-refactoring&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/automation&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/go&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/go/anti_patterns&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/go/build_an_application&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/go/fundamentals&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/go/testing_fundamentals&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/go/tips&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/javascript&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/javascript/0 The Golden Rule&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/javascript/1 The Test Anatomy&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/javascript/2 Backend&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/javascript/3 Frontend&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/javascript/4 Measuring Tests Effectiveness&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/javascript/5 Continuous Integration&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/javascript/assets&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/Design Patterns&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/Design Patterns/catalog&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/Design Patterns/catalog/behavioral&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/Design Patterns/catalog/creational&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/Design Patterns/catalog/structural&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/Design Patterns/intro&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/Design Patterns/react&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/Design Patterns/vanilla&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/rendering&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/rendering/react&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/rendering/vanilla&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/go&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/go/anti_patterns&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/go/build_an_application&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/go/fundamentals&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/go/testing_fundamentals&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/go/tips&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/javascript&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/javascript/0 The Golden Rule&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/javascript/1 The Test Anatomy&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/javascript/2 Backend&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/javascript/3 Frontend&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/javascript/4 Measuring Tests Effectiveness&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/javascript/5 Continuous Integration&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/javascript/assets&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/bizSys&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/bizSys/externalView&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/bizSys/internalView&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/ITSys&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/ITSys/behavioralView&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/ITSys/externalView&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/ITSys/externalView/the-elements-of-view&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/ITSys/interactionView&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/ITSys/structuralView&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/prepIntegr&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/prepIntegr/processView&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/prepIntegr/staticView&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;seed&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;seed/computing&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;seed/software development&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;seed/Unix&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;tree&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;tree/Product Design&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;tree/Product Design/Design&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;tree/Software Development&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;tree/Software Development/Architecture&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;tree/Software Development/Project Layout&quot;,&quot;collapsed&quot;:true}]"><h1>Explorer</h1><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="explorer-content"><ul class="overflow" id="explorer-ul"><li><div><div class="folder-outer open"><ul style="padding-left:0;" class="content" data-folderul><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core"><button class="folder-button"><p class="folder-title">core</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge"><button class="folder-button"><p class="folder-title">background-knowledge</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/fundamental"><button class="folder-button"><p class="folder-title">fundamental</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/fundamental"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/fundamental/design"><button class="folder-button"><p class="folder-title">design</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/fundamental/design"><li><li><a href="../../../../core/background-knowledge/fundamental/design/BASIS_01_laws" data-for="core/background-knowledge/fundamental/design/BASIS_01_laws">BASIS_01_laws</a></li></li><li><li><a href="../../../../core/background-knowledge/fundamental/design/BASIS_02_process" data-for="core/background-knowledge/fundamental/design/BASIS_02_process">BASIS_02_process</a></li></li><li><li><a href="../../../../core/background-knowledge/fundamental/design/BASIS_02_process-gist" data-for="core/background-knowledge/fundamental/design/BASIS_02_process-gist">BASIS_02_process-gist</a></li></li><li><li><a href="../../../../core/background-knowledge/fundamental/design/BASIS_03_information_architecture" data-for="core/background-knowledge/fundamental/design/BASIS_03_information_architecture">BASIS_03_information_architecture</a></li></li><li><li><a href="../../../../core/background-knowledge/fundamental/design/LAYOUT_01_artboard_and_margin" data-for="core/background-knowledge/fundamental/design/LAYOUT_01_artboard_and_margin">LAYOUT_01_artboard_and_margin</a></li></li><li><li><a href="../../../../core/background-knowledge/fundamental/design/LAYOUT_02_grid_basis" data-for="core/background-knowledge/fundamental/design/LAYOUT_02_grid_basis">LAYOUT_02_grid_basis</a></li></li><li><li><a href="../../../../core/background-knowledge/fundamental/design/LAYOUT_03_set_grid_layout" data-for="core/background-knowledge/fundamental/design/LAYOUT_03_set_grid_layout">LAYOUT_03_set_grid_layout</a></li></li><li><li><a href="../../../../core/background-knowledge/fundamental/design/LAYOUT_04_grouping" data-for="core/background-knowledge/fundamental/design/LAYOUT_04_grouping">LAYOUT_04_grouping</a></li></li><li><li><a href="../../../../core/background-knowledge/fundamental/design/LAYOUT_05_sorting" data-for="core/background-knowledge/fundamental/design/LAYOUT_05_sorting">LAYOUT_05_sorting</a></li></li><li><li><a href="../../../../core/background-knowledge/fundamental/design/LAYOUT_06_contrast" data-for="core/background-knowledge/fundamental/design/LAYOUT_06_contrast">LAYOUT_06_contrast</a></li></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/law"><button class="folder-button"><p class="folder-title">law</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/law"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/law/computing"><button class="folder-button"><p class="folder-title">computing</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/law/computing"><li><li><a href="../../../../core/background-knowledge/law/computing/Amdahls-Law" data-for="core/background-knowledge/law/computing/Amdahls-Law">Amdahls-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/computing/Galls-Law" data-for="core/background-knowledge/law/computing/Galls-Law">Galls-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/computing/Metcalfes-Law" data-for="core/background-knowledge/law/computing/Metcalfes-Law">Metcalfes-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/computing/Moores-Law" data-for="core/background-knowledge/law/computing/Moores-Law">Moores-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/computing/Reeds-Law" data-for="core/background-knowledge/law/computing/Reeds-Law">Reeds-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/computing/The-Law-of-Conservation-of-Complexity-Teslers-Law" data-for="core/background-knowledge/law/computing/The-Law-of-Conservation-of-Complexity-Teslers-Law">The-Law-of-Conservation-of-Complexity-Teslers-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/computing/The-Law-of-Leaky-Abstractions" data-for="core/background-knowledge/law/computing/The-Law-of-Leaky-Abstractions">The-Law-of-Leaky-Abstractions</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/law/dev"><button class="folder-button"><p class="folder-title">dev</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/law/dev"><li><li><a href="../../../../core/background-knowledge/law/dev/Brooks-Law" data-for="core/background-knowledge/law/dev/Brooks-Law">Brooks-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/dev/Conways-Law" data-for="core/background-knowledge/law/dev/Conways-Law">Conways-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/dev/Cunninghams-Law" data-for="core/background-knowledge/law/dev/Cunninghams-Law">Cunninghams-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/dev/Hutbers-Law" data-for="core/background-knowledge/law/dev/Hutbers-Law">Hutbers-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/dev/Hyrums-Law-The-Law-of-Implicit-Interfaces" data-for="core/background-knowledge/law/dev/Hyrums-Law-The-Law-of-Implicit-Interfaces">Hyrums-Law-The-Law-of-Implicit-Interfaces</a></li></li><li><li><a href="../../../../core/background-knowledge/law/dev/Kernighans-Law" data-for="core/background-knowledge/law/dev/Kernighans-Law">Kernighans-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/dev/The-Law-of-Triviality" data-for="core/background-knowledge/law/dev/The-Law-of-Triviality">The-Law-of-Triviality</a></li></li><li><li><a href="../../../../core/background-knowledge/law/dev/Wadlers-Law" data-for="core/background-knowledge/law/dev/Wadlers-Law">Wadlers-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/dev/Wheatons-Law" data-for="core/background-knowledge/law/dev/Wheatons-Law">Wheatons-Law</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/law/management"><button class="folder-button"><p class="folder-title">management</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/law/management"><li><li><a href="../../../../core/background-knowledge/law/management/Goodharts-Law" data-for="core/background-knowledge/law/management/Goodharts-Law">Goodharts-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/management/Hofstadters-Law" data-for="core/background-knowledge/law/management/Hofstadters-Law">Hofstadters-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/management/Parkinsons-Law" data-for="core/background-knowledge/law/management/Parkinsons-Law">Parkinsons-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/management/Putts-Law" data-for="core/background-knowledge/law/management/Putts-Law">Putts-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/management/The-Hype-Cycle--Amaras-Law" data-for="core/background-knowledge/law/management/The-Hype-Cycle--Amaras-Law">The-Hype-Cycle--Amaras-Law</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/law/ux"><button class="folder-button"><p class="folder-title">ux</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/law/ux"><li><li><a href="../../../../core/background-knowledge/law/ux/[cognitiveBias]Peak-End_Rule" data-for="core/background-knowledge/law/ux/[cognitiveBias]Peak-End_Rule">[cognitiveBias]Peak-End_Rule</a></li></li><li><li><a href="../../../../core/background-knowledge/law/ux/[cognitiveBias]Serial_Position_Effect" data-for="core/background-knowledge/law/ux/[cognitiveBias]Serial_Position_Effect">[cognitiveBias]Serial_Position_Effect</a></li></li><li><li><a href="../../../../core/background-knowledge/law/ux/[cognitiveBias]Von_Restorff_Effect" data-for="core/background-knowledge/law/ux/[cognitiveBias]Von_Restorff_Effect">[cognitiveBias]Von_Restorff_Effect</a></li></li><li><li><a href="../../../../core/background-knowledge/law/ux/[cognitiveBias]Zeigarnik_Effect" data-for="core/background-knowledge/law/ux/[cognitiveBias]Zeigarnik_Effect">[cognitiveBias]Zeigarnik_Effect</a></li></li><li><li><a href="../../../../core/background-knowledge/law/ux/[gestalt]Law_of_Common_Region" data-for="core/background-knowledge/law/ux/[gestalt]Law_of_Common_Region">[gestalt]Law_of_Common_Region</a></li></li><li><li><a href="../../../../core/background-knowledge/law/ux/[gestalt]Law_of_Prägnanz" data-for="core/background-knowledge/law/ux/[gestalt]Law_of_Prägnanz">[gestalt]Law_of_Prägnanz</a></li></li><li><li><a href="../../../../core/background-knowledge/law/ux/[gestalt]Law_of_Proximity" data-for="core/background-knowledge/law/ux/[gestalt]Law_of_Proximity">[gestalt]Law_of_Proximity</a></li></li><li><li><a href="../../../../core/background-knowledge/law/ux/[gestalt]Law_of_Similarity" data-for="core/background-knowledge/law/ux/[gestalt]Law_of_Similarity">[gestalt]Law_of_Similarity</a></li></li><li><li><a href="../../../../core/background-knowledge/law/ux/[gestalt]Law_of_Uniform_Connectedness" data-for="core/background-knowledge/law/ux/[gestalt]Law_of_Uniform_Connectedness">[gestalt]Law_of_Uniform_Connectedness</a></li></li><li><li><a href="../../../../core/background-knowledge/law/ux/[heuristic]Aesthetic-Usability_Effect" data-for="core/background-knowledge/law/ux/[heuristic]Aesthetic-Usability_Effect">[heuristic]Aesthetic-Usability_Effect</a></li></li><li><li><a href="../../../../core/background-knowledge/law/ux/[heuristic]Fitts’s_Law" data-for="core/background-knowledge/law/ux/[heuristic]Fitts’s_Law">[heuristic]Fitts’s_Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/ux/[heuristic]Goal-Gradient_Effect" data-for="core/background-knowledge/law/ux/[heuristic]Goal-Gradient_Effect">[heuristic]Goal-Gradient_Effect</a></li></li><li><li><a href="../../../../core/background-knowledge/law/ux/[heuristic]Hick’s_Law" data-for="core/background-knowledge/law/ux/[heuristic]Hick’s_Law">[heuristic]Hick’s_Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/ux/[heuristic]Jakob’s_Law" data-for="core/background-knowledge/law/ux/[heuristic]Jakob’s_Law">[heuristic]Jakob’s_Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/ux/[heuristic]Miller’s_Law" data-for="core/background-knowledge/law/ux/[heuristic]Miller’s_Law">[heuristic]Miller’s_Law</a></li></li><li><li><a href="../../../../core/background-knowledge/law/ux/[heuristic]Parkinson’s_Law" data-for="core/background-knowledge/law/ux/[heuristic]Parkinson’s_Law">[heuristic]Parkinson’s_Law</a></li></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/paradigm"><button class="folder-button"><p class="folder-title">paradigm</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/paradigm"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/paradigm/FP"><button class="folder-button"><p class="folder-title">FP</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/paradigm/FP"><li><li><a href="../../../../core/background-knowledge/paradigm/FP/ApendixA_Essential_Functions_Support" data-for="core/background-knowledge/paradigm/FP/ApendixA_Essential_Functions_Support">ApendixA_Essential_Functions_Support</a></li></li><li><li><a href="../../../../core/background-knowledge/paradigm/FP/ApendixB_Algebraic_Structures_Support" data-for="core/background-knowledge/paradigm/FP/ApendixB_Algebraic_Structures_Support">ApendixB_Algebraic_Structures_Support</a></li></li><li><li><a href="../../../../core/background-knowledge/paradigm/FP/ApendixC_Pointfree_Utilities" data-for="core/background-knowledge/paradigm/FP/ApendixC_Pointfree_Utilities">ApendixC_Pointfree_Utilities</a></li></li><li><li><a href="../../../../core/background-knowledge/paradigm/FP/CH_01_What_Ever_Are_We_Doing" data-for="core/background-knowledge/paradigm/FP/CH_01_What_Ever_Are_We_Doing">CH_01_What_Ever_Are_We_Doing</a></li></li><li><li><a href="../../../../core/background-knowledge/paradigm/FP/CH_02_First_Class_Functions" data-for="core/background-knowledge/paradigm/FP/CH_02_First_Class_Functions">CH_02_First_Class_Functions</a></li></li><li><li><a href="../../../../core/background-knowledge/paradigm/FP/CH_03_Pure_Happiness_with_Pure_Functions" data-for="core/background-knowledge/paradigm/FP/CH_03_Pure_Happiness_with_Pure_Functions">CH_03_Pure_Happiness_with_Pure_Functions</a></li></li><li><li><a href="../../../../core/background-knowledge/paradigm/FP/CH_04_Currying" data-for="core/background-knowledge/paradigm/FP/CH_04_Currying">CH_04_Currying</a></li></li><li><li><a href="../../../../core/background-knowledge/paradigm/FP/CH_05_Coding_by_Composing" data-for="core/background-knowledge/paradigm/FP/CH_05_Coding_by_Composing">CH_05_Coding_by_Composing</a></li></li><li><li><a href="../../../../core/background-knowledge/paradigm/FP/CH_06_Example_Application" data-for="core/background-knowledge/paradigm/FP/CH_06_Example_Application">CH_06_Example_Application</a></li></li><li><li><a href="../../../../core/background-knowledge/paradigm/FP/CH_07_Hindley-Milner_and_Me" data-for="core/background-knowledge/paradigm/FP/CH_07_Hindley-Milner_and_Me">CH_07_Hindley-Milner_and_Me</a></li></li><li><li><a href="../../../../core/background-knowledge/paradigm/FP/CH_08_Tupperware" data-for="core/background-knowledge/paradigm/FP/CH_08_Tupperware">CH_08_Tupperware</a></li></li><li><li><a href="../../../../core/background-knowledge/paradigm/FP/CH_09_Monadic_Onions" data-for="core/background-knowledge/paradigm/FP/CH_09_Monadic_Onions">CH_09_Monadic_Onions</a></li></li><li><li><a href="../../../../core/background-knowledge/paradigm/FP/CH_10_Applicative_Functors" data-for="core/background-knowledge/paradigm/FP/CH_10_Applicative_Functors">CH_10_Applicative_Functors</a></li></li><li><li><a href="../../../../core/background-knowledge/paradigm/FP/CH_11_Transform_Again,_Naturally" data-for="core/background-knowledge/paradigm/FP/CH_11_Transform_Again,_Naturally">CH_11_Transform_Again,_Naturally</a></li></li><li><li><a href="../../../../core/background-knowledge/paradigm/FP/CH_12_Traversing_the_Stone" data-for="core/background-knowledge/paradigm/FP/CH_12_Traversing_the_Stone">CH_12_Traversing_the_Stone</a></li></li><li><li><a href="../../../../core/background-knowledge/paradigm/FP/CH_13_Monoids_bring_it_all_together" data-for="core/background-knowledge/paradigm/FP/CH_13_Monoids_bring_it_all_together">CH_13_Monoids_bring_it_all_together</a></li></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/principle"><button class="folder-button"><p class="folder-title">principle</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/principle"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/principle/computing"><button class="folder-button"><p class="folder-title">computing</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/principle/computing"><li><li><a href="../../../../core/background-knowledge/principle/computing/The-Fallacies-of-Distributed-Computing" data-for="core/background-knowledge/principle/computing/The-Fallacies-of-Distributed-Computing">The-Fallacies-of-Distributed-Computing</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/computing/The-Spotify-Model" data-for="core/background-knowledge/principle/computing/The-Spotify-Model">The-Spotify-Model</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/computing/The-Unix-Philosophy" data-for="core/background-knowledge/principle/computing/The-Unix-Philosophy">The-Unix-Philosophy</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/principle/dev"><button class="folder-button"><p class="folder-title">dev</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/principle/dev"><li><li><a href="../../../../core/background-knowledge/principle/dev/Premature-Optimization-Effect" data-for="core/background-knowledge/principle/dev/Premature-Optimization-Effect">Premature-Optimization-Effect</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/dev/SOLID" data-for="core/background-knowledge/principle/dev/SOLID">SOLID</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/dev/The-Dependency-Inversion-Principle" data-for="core/background-knowledge/principle/dev/The-Dependency-Inversion-Principle">The-Dependency-Inversion-Principle</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/dev/The-DRY-Principle" data-for="core/background-knowledge/principle/dev/The-DRY-Principle">The-DRY-Principle</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/dev/The-Interface-Segregation-Principle" data-for="core/background-knowledge/principle/dev/The-Interface-Segregation-Principle">The-Interface-Segregation-Principle</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/dev/The-KISS-principle" data-for="core/background-knowledge/principle/dev/The-KISS-principle">The-KISS-principle</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/dev/The-Liskov-Substitution-Principle" data-for="core/background-knowledge/principle/dev/The-Liskov-Substitution-Principle">The-Liskov-Substitution-Principle</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/dev/The-OpenClosed-Principle" data-for="core/background-knowledge/principle/dev/The-OpenClosed-Principle">The-OpenClosed-Principle</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/dev/The-Robustness-Principle-Postels-Law" data-for="core/background-knowledge/principle/dev/The-Robustness-Principle-Postels-Law">The-Robustness-Principle-Postels-Law</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/dev/The-Single-Responsibility-Principle" data-for="core/background-knowledge/principle/dev/The-Single-Responsibility-Principle">The-Single-Responsibility-Principle</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/dev/YAGNI" data-for="core/background-knowledge/principle/dev/YAGNI">YAGNI</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/principle/management"><button class="folder-button"><p class="folder-title">management</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/principle/management"><li><li><a href="../../../../core/background-knowledge/principle/management/Occams-Razor" data-for="core/background-knowledge/principle/management/Occams-Razor">Occams-Razor</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/management/The-Dilbert-Principle" data-for="core/background-knowledge/principle/management/The-Dilbert-Principle">The-Dilbert-Principle</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/management/The-Pareto-Principle-The-8020-Rule" data-for="core/background-knowledge/principle/management/The-Pareto-Principle-The-8020-Rule">The-Pareto-Principle-The-8020-Rule</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/management/The-Peter-Principle" data-for="core/background-knowledge/principle/management/The-Peter-Principle">The-Peter-Principle</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/principle/ux"><button class="folder-button"><p class="folder-title">ux</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/principle/ux"><li><li><a href="../../../../core/background-knowledge/principle/ux/Doherty_Threshold" data-for="core/background-knowledge/principle/ux/Doherty_Threshold">Doherty_Threshold</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/ux/Occam’s_Razor" data-for="core/background-knowledge/principle/ux/Occam’s_Razor">Occam’s_Razor</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/ux/Pareto_Principle" data-for="core/background-knowledge/principle/ux/Pareto_Principle">Pareto_Principle</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/ux/Postel’s_Law" data-for="core/background-knowledge/principle/ux/Postel’s_Law">Postel’s_Law</a></li></li><li><li><a href="../../../../core/background-knowledge/principle/ux/Tesler’s_Law" data-for="core/background-knowledge/principle/ux/Tesler’s_Law">Tesler’s_Law</a></li></li></ul></div></div></li></ul></div></div></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower"><button class="folder-button"><p class="folder-title">flower</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring"><button class="folder-button"><p class="folder-title">refactoring</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/smells"><button class="folder-button"><p class="folder-title">smells</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/smells"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/smells/bloaters"><button class="folder-button"><p class="folder-title">bloaters</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/smells/bloaters"><li><li><a href="../../../../flower/refactoring/smells/bloaters/data-clumps" data-for="flower/refactoring/smells/bloaters/data-clumps">Data Clumps</a></li></li><li><li><a href="../../../../flower/refactoring/smells/bloaters/large-class" data-for="flower/refactoring/smells/bloaters/large-class">Large Class</a></li></li><li><li><a href="../../../../flower/refactoring/smells/bloaters/long-method" data-for="flower/refactoring/smells/bloaters/long-method">Long Method</a></li></li><li><li><a href="../../../../flower/refactoring/smells/bloaters/long-parameter-list" data-for="flower/refactoring/smells/bloaters/long-parameter-list">Long Parameter List</a></li></li><li><li><a href="../../../../flower/refactoring/smells/bloaters/primitive-obsession" data-for="flower/refactoring/smells/bloaters/primitive-obsession">Primitive Obsession</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/smells/change-preventers"><button class="folder-button"><p class="folder-title">change-preventers</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/smells/change-preventers"><li><li><a href="../../../../flower/refactoring/smells/change-preventers/divergent-change" data-for="flower/refactoring/smells/change-preventers/divergent-change">Divergent Change</a></li></li><li><li><a href="../../../../flower/refactoring/smells/change-preventers/parallel-inheritance-hierarchies" data-for="flower/refactoring/smells/change-preventers/parallel-inheritance-hierarchies">Parallel Inheritance Hierarchies</a></li></li><li><li><a href="../../../../flower/refactoring/smells/change-preventers/shotgun-surgery" data-for="flower/refactoring/smells/change-preventers/shotgun-surgery">Shotgun Surgery</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/smells/couplers"><button class="folder-button"><p class="folder-title">couplers</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/smells/couplers"><li><li><a href="../../../../flower/refactoring/smells/couplers/feature-envy" data-for="flower/refactoring/smells/couplers/feature-envy">Feature Envy</a></li></li><li><li><a href="../../../../flower/refactoring/smells/couplers/inappropriate-intimacy" data-for="flower/refactoring/smells/couplers/inappropriate-intimacy">Inappropriate Intimacy</a></li></li><li><li><a href="../../../../flower/refactoring/smells/couplers/message-chains" data-for="flower/refactoring/smells/couplers/message-chains">Message Chains</a></li></li><li><li><a href="../../../../flower/refactoring/smells/couplers/middle-man" data-for="flower/refactoring/smells/couplers/middle-man">Middle Man</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/smells/dispensables"><button class="folder-button"><p class="folder-title">dispensables</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/smells/dispensables"><li><li><a href="../../../../flower/refactoring/smells/dispensables/comments" data-for="flower/refactoring/smells/dispensables/comments">Comments</a></li></li><li><li><a href="../../../../flower/refactoring/smells/dispensables/data-class" data-for="flower/refactoring/smells/dispensables/data-class">Data Class</a></li></li><li><li><a href="../../../../flower/refactoring/smells/dispensables/dead-code" data-for="flower/refactoring/smells/dispensables/dead-code">Dead Code</a></li></li><li><li><a href="../../../../flower/refactoring/smells/dispensables/duplicate-code" data-for="flower/refactoring/smells/dispensables/duplicate-code">Duplicate Code</a></li></li><li><li><a href="../../../../flower/refactoring/smells/dispensables/lazy-class" data-for="flower/refactoring/smells/dispensables/lazy-class">Lazy Class</a></li></li><li><li><a href="../../../../flower/refactoring/smells/dispensables/speculative-generality" data-for="flower/refactoring/smells/dispensables/speculative-generality">Speculative Generality</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/smells/oo-abusers"><button class="folder-button"><p class="folder-title">oo-abusers</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/smells/oo-abusers"><li><li><a href="../../../../flower/refactoring/smells/oo-abusers/alternative-classes-with-different-interfaces" data-for="flower/refactoring/smells/oo-abusers/alternative-classes-with-different-interfaces">Alternative Classes with Different Interfaces</a></li></li><li><li><a href="../../../../flower/refactoring/smells/oo-abusers/refused-bequest" data-for="flower/refactoring/smells/oo-abusers/refused-bequest">Refused Bequest</a></li></li><li><li><a href="../../../../flower/refactoring/smells/oo-abusers/switch-statements" data-for="flower/refactoring/smells/oo-abusers/switch-statements">Switch Statements</a></li></li><li><li><a href="../../../../flower/refactoring/smells/oo-abusers/temporary-field" data-for="flower/refactoring/smells/oo-abusers/temporary-field">Temporary Field</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/smells/other"><button class="folder-button"><p class="folder-title">other</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/smells/other"><li><li><a href="../../../../flower/refactoring/smells/other/incomplete-library-class" data-for="flower/refactoring/smells/other/incomplete-library-class">Incomplete Library Class</a></li></li></ul></div></div></li><li><li><a href="../../../../flower/refactoring/smells/bloaters" data-for="flower/refactoring/smells/bloaters">Bloaters</a></li></li><li><li><a href="../../../../flower/refactoring/smells/change-preventers" data-for="flower/refactoring/smells/change-preventers">Change Preventers</a></li></li><li><li><a href="../../../../flower/refactoring/smells/couplers" data-for="flower/refactoring/smells/couplers">Couplers</a></li></li><li><li><a href="../../../../flower/refactoring/smells/dispensables" data-for="flower/refactoring/smells/dispensables">Dispensables</a></li></li><li><li><a href="../../../../flower/refactoring/smells/oo-abusers" data-for="flower/refactoring/smells/oo-abusers">Object-Orientation Abusers</a></li></li><li><li><a href="../../../../flower/refactoring/smells/other" data-for="flower/refactoring/smells/other">Other Smells</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/techniques"><button class="folder-button"><p class="folder-title">techniques</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/techniques"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/techniques/composing-methods"><button class="folder-button"><p class="folder-title">composing-methods</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/techniques/composing-methods"><li><li><a href="../../../../flower/refactoring/techniques/composing-methods/extract-method" data-for="flower/refactoring/techniques/composing-methods/extract-method">Extract Method</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/composing-methods/extract-variable" data-for="flower/refactoring/techniques/composing-methods/extract-variable">Extract Variable</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/composing-methods/inline-method" data-for="flower/refactoring/techniques/composing-methods/inline-method">Inline Method</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/composing-methods/inline-temp" data-for="flower/refactoring/techniques/composing-methods/inline-temp">Inline Temp</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/composing-methods/remove-assignments-to-parameters" data-for="flower/refactoring/techniques/composing-methods/remove-assignments-to-parameters">Remove Assignments to Parameters</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/composing-methods/replace-method-with-method-object" data-for="flower/refactoring/techniques/composing-methods/replace-method-with-method-object">Replace Method with Method Object</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/composing-methods/replace-temp-with-query" data-for="flower/refactoring/techniques/composing-methods/replace-temp-with-query">Replace Temp with Query</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/composing-methods/split-temporary-variable" data-for="flower/refactoring/techniques/composing-methods/split-temporary-variable">Split Temporary Variable</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/composing-methods/substitute-algorithm" data-for="flower/refactoring/techniques/composing-methods/substitute-algorithm">Substitute Algorithm</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/techniques/dealing-with-generalization"><button class="folder-button"><p class="folder-title">dealing-with-generalization</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/techniques/dealing-with-generalization"><li><li><a href="../../../../flower/refactoring/techniques/dealing-with-generalization/collapse-hierarchy" data-for="flower/refactoring/techniques/dealing-with-generalization/collapse-hierarchy">Collapse Hierarchy</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/dealing-with-generalization/extract-interface" data-for="flower/refactoring/techniques/dealing-with-generalization/extract-interface">Extract Interface</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/dealing-with-generalization/extract-subclass" data-for="flower/refactoring/techniques/dealing-with-generalization/extract-subclass">Extract Subclass</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/dealing-with-generalization/extract-superclass" data-for="flower/refactoring/techniques/dealing-with-generalization/extract-superclass">Extract Superclass</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/dealing-with-generalization/form-template-method" data-for="flower/refactoring/techniques/dealing-with-generalization/form-template-method">Form Template Method</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/dealing-with-generalization/pull-up-constructor-body" data-for="flower/refactoring/techniques/dealing-with-generalization/pull-up-constructor-body">Pull Up Constructor Body</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/dealing-with-generalization/pull-up-field" data-for="flower/refactoring/techniques/dealing-with-generalization/pull-up-field">Pull Up Field</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/dealing-with-generalization/pull-up-method" data-for="flower/refactoring/techniques/dealing-with-generalization/pull-up-method">Pull Up Method</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/dealing-with-generalization/push-down-field" data-for="flower/refactoring/techniques/dealing-with-generalization/push-down-field">Push Down Field</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/dealing-with-generalization/push-down-method" data-for="flower/refactoring/techniques/dealing-with-generalization/push-down-method">Push Down Method</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/dealing-with-generalization/replace-delegation-with-inheritance" data-for="flower/refactoring/techniques/dealing-with-generalization/replace-delegation-with-inheritance">Replace Delegation with Inheritance</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/dealing-with-generalization/replace-inheritance-with-delegation" data-for="flower/refactoring/techniques/dealing-with-generalization/replace-inheritance-with-delegation">Replace Inheritance with Delegation</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/techniques/moving-features-between-objects"><button class="folder-button"><p class="folder-title">moving-features-between-objects</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/techniques/moving-features-between-objects"><li><li><a href="../../../../flower/refactoring/techniques/moving-features-between-objects/extract-class" data-for="flower/refactoring/techniques/moving-features-between-objects/extract-class">Extract Class</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/moving-features-between-objects/hide-delegate" data-for="flower/refactoring/techniques/moving-features-between-objects/hide-delegate">Hide Delegate</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/moving-features-between-objects/inline-class" data-for="flower/refactoring/techniques/moving-features-between-objects/inline-class">Inline Class</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/moving-features-between-objects/introduce-foreign-method" data-for="flower/refactoring/techniques/moving-features-between-objects/introduce-foreign-method">Introduce Foreign Method</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/moving-features-between-objects/introduce-local-extension" data-for="flower/refactoring/techniques/moving-features-between-objects/introduce-local-extension">Introduce Local Extension</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/moving-features-between-objects/move-field" data-for="flower/refactoring/techniques/moving-features-between-objects/move-field">Move Field</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/moving-features-between-objects/move-method" data-for="flower/refactoring/techniques/moving-features-between-objects/move-method">Move Method</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/moving-features-between-objects/remove-middle-man" data-for="flower/refactoring/techniques/moving-features-between-objects/remove-middle-man">Remove Middle Man</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/techniques/organizing-data"><button class="folder-button"><p class="folder-title">organizing-data</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/techniques/organizing-data"><li><li><a href="../../../../flower/refactoring/techniques/organizing-data/change-bidirectional-association-to-unidirectional" data-for="flower/refactoring/techniques/organizing-data/change-bidirectional-association-to-unidirectional">Change Bidirectional Association to Unidirectional</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/organizing-data/change-reference-to-value" data-for="flower/refactoring/techniques/organizing-data/change-reference-to-value">Change Reference to Value</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/organizing-data/change-unidirectional-association-to-bidirectional" data-for="flower/refactoring/techniques/organizing-data/change-unidirectional-association-to-bidirectional">Change Unidirectional Association to Bidirectional</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/organizing-data/change-value-to-reference" data-for="flower/refactoring/techniques/organizing-data/change-value-to-reference">Change Value to Reference</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/organizing-data/duplicate-observed-data" data-for="flower/refactoring/techniques/organizing-data/duplicate-observed-data">Duplicate Observed Data</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/organizing-data/encapsulate-collection" data-for="flower/refactoring/techniques/organizing-data/encapsulate-collection">Encapsulate Collection</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/organizing-data/encapsulate-field" data-for="flower/refactoring/techniques/organizing-data/encapsulate-field">Encapsulate Field</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/organizing-data/replace-array-with-object" data-for="flower/refactoring/techniques/organizing-data/replace-array-with-object">Replace Array with Object</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/organizing-data/replace-data-value-with-object" data-for="flower/refactoring/techniques/organizing-data/replace-data-value-with-object">Replace Data Value with Object</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/organizing-data/replace-magic-number-with-symbolic-constant" data-for="flower/refactoring/techniques/organizing-data/replace-magic-number-with-symbolic-constant">Replace Magic Number with Symbolic Constant</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/organizing-data/replace-subclass-with-fields" data-for="flower/refactoring/techniques/organizing-data/replace-subclass-with-fields">Replace Subclass with Fields</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/organizing-data/replace-type-code-with-class" data-for="flower/refactoring/techniques/organizing-data/replace-type-code-with-class">Replace Type Code with Class</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/organizing-data/replace-type-code-with-state-strategy" data-for="flower/refactoring/techniques/organizing-data/replace-type-code-with-state-strategy">Replace Type Code with State/Strategy</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/organizing-data/replace-type-code-with-subclasses" data-for="flower/refactoring/techniques/organizing-data/replace-type-code-with-subclasses">Replace Type Code with Subclasses</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/organizing-data/self-encapsulate-field" data-for="flower/refactoring/techniques/organizing-data/self-encapsulate-field">Self Encapsulate Field</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/techniques/simplifying-conditional-expressions"><button class="folder-button"><p class="folder-title">simplifying-conditional-expressions</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/techniques/simplifying-conditional-expressions"><li><li><a href="../../../../flower/refactoring/techniques/simplifying-conditional-expressions/consolidate-conditional-expression" data-for="flower/refactoring/techniques/simplifying-conditional-expressions/consolidate-conditional-expression">Consolidate Conditional Expression</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-conditional-expressions/consolidate-duplicate-conditional-fragments" data-for="flower/refactoring/techniques/simplifying-conditional-expressions/consolidate-duplicate-conditional-fragments">Consolidate Duplicate Conditional Fragments</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-conditional-expressions/decompose-conditional" data-for="flower/refactoring/techniques/simplifying-conditional-expressions/decompose-conditional">Decompose Conditional</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-conditional-expressions/introduce-assertion" data-for="flower/refactoring/techniques/simplifying-conditional-expressions/introduce-assertion">Introduce Assertion</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-conditional-expressions/introduce-null-object" data-for="flower/refactoring/techniques/simplifying-conditional-expressions/introduce-null-object">Introduce Null Object</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-conditional-expressions/remove-control-flag" data-for="flower/refactoring/techniques/simplifying-conditional-expressions/remove-control-flag">Remove Control Flag</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-conditional-expressions/replace-conditional-with-polymorphism" data-for="flower/refactoring/techniques/simplifying-conditional-expressions/replace-conditional-with-polymorphism">Replace Conditional with Polymorphism</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-conditional-expressions/replace-nested-conditional-with-guard-clauses" data-for="flower/refactoring/techniques/simplifying-conditional-expressions/replace-nested-conditional-with-guard-clauses">Replace Nested Conditional with Guard Clauses</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/techniques/simplifying-method-calls"><button class="folder-button"><p class="folder-title">simplifying-method-calls</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/techniques/simplifying-method-calls"><li><li><a href="../../../../flower/refactoring/techniques/simplifying-method-calls/add-parameter" data-for="flower/refactoring/techniques/simplifying-method-calls/add-parameter">Add Parameter</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-method-calls/hide-method" data-for="flower/refactoring/techniques/simplifying-method-calls/hide-method">Hide Method</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-method-calls/introduce-parameter-object" data-for="flower/refactoring/techniques/simplifying-method-calls/introduce-parameter-object">Introduce Parameter Object</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-method-calls/parameterize-method" data-for="flower/refactoring/techniques/simplifying-method-calls/parameterize-method">Parameterize Method</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-method-calls/preserve-whole-object" data-for="flower/refactoring/techniques/simplifying-method-calls/preserve-whole-object">Preserve Whole Object</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-method-calls/remove-parameter" data-for="flower/refactoring/techniques/simplifying-method-calls/remove-parameter">Remove Parameter</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-method-calls/remove-setting-method" data-for="flower/refactoring/techniques/simplifying-method-calls/remove-setting-method">Remove Setting Method</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-method-calls/rename-method" data-for="flower/refactoring/techniques/simplifying-method-calls/rename-method">Rename Method</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-method-calls/replace-constructor-with-factory-method" data-for="flower/refactoring/techniques/simplifying-method-calls/replace-constructor-with-factory-method">Replace Constructor with Factory Method</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-method-calls/replace-error-code-with-exception" data-for="flower/refactoring/techniques/simplifying-method-calls/replace-error-code-with-exception">Replace Error Code with Exception</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-method-calls/replace-exception-with-test" data-for="flower/refactoring/techniques/simplifying-method-calls/replace-exception-with-test">Replace Exception with Test</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-method-calls/replace-parameter-with-explicit-methods" data-for="flower/refactoring/techniques/simplifying-method-calls/replace-parameter-with-explicit-methods">Replace Parameter with Explicit Methods</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-method-calls/replace-parameter-with-method-call" data-for="flower/refactoring/techniques/simplifying-method-calls/replace-parameter-with-method-call">Replace Parameter with Method Call</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-method-calls/separate-query-from-modifier" data-for="flower/refactoring/techniques/simplifying-method-calls/separate-query-from-modifier">Separate Query from Modifier</a></li></li></ul></div></div></li><li><li><a href="../../../../flower/refactoring/techniques/composing-methods" data-for="flower/refactoring/techniques/composing-methods">Composing Methods</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/dealing-with-generalization" data-for="flower/refactoring/techniques/dealing-with-generalization">Dealing with Generalization</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/moving-features-between-objects" data-for="flower/refactoring/techniques/moving-features-between-objects">Moving Features between Objects</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/organizing-data" data-for="flower/refactoring/techniques/organizing-data">Organizing Data</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-conditional-expressions" data-for="flower/refactoring/techniques/simplifying-conditional-expressions">Simplifying Conditional Expressions</a></li></li><li><li><a href="../../../../flower/refactoring/techniques/simplifying-method-calls" data-for="flower/refactoring/techniques/simplifying-method-calls">Simplifying Method Calls</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/what-is-refactoring"><button class="folder-button"><p class="folder-title">what-is-refactoring</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/what-is-refactoring"><li><li><a href="../../../../flower/refactoring/what-is-refactoring/Clean-code" data-for="flower/refactoring/what-is-refactoring/Clean-code">Clean code</a></li></li><li><li><a href="../../../../flower/refactoring/what-is-refactoring/how-to" data-for="flower/refactoring/what-is-refactoring/how-to">How to refactor</a></li></li><li><li><a href="../../../../flower/refactoring/what-is-refactoring/technical-debt" data-for="flower/refactoring/what-is-refactoring/technical-debt">Technical debt</a></li></li><li><li><a href="../../../../flower/refactoring/what-is-refactoring/when" data-for="flower/refactoring/what-is-refactoring/when">When to refactor</a></li></li></ul></div></div></li><li><li><a href="../../../../flower/refactoring/catalog" data-for="flower/refactoring/catalog">Catalog of Refactoring</a></li></li><li><li><a href="../../../../flower/refactoring/Cheat-Sheet" data-for="flower/refactoring/Cheat-Sheet">Cheat Sheet</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing"><button class="folder-button"><p class="folder-title">testing</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/automation"><button class="folder-button"><p class="folder-title">automation</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/automation"><li><li><a href="../../../../flower/testing/automation/Importance" data-for="flower/testing/automation/Importance">Importance</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/go"><button class="folder-button"><p class="folder-title">go</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/go"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/go/anti_patterns"><button class="folder-button"><p class="folder-title">anti_patterns</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/go/anti_patterns"><li><li><a href="../../../../flower/testing/go/anti_patterns/anti-patterns" data-for="flower/testing/go/anti_patterns/anti-patterns">anti-patterns</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/go/build_an_application"><button class="folder-button"><p class="folder-title">build_an_application</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/go/build_an_application"><li><li><a href="../../../../flower/testing/go/build_an_application/command-line" data-for="flower/testing/go/build_an_application/command-line">command-line</a></li></li><li><li><a href="../../../../flower/testing/go/build_an_application/http-server" data-for="flower/testing/go/build_an_application/http-server">http-server</a></li></li><li><li><a href="../../../../flower/testing/go/build_an_application/io" data-for="flower/testing/go/build_an_application/io">io</a></li></li><li><li><a href="../../../../flower/testing/go/build_an_application/json" data-for="flower/testing/go/build_an_application/json">json</a></li></li><li><li><a href="../../../../flower/testing/go/build_an_application/time" data-for="flower/testing/go/build_an_application/time">time</a></li></li><li><li><a href="../../../../flower/testing/go/build_an_application/websockets" data-for="flower/testing/go/build_an_application/websockets">websockets</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/go/fundamentals"><button class="folder-button"><p class="folder-title">fundamentals</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/go/fundamentals"><li><li><a href="../../../../flower/testing/go/fundamentals/arrays-and-slices" data-for="flower/testing/go/fundamentals/arrays-and-slices">arrays-and-slices</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/concurrency" data-for="flower/testing/go/fundamentals/concurrency">concurrency</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/context" data-for="flower/testing/go/fundamentals/context">context</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/dependency-injection" data-for="flower/testing/go/fundamentals/dependency-injection">dependency-injection</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/generics" data-for="flower/testing/go/fundamentals/generics">generics</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/hello-world" data-for="flower/testing/go/fundamentals/hello-world">hello-world</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/install-go" data-for="flower/testing/go/fundamentals/install-go">install-go</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/integers" data-for="flower/testing/go/fundamentals/integers">integers</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/iteration" data-for="flower/testing/go/fundamentals/iteration">iteration</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/maps" data-for="flower/testing/go/fundamentals/maps">maps</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/math" data-for="flower/testing/go/fundamentals/math">math</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/mocking" data-for="flower/testing/go/fundamentals/mocking">mocking</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/pointers-and-errors" data-for="flower/testing/go/fundamentals/pointers-and-errors">pointers-and-errors</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/reading-files" data-for="flower/testing/go/fundamentals/reading-files">reading-files</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/reflection" data-for="flower/testing/go/fundamentals/reflection">reflection</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/revisiting-arrays-and-slices-with-generics" data-for="flower/testing/go/fundamentals/revisiting-arrays-and-slices-with-generics">revisiting-arrays-and-slices-with-generics</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/roman-numerals" data-for="flower/testing/go/fundamentals/roman-numerals">roman-numerals</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/select" data-for="flower/testing/go/fundamentals/select">select</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/structs-methods-and-interfaces" data-for="flower/testing/go/fundamentals/structs-methods-and-interfaces">structs-methods-and-interfaces</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/sync" data-for="flower/testing/go/fundamentals/sync">sync</a></li></li><li><li><a href="../../../../flower/testing/go/fundamentals/template" data-for="flower/testing/go/fundamentals/template">template</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/go/testing_fundamentals"><button class="folder-button"><p class="folder-title">testing_fundamentals</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/go/testing_fundamentals"><li><li><a href="../../../../flower/testing/go/testing_fundamentals/intro-to-acceptance-tests" data-for="flower/testing/go/testing_fundamentals/intro-to-acceptance-tests">intro-to-acceptance-tests</a></li></li><li><li><a href="../../../../flower/testing/go/testing_fundamentals/scaling-acceptance-tests" data-for="flower/testing/go/testing_fundamentals/scaling-acceptance-tests">scaling-acceptance-tests</a></li></li><li><li><a href="../../../../flower/testing/go/testing_fundamentals/working-without-mocks" data-for="flower/testing/go/testing_fundamentals/working-without-mocks">working-without-mocks</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/go/tips"><button class="folder-button"><p class="folder-title">tips</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/go/tips"><li><li><a href="../../../../flower/testing/go/tips/context-aware-reader" data-for="flower/testing/go/tips/context-aware-reader">context-aware-reader</a></li></li><li><li><a href="../../../../flower/testing/go/tips/error-types" data-for="flower/testing/go/tips/error-types">error-types</a></li></li><li><li><a href="../../../../flower/testing/go/tips/http-handlers-revisited" data-for="flower/testing/go/tips/http-handlers-revisited">http-handlers-revisited</a></li></li><li><li><a href="../../../../flower/testing/go/tips/os-exec" data-for="flower/testing/go/tips/os-exec">os-exec</a></li></li><li><li><a href="../../../../flower/testing/go/tips/why-unit-test" data-for="flower/testing/go/tips/why-unit-test">why-unit-test</a></li></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/javascript"><button class="folder-button"><p class="folder-title">javascript</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/javascript"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/javascript/0 The Golden Rule"><button class="folder-button"><p class="folder-title">0 The Golden Rule</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/javascript/0 The Golden Rule"><li><li><a href="../../../../flower/testing/javascript/0-The-Golden-Rule/0-Design-for-lean-testing" data-for="flower/testing/javascript/0-The-Golden-Rule/0-Design-for-lean-testing">0 Design for lean testing</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/javascript/1 The Test Anatomy"><button class="folder-button"><p class="folder-title">1 The Test Anatomy</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/javascript/1 The Test Anatomy"><li><li><a href="../../../../flower/testing/javascript/1-The-Test-Anatomy/1-1-Include-3-parts-in-each-test-name" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-1-Include-3-parts-in-each-test-name">1-1 Include 3 parts in each test name</a></li></li><li><li><a href="../../../../flower/testing/javascript/1-The-Test-Anatomy/1-2-Structure-tests-by-the-AAA-pattern" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-2-Structure-tests-by-the-AAA-pattern">1-2 Structure tests by the AAA pattern</a></li></li><li><li><a href="../../../../flower/testing/javascript/1-The-Test-Anatomy/1-3-Describe-expectations-in-a-product-language-use-BDD-style-assertions" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-3-Describe-expectations-in-a-product-language-use-BDD-style-assertions">1-3 Describe expectations in a product language use BDD-style assertions</a></li></li><li><li><a href="../../../../flower/testing/javascript/1-The-Test-Anatomy/1-4-Stick-to-black-box-testing-Test-only-public-methods" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-4-Stick-to-black-box-testing-Test-only-public-methods">1-4 Stick to black-box testing Test only public methods</a></li></li><li><li><a href="../../../../flower/testing/javascript/1-The-Test-Anatomy/1-5-Choose-the-right-test-doubles-Avoid-mocks-in-favor-of-stubs-and-spies" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-5-Choose-the-right-test-doubles-Avoid-mocks-in-favor-of-stubs-and-spies">1-5 Choose the right test doubles Avoid mocks in favor of stubs and spies</a></li></li><li><li><a href="../../../../flower/testing/javascript/1-The-Test-Anatomy/1-6-Dont-foo-use-realistic-input-data" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-6-Dont-foo-use-realistic-input-data">1-6 Dont foo use realistic input data</a></li></li><li><li><a href="../../../../flower/testing/javascript/1-The-Test-Anatomy/1-7-Test-many-input-combinations-using-Property-based-testing" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-7-Test-many-input-combinations-using-Property-based-testing">1-7 Test many input combinations using Property-based testing</a></li></li><li><li><a href="../../../../flower/testing/javascript/1-The-Test-Anatomy/1-8-If-needed-use-only-short--inline-snapshots" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-8-If-needed-use-only-short--inline-snapshots">1-8 If needed use only short  inline snapshots</a></li></li><li><li><a href="../../../../flower/testing/javascript/1-The-Test-Anatomy/1-9-Copy-code-but-only-whats-neccessary" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-9-Copy-code-but-only-whats-neccessary">1-9 Copy code but only whats neccessary</a></li></li><li><li><a href="../../../../flower/testing/javascript/1-The-Test-Anatomy/1-10-Dont-catch-errors-expect-them" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-10-Dont-catch-errors-expect-them">1-10 Dont catch errors expect them</a></li></li><li><li><a href="../../../../flower/testing/javascript/1-The-Test-Anatomy/1-11-Tag-your-tests" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-11-Tag-your-tests">1-11 Tag your tests</a></li></li><li><li><a href="../../../../flower/testing/javascript/1-The-Test-Anatomy/1-12-Categorize-tests-under-at-least-2-levels" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-12-Categorize-tests-under-at-least-2-levels">1-12 Categorize tests under at least 2 levels</a></li></li><li><li><a href="../../../../flower/testing/javascript/1-The-Test-Anatomy/1-13-Other-generic-good-testing-hygiene" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-13-Other-generic-good-testing-hygiene">1-13 Other generic good testing hygiene</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/javascript/2 Backend"><button class="folder-button"><p class="folder-title">2 Backend</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/javascript/2 Backend"><li><li><a href="../../../../flower/testing/javascript/2-Backend/2-1-Enrich-your-testing-portfolio-Look-beyond-unit-tests-and-the-pyramid" data-for="flower/testing/javascript/2-Backend/2-1-Enrich-your-testing-portfolio-Look-beyond-unit-tests-and-the-pyramid">2-1 Enrich your testing portfolio Look beyond unit tests and the pyramid</a></li></li><li><li><a href="../../../../flower/testing/javascript/2-Backend/2-2-Component-testing-might-be-your-best-affair" data-for="flower/testing/javascript/2-Backend/2-2-Component-testing-might-be-your-best-affair">2-2 Component testing might be your best affair</a></li></li><li><li><a href="../../../../flower/testing/javascript/2-Backend/2-3-Ensure-new-releases-dont-break-the-API-using-contract-tests" data-for="flower/testing/javascript/2-Backend/2-3-Ensure-new-releases-dont-break-the-API-using-contract-tests">2-3 Ensure new releases dont break the API using contract tests</a></li></li><li><li><a href="../../../../flower/testing/javascript/2-Backend/2-4-Test-your-middlewares-in-isolation" data-for="flower/testing/javascript/2-Backend/2-4-Test-your-middlewares-in-isolation">2-4 Test your middlewares in isolation</a></li></li><li><li><a href="../../../../flower/testing/javascript/2-Backend/2-5-Measure-and-refactor-using-static-analysis-tools" data-for="flower/testing/javascript/2-Backend/2-5-Measure-and-refactor-using-static-analysis-tools">2-5 Measure and refactor using static analysis tools</a></li></li><li><li><a href="../../../../flower/testing/javascript/2-Backend/2-6-Check-your-readiness-for-Node-related-chaos" data-for="flower/testing/javascript/2-Backend/2-6-Check-your-readiness-for-Node-related-chaos">2-6 Check your readiness for Node-related chaos</a></li></li><li><li><a href="../../../../flower/testing/javascript/2-Backend/2-7-Avoid-global-test-fixtures-and-seeds-add-data-per-test" data-for="flower/testing/javascript/2-Backend/2-7-Avoid-global-test-fixtures-and-seeds-add-data-per-test">2-7 Avoid global test fixtures and seeds add data per-test</a></li></li><li><li><a href="../../../../flower/testing/javascript/2-Backend/2-8-Choose-a-clear-data-clean-up-strategy-After-all-recommended-or-after-each" data-for="flower/testing/javascript/2-Backend/2-8-Choose-a-clear-data-clean-up-strategy-After-all-recommended-or-after-each">2-8 Choose a clear data clean-up strategy After-all recommended or after-each</a></li></li><li><li><a href="../../../../flower/testing/javascript/2-Backend/2-9-Isolate-the-component-from-the-world-using-HTTP-interceptor" data-for="flower/testing/javascript/2-Backend/2-9-Isolate-the-component-from-the-world-using-HTTP-interceptor">2-9 Isolate the component from the world using HTTP interceptor</a></li></li><li><li><a href="../../../../flower/testing/javascript/2-Backend/2-10-Test-the-response-schema-mostly-when-there-are-auto-generated-fields" data-for="flower/testing/javascript/2-Backend/2-10-Test-the-response-schema-mostly-when-there-are-auto-generated-fields">2-10 Test the response schema mostly when there are auto-generated fields</a></li></li><li><li><a href="../../../../flower/testing/javascript/2-Backend/2-11-Check-integrations-corner-cases-and-chaos" data-for="flower/testing/javascript/2-Backend/2-11-Check-integrations-corner-cases-and-chaos">2-11 Check integrations corner cases and chaos</a></li></li><li><li><a href="../../../../flower/testing/javascript/2-Backend/2-12-Test-the-five-potential-outcomes" data-for="flower/testing/javascript/2-Backend/2-12-Test-the-five-potential-outcomes">2-12 Test the five potential outcomes</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/javascript/3 Frontend"><button class="folder-button"><p class="folder-title">3 Frontend</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/javascript/3 Frontend"><li><li><a href="../../../../flower/testing/javascript/3-Frontend/3-1-Separate-UI-from-functionality" data-for="flower/testing/javascript/3-Frontend/3-1-Separate-UI-from-functionality">3-1 Separate UI from functionality</a></li></li><li><li><a href="../../../../flower/testing/javascript/3-Frontend/3-2-Query-HTML-elements-based-on-attributes-that-are-unlikely-to-change" data-for="flower/testing/javascript/3-Frontend/3-2-Query-HTML-elements-based-on-attributes-that-are-unlikely-to-change">3-2 Query HTML elements based on attributes that are unlikely to change</a></li></li><li><li><a href="../../../../flower/testing/javascript/3-Frontend/3-3-Whenever-possible-test-with-a-realistic-and-fully-rendered-component" data-for="flower/testing/javascript/3-Frontend/3-3-Whenever-possible-test-with-a-realistic-and-fully-rendered-component">3-3 Whenever possible test with a realistic and fully rendered component</a></li></li><li><li><a href="../../../../flower/testing/javascript/3-Frontend/3-4-Dont-sleep-use-frameworks-built-in-support-for-async-events.-Also-try-to-speed-things-up" data-for="flower/testing/javascript/3-Frontend/3-4-Dont-sleep-use-frameworks-built-in-support-for-async-events.-Also-try-to-speed-things-up">3-4 Dont sleep use frameworks built-in support for async events. Also try to speed things up</a></li></li><li><li><a href="../../../../flower/testing/javascript/3-Frontend/3-5-Watch-how-the-content-is-served-over-the-network" data-for="flower/testing/javascript/3-Frontend/3-5-Watch-how-the-content-is-served-over-the-network">3-5 Watch how the content is served over the network</a></li></li><li><li><a href="../../../../flower/testing/javascript/3-Frontend/3-6-Stub-flaky-and-slow-resources-like-backend-APIs" data-for="flower/testing/javascript/3-Frontend/3-6-Stub-flaky-and-slow-resources-like-backend-APIs">3-6 Stub flaky and slow resources like backend APIs</a></li></li><li><li><a href="../../../../flower/testing/javascript/3-Frontend/3-7-Have-very-few-end-to-end-tests-that-spans-the-whole-system" data-for="flower/testing/javascript/3-Frontend/3-7-Have-very-few-end-to-end-tests-that-spans-the-whole-system">3-7 Have very few end-to-end tests that spans the whole system</a></li></li><li><li><a href="../../../../flower/testing/javascript/3-Frontend/3-8-Speed-up-E2E-tests-by-reusing-login-credentials" data-for="flower/testing/javascript/3-Frontend/3-8-Speed-up-E2E-tests-by-reusing-login-credentials">3-8 Speed-up E2E tests by reusing login credentials</a></li></li><li><li><a href="../../../../flower/testing/javascript/3-Frontend/3-9-Have-one-E2E-smoke-test-that-just-travels-across-the-site-map" data-for="flower/testing/javascript/3-Frontend/3-9-Have-one-E2E-smoke-test-that-just-travels-across-the-site-map">3-9 Have one E2E smoke test that just travels across the site map</a></li></li><li><li><a href="../../../../flower/testing/javascript/3-Frontend/3-10-Expose-the-tests-as-a-live-collaborative-document" data-for="flower/testing/javascript/3-Frontend/3-10-Expose-the-tests-as-a-live-collaborative-document">3-10 Expose the tests as a live collaborative document</a></li></li><li><li><a href="../../../../flower/testing/javascript/3-Frontend/3-11-Detect-visual-issues-with-automated-tools" data-for="flower/testing/javascript/3-Frontend/3-11-Detect-visual-issues-with-automated-tools">3-11 Detect visual issues with automated tools</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/javascript/4 Measuring Tests Effectiveness"><button class="folder-button"><p class="folder-title">4 Measuring Tests Effectiveness</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/javascript/4 Measuring Tests Effectiveness"><li><li><a href="../../../../flower/testing/javascript/4-Measuring-Tests-Effectiveness/4-1-Get-enough-coverage-for-being-confident-80-seems-to-be-the-lucky-number" data-for="flower/testing/javascript/4-Measuring-Tests-Effectiveness/4-1-Get-enough-coverage-for-being-confident-80-seems-to-be-the-lucky-number">4-1 Get enough coverage for being confident 80 seems to be the lucky number</a></li></li><li><li><a href="../../../../flower/testing/javascript/4-Measuring-Tests-Effectiveness/4-2-Inspect-coverage-reports-to-detect-untested-areas-and-other-oddities" data-for="flower/testing/javascript/4-Measuring-Tests-Effectiveness/4-2-Inspect-coverage-reports-to-detect-untested-areas-and-other-oddities">4-2 Inspect coverage reports to detect untested areas and other oddities</a></li></li><li><li><a href="../../../../flower/testing/javascript/4-Measuring-Tests-Effectiveness/4-3-Measure-logical-coverage-using-mutation-testing" data-for="flower/testing/javascript/4-Measuring-Tests-Effectiveness/4-3-Measure-logical-coverage-using-mutation-testing">4-3 Measure logical coverage using mutation testing</a></li></li><li><li><a href="../../../../flower/testing/javascript/4-Measuring-Tests-Effectiveness/4-4-Preventing-test-code-issues-with-Test-linters" data-for="flower/testing/javascript/4-Measuring-Tests-Effectiveness/4-4-Preventing-test-code-issues-with-Test-linters">4-4 Preventing test code issues with Test linters</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/javascript/5 Continuous Integration"><button class="folder-button"><p class="folder-title">5 Continuous Integration</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/javascript/5 Continuous Integration"><li><li><a href="../../../../flower/testing/javascript/5-Continuous-Integration/5-1-Enrich-your-linters-and-abort-builds-that-have-linting-issues" data-for="flower/testing/javascript/5-Continuous-Integration/5-1-Enrich-your-linters-and-abort-builds-that-have-linting-issues">5-1 Enrich your linters and abort builds that have linting issues</a></li></li><li><li><a href="../../../../flower/testing/javascript/5-Continuous-Integration/5-2-Shorten-the-feedback-loop-with-local-developer-CI" data-for="flower/testing/javascript/5-Continuous-Integration/5-2-Shorten-the-feedback-loop-with-local-developer-CI">5-2 Shorten the feedback loop with local developer-CI</a></li></li><li><li><a href="../../../../flower/testing/javascript/5-Continuous-Integration/5-3-Perform-e2e-testing-over-a-true-production-mirror" data-for="flower/testing/javascript/5-Continuous-Integration/5-3-Perform-e2e-testing-over-a-true-production-mirror">5-3 Perform e2e testing over a true production-mirror</a></li></li><li><li><a href="../../../../flower/testing/javascript/5-Continuous-Integration/5-4-Parallelize-test-execution" data-for="flower/testing/javascript/5-Continuous-Integration/5-4-Parallelize-test-execution">5-4 Parallelize test execution</a></li></li><li><li><a href="../../../../flower/testing/javascript/5-Continuous-Integration/5-5-Stay-away-from-legal-issues-using-license-and-plagiarism-check" data-for="flower/testing/javascript/5-Continuous-Integration/5-5-Stay-away-from-legal-issues-using-license-and-plagiarism-check">5-5 Stay away from legal issues using license and plagiarism check</a></li></li><li><li><a href="../../../../flower/testing/javascript/5-Continuous-Integration/5-6-Constantly-inspect-for-vulnerable-dependencies" data-for="flower/testing/javascript/5-Continuous-Integration/5-6-Constantly-inspect-for-vulnerable-dependencies">5-6 Constantly inspect for vulnerable dependencies</a></li></li><li><li><a href="../../../../flower/testing/javascript/5-Continuous-Integration/5-7-Automate-dependency-updates" data-for="flower/testing/javascript/5-Continuous-Integration/5-7-Automate-dependency-updates">5-7 Automate dependency updates</a></li></li><li><li><a href="../../../../flower/testing/javascript/5-Continuous-Integration/5-8-Other-non-Node-related-CI-tips" data-for="flower/testing/javascript/5-Continuous-Integration/5-8-Other-non-Node-related-CI-tips">5-8 Other non-Node related CI tips</a></li></li><li><li><a href="../../../../flower/testing/javascript/5-Continuous-Integration/5-9-Build-matrix-Run-the-same-CI-steps-using-multiple-Node-versions" data-for="flower/testing/javascript/5-Continuous-Integration/5-9-Build-matrix-Run-the-same-CI-steps-using-multiple-Node-versions">5-9 Build matrix Run the same CI steps using multiple Node versions</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/javascript/assets"><button class="folder-button"><p class="folder-title">assets</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/javascript/assets"><li><li><a href="../../../../flower/testing/javascript/assets/readme" data-for="flower/testing/javascript/assets/readme">readme</a></li></li></ul></div></div></li></ul></div></div></li></ul></div></div></li><li><li><a href="../../../../flower/Table-of-contents" data-for="flower/Table-of-contents">Table of contents</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit"><button class="folder-button"><p class="folder-title">fruit</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding"><button class="folder-button"><p class="folder-title">Coding</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns"><button class="folder-button"><p class="folder-title">Patterns</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/Design Patterns"><button class="folder-button"><p class="folder-title">Design Patterns</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/Design Patterns"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/Design Patterns/catalog"><button class="folder-button"><p class="folder-title">catalog</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/Design Patterns/catalog"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/Design Patterns/catalog/behavioral"><button class="folder-button"><p class="folder-title">behavioral</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/Design Patterns/catalog/behavioral"><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/chain-of-responsibility" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/chain-of-responsibility">chain-of-responsibility</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/command" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/command">command</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/iterator" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/iterator">iterator</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/mediator" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/mediator">mediator</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/memento" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/memento">memento</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/observer" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/observer">observer</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/state" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/state">state</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/strategy" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/strategy">strategy</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/template-method" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/template-method">template-method</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/visitor" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/visitor">visitor</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/Design Patterns/catalog/creational"><button class="folder-button"><p class="folder-title">creational</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/Design Patterns/catalog/creational"><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/creational/abstract-factory" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/creational/abstract-factory">abstract-factory</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/creational/builder" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/creational/builder">builder</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/creational/factory-method" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/creational/factory-method">factory-method</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/creational/prototype" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/creational/prototype">prototype</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/creational/singleton" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/creational/singleton">singleton</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/Design Patterns/catalog/structural"><button class="folder-button"><p class="folder-title">structural</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/Design Patterns/catalog/structural"><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/structural/adapter" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/structural/adapter">adapter</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/structural/bridge" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/structural/bridge">bridge</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/structural/composite" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/structural/composite">composite</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/structural/decorator" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/structural/decorator">decorator</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/structural/facade" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/structural/facade">facade</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/structural/flyweight" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/structural/flyweight">flyweight</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/structural/proxy" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/structural/proxy">proxy</a></li></li></ul></div></div></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral-patterns" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral-patterns">behavioral-patterns</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/catalog" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/catalog">catalog</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/creational-patterns" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/creational-patterns">creational-patterns</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/catalog/structural-patterns" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/structural-patterns">structural-patterns</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/Design Patterns/intro"><button class="folder-button"><p class="folder-title">intro</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/Design Patterns/intro"><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/intro/classification" data-for="fruit/Coding/Patterns/Design-Patterns/intro/classification">classification</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/intro/criticism" data-for="fruit/Coding/Patterns/Design-Patterns/intro/criticism">criticism</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/intro/history" data-for="fruit/Coding/Patterns/Design-Patterns/intro/history">history</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/intro/what-is-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/intro/what-is-pattern">what-is-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/intro/why-learn-patterns" data-for="fruit/Coding/Patterns/Design-Patterns/intro/why-learn-patterns">why-learn-patterns</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/Design Patterns/react"><button class="folder-button"><p class="folder-title">react</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/Design Patterns/react"><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/react/compound-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/react/compound-pattern">compound-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/react/hoc-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/react/hoc-pattern">hoc-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/react/hooks-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/react/hooks-pattern">hooks-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/react/presentational-container-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/react/presentational-container-pattern">presentational-container-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/react/render-props-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/react/render-props-pattern">render-props-pattern</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/Design Patterns/vanilla"><button class="folder-button"><p class="folder-title">vanilla</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/Design Patterns/vanilla"><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/command-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/command-pattern">command-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/factory-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/factory-pattern">factory-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/flyweight-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/flyweight-pattern">flyweight-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/mediator-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/mediator-pattern">mediator-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/mixin-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/mixin-pattern">mixin-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/module-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/module-pattern">module-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/observer-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/observer-pattern">observer-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/prototype-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/prototype-pattern">prototype-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/provider-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/provider-pattern">provider-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/proxy-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/proxy-pattern">proxy-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/singleton-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/singleton-pattern">singleton-pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/static-import" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/static-import">static-import</a></li></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/rendering"><button class="folder-button"><p class="folder-title">rendering</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/rendering"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/rendering/react"><button class="folder-button"><p class="folder-title">react</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/rendering/react"><li><li><a href="../../../../fruit/Coding/Patterns/rendering/react/client-side-rendering" data-for="fruit/Coding/Patterns/rendering/react/client-side-rendering">client-side-rendering</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/rendering/react/incremental-static-rendering" data-for="fruit/Coding/Patterns/rendering/react/incremental-static-rendering">incremental-static-rendering</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/rendering/react/progressive-hydration" data-for="fruit/Coding/Patterns/rendering/react/progressive-hydration">progressive-hydration</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/rendering/react/react-selective-hydration" data-for="fruit/Coding/Patterns/rendering/react/react-selective-hydration">react-selective-hydration</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/rendering/react/react-server-components" data-for="fruit/Coding/Patterns/rendering/react/react-server-components">react-server-components</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/rendering/react/server-side-rendering" data-for="fruit/Coding/Patterns/rendering/react/server-side-rendering">server-side-rendering</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/rendering/react/static-rendering" data-for="fruit/Coding/Patterns/rendering/react/static-rendering">static-rendering</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/rendering/react/streaming-ssr" data-for="fruit/Coding/Patterns/rendering/react/streaming-ssr">streaming-ssr</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/rendering/vanilla"><button class="folder-button"><p class="folder-title">vanilla</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/rendering/vanilla"><li><li><a href="../../../../fruit/Coding/Patterns/rendering/vanilla/islands-architecture" data-for="fruit/Coding/Patterns/rendering/vanilla/islands-architecture">islands-architecture</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/rendering/vanilla/rendering-patterns" data-for="fruit/Coding/Patterns/rendering/vanilla/rendering-patterns">rendering-patterns</a></li></li><li><li><a href="../../../../fruit/Coding/Patterns/rendering/vanilla/view-transitions" data-for="fruit/Coding/Patterns/rendering/vanilla/view-transitions">view-transitions</a></li></li></ul></div></div></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing"><button class="folder-button"><p class="folder-title">Testing</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/go"><button class="folder-button"><p class="folder-title">go</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/go"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/go/anti_patterns"><button class="folder-button"><p class="folder-title">anti_patterns</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/go/anti_patterns"><li><li><a href="../../../../fruit/Coding/Testing/go/anti_patterns/anti-patterns" data-for="fruit/Coding/Testing/go/anti_patterns/anti-patterns">anti-patterns</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/go/build_an_application"><button class="folder-button"><p class="folder-title">build_an_application</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/go/build_an_application"><li><li><a href="../../../../fruit/Coding/Testing/go/build_an_application/command-line" data-for="fruit/Coding/Testing/go/build_an_application/command-line">command-line</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/build_an_application/http-server" data-for="fruit/Coding/Testing/go/build_an_application/http-server">http-server</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/build_an_application/io" data-for="fruit/Coding/Testing/go/build_an_application/io">io</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/build_an_application/json" data-for="fruit/Coding/Testing/go/build_an_application/json">json</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/build_an_application/time" data-for="fruit/Coding/Testing/go/build_an_application/time">time</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/build_an_application/websockets" data-for="fruit/Coding/Testing/go/build_an_application/websockets">websockets</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/go/fundamentals"><button class="folder-button"><p class="folder-title">fundamentals</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/go/fundamentals"><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/arrays-and-slices" data-for="fruit/Coding/Testing/go/fundamentals/arrays-and-slices">arrays-and-slices</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/concurrency" data-for="fruit/Coding/Testing/go/fundamentals/concurrency">concurrency</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/context" data-for="fruit/Coding/Testing/go/fundamentals/context">context</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/dependency-injection" data-for="fruit/Coding/Testing/go/fundamentals/dependency-injection">dependency-injection</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/generics" data-for="fruit/Coding/Testing/go/fundamentals/generics">generics</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/hello-world" data-for="fruit/Coding/Testing/go/fundamentals/hello-world">hello-world</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/install-go" data-for="fruit/Coding/Testing/go/fundamentals/install-go">install-go</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/integers" data-for="fruit/Coding/Testing/go/fundamentals/integers">integers</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/iteration" data-for="fruit/Coding/Testing/go/fundamentals/iteration">iteration</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/maps" data-for="fruit/Coding/Testing/go/fundamentals/maps">maps</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/math" data-for="fruit/Coding/Testing/go/fundamentals/math">math</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/mocking" data-for="fruit/Coding/Testing/go/fundamentals/mocking">mocking</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/pointers-and-errors" data-for="fruit/Coding/Testing/go/fundamentals/pointers-and-errors">pointers-and-errors</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/reading-files" data-for="fruit/Coding/Testing/go/fundamentals/reading-files">reading-files</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/reflection" data-for="fruit/Coding/Testing/go/fundamentals/reflection">reflection</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/revisiting-arrays-and-slices-with-generics" data-for="fruit/Coding/Testing/go/fundamentals/revisiting-arrays-and-slices-with-generics">revisiting-arrays-and-slices-with-generics</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/roman-numerals" data-for="fruit/Coding/Testing/go/fundamentals/roman-numerals">roman-numerals</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/select" data-for="fruit/Coding/Testing/go/fundamentals/select">select</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/structs-methods-and-interfaces" data-for="fruit/Coding/Testing/go/fundamentals/structs-methods-and-interfaces">structs-methods-and-interfaces</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/sync" data-for="fruit/Coding/Testing/go/fundamentals/sync">sync</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/fundamentals/template" data-for="fruit/Coding/Testing/go/fundamentals/template">template</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/go/testing_fundamentals"><button class="folder-button"><p class="folder-title">testing_fundamentals</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/go/testing_fundamentals"><li><li><a href="../../../../fruit/Coding/Testing/go/testing_fundamentals/intro-to-acceptance-tests" data-for="fruit/Coding/Testing/go/testing_fundamentals/intro-to-acceptance-tests">intro-to-acceptance-tests</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/testing_fundamentals/scaling-acceptance-tests" data-for="fruit/Coding/Testing/go/testing_fundamentals/scaling-acceptance-tests">scaling-acceptance-tests</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/testing_fundamentals/working-without-mocks" data-for="fruit/Coding/Testing/go/testing_fundamentals/working-without-mocks">working-without-mocks</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/go/tips"><button class="folder-button"><p class="folder-title">tips</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/go/tips"><li><li><a href="../../../../fruit/Coding/Testing/go/tips/context-aware-reader" data-for="fruit/Coding/Testing/go/tips/context-aware-reader">context-aware-reader</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/tips/error-types" data-for="fruit/Coding/Testing/go/tips/error-types">error-types</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/tips/http-handlers-revisited" data-for="fruit/Coding/Testing/go/tips/http-handlers-revisited">http-handlers-revisited</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/tips/os-exec" data-for="fruit/Coding/Testing/go/tips/os-exec">os-exec</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/go/tips/why-unit-test" data-for="fruit/Coding/Testing/go/tips/why-unit-test">why-unit-test</a></li></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/javascript"><button class="folder-button"><p class="folder-title">javascript</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/javascript"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/javascript/0 The Golden Rule"><button class="folder-button"><p class="folder-title">0 The Golden Rule</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/javascript/0 The Golden Rule"><li><li><a href="../../../../fruit/Coding/Testing/javascript/0-The-Golden-Rule/0-Design-for-lean-testing" data-for="fruit/Coding/Testing/javascript/0-The-Golden-Rule/0-Design-for-lean-testing">0 Design for lean testing</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/javascript/1 The Test Anatomy"><button class="folder-button"><p class="folder-title">1 The Test Anatomy</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/javascript/1 The Test Anatomy"><li><li><a href="../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-1-Include-3-parts-in-each-test-name" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-1-Include-3-parts-in-each-test-name">1-1 Include 3 parts in each test name</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-2-Structure-tests-by-the-AAA-pattern" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-2-Structure-tests-by-the-AAA-pattern">1-2 Structure tests by the AAA pattern</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-3-Describe-expectations-in-a-product-language-use-BDD-style-assertions" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-3-Describe-expectations-in-a-product-language-use-BDD-style-assertions">1-3 Describe expectations in a product language use BDD-style assertions</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-4-Stick-to-black-box-testing-Test-only-public-methods" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-4-Stick-to-black-box-testing-Test-only-public-methods">1-4 Stick to black-box testing Test only public methods</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-5-Choose-the-right-test-doubles-Avoid-mocks-in-favor-of-stubs-and-spies" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-5-Choose-the-right-test-doubles-Avoid-mocks-in-favor-of-stubs-and-spies">1-5 Choose the right test doubles Avoid mocks in favor of stubs and spies</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-6-Dont-foo-use-realistic-input-data" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-6-Dont-foo-use-realistic-input-data">1-6 Dont foo use realistic input data</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-7-Test-many-input-combinations-using-Property-based-testing" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-7-Test-many-input-combinations-using-Property-based-testing">1-7 Test many input combinations using Property-based testing</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-8-If-needed-use-only-short--inline-snapshots" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-8-If-needed-use-only-short--inline-snapshots">1-8 If needed use only short  inline snapshots</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-9-Copy-code-but-only-whats-neccessary" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-9-Copy-code-but-only-whats-neccessary">1-9 Copy code but only whats neccessary</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-10-Dont-catch-errors-expect-them" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-10-Dont-catch-errors-expect-them">1-10 Dont catch errors expect them</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-11-Tag-your-tests" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-11-Tag-your-tests">1-11 Tag your tests</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-12-Categorize-tests-under-at-least-2-levels" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-12-Categorize-tests-under-at-least-2-levels">1-12 Categorize tests under at least 2 levels</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-13-Other-generic-good-testing-hygiene" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-13-Other-generic-good-testing-hygiene">1-13 Other generic good testing hygiene</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/javascript/2 Backend"><button class="folder-button"><p class="folder-title">2 Backend</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/javascript/2 Backend"><li><li><a href="../../../../fruit/Coding/Testing/javascript/2-Backend/2-1-Enrich-your-testing-portfolio-Look-beyond-unit-tests-and-the-pyramid" data-for="fruit/Coding/Testing/javascript/2-Backend/2-1-Enrich-your-testing-portfolio-Look-beyond-unit-tests-and-the-pyramid">2-1 Enrich your testing portfolio Look beyond unit tests and the pyramid</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/2-Backend/2-2-Component-testing-might-be-your-best-affair" data-for="fruit/Coding/Testing/javascript/2-Backend/2-2-Component-testing-might-be-your-best-affair">2-2 Component testing might be your best affair</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/2-Backend/2-3-Ensure-new-releases-dont-break-the-API-using-contract-tests" data-for="fruit/Coding/Testing/javascript/2-Backend/2-3-Ensure-new-releases-dont-break-the-API-using-contract-tests">2-3 Ensure new releases dont break the API using contract tests</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/2-Backend/2-4-Test-your-middlewares-in-isolation" data-for="fruit/Coding/Testing/javascript/2-Backend/2-4-Test-your-middlewares-in-isolation">2-4 Test your middlewares in isolation</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/2-Backend/2-5-Measure-and-refactor-using-static-analysis-tools" data-for="fruit/Coding/Testing/javascript/2-Backend/2-5-Measure-and-refactor-using-static-analysis-tools">2-5 Measure and refactor using static analysis tools</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/2-Backend/2-6-Check-your-readiness-for-Node-related-chaos" data-for="fruit/Coding/Testing/javascript/2-Backend/2-6-Check-your-readiness-for-Node-related-chaos">2-6 Check your readiness for Node-related chaos</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/2-Backend/2-7-Avoid-global-test-fixtures-and-seeds-add-data-per-test" data-for="fruit/Coding/Testing/javascript/2-Backend/2-7-Avoid-global-test-fixtures-and-seeds-add-data-per-test">2-7 Avoid global test fixtures and seeds add data per-test</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/2-Backend/2-8-Choose-a-clear-data-clean-up-strategy-After-all-recommended-or-after-each" data-for="fruit/Coding/Testing/javascript/2-Backend/2-8-Choose-a-clear-data-clean-up-strategy-After-all-recommended-or-after-each">2-8 Choose a clear data clean-up strategy After-all recommended or after-each</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/2-Backend/2-9-Isolate-the-component-from-the-world-using-HTTP-interceptor" data-for="fruit/Coding/Testing/javascript/2-Backend/2-9-Isolate-the-component-from-the-world-using-HTTP-interceptor">2-9 Isolate the component from the world using HTTP interceptor</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/2-Backend/2-10-Test-the-response-schema-mostly-when-there-are-auto-generated-fields" data-for="fruit/Coding/Testing/javascript/2-Backend/2-10-Test-the-response-schema-mostly-when-there-are-auto-generated-fields">2-10 Test the response schema mostly when there are auto-generated fields</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/2-Backend/2-11-Check-integrations-corner-cases-and-chaos" data-for="fruit/Coding/Testing/javascript/2-Backend/2-11-Check-integrations-corner-cases-and-chaos">2-11 Check integrations corner cases and chaos</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/2-Backend/2-12-Test-the-five-potential-outcomes" data-for="fruit/Coding/Testing/javascript/2-Backend/2-12-Test-the-five-potential-outcomes">2-12 Test the five potential outcomes</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/javascript/3 Frontend"><button class="folder-button"><p class="folder-title">3 Frontend</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/javascript/3 Frontend"><li><li><a href="../../../../fruit/Coding/Testing/javascript/3-Frontend/3-1-Separate-UI-from-functionality" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-1-Separate-UI-from-functionality">3-1 Separate UI from functionality</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/3-Frontend/3-2-Query-HTML-elements-based-on-attributes-that-are-unlikely-to-change" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-2-Query-HTML-elements-based-on-attributes-that-are-unlikely-to-change">3-2 Query HTML elements based on attributes that are unlikely to change</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/3-Frontend/3-3-Whenever-possible-test-with-a-realistic-and-fully-rendered-component" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-3-Whenever-possible-test-with-a-realistic-and-fully-rendered-component">3-3 Whenever possible test with a realistic and fully rendered component</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/3-Frontend/3-4-Dont-sleep-use-frameworks-built-in-support-for-async-events.-Also-try-to-speed-things-up" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-4-Dont-sleep-use-frameworks-built-in-support-for-async-events.-Also-try-to-speed-things-up">3-4 Dont sleep use frameworks built-in support for async events. Also try to speed things up</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/3-Frontend/3-5-Watch-how-the-content-is-served-over-the-network" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-5-Watch-how-the-content-is-served-over-the-network">3-5 Watch how the content is served over the network</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/3-Frontend/3-6-Stub-flaky-and-slow-resources-like-backend-APIs" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-6-Stub-flaky-and-slow-resources-like-backend-APIs">3-6 Stub flaky and slow resources like backend APIs</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/3-Frontend/3-7-Have-very-few-end-to-end-tests-that-spans-the-whole-system" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-7-Have-very-few-end-to-end-tests-that-spans-the-whole-system">3-7 Have very few end-to-end tests that spans the whole system</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/3-Frontend/3-8-Speed-up-E2E-tests-by-reusing-login-credentials" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-8-Speed-up-E2E-tests-by-reusing-login-credentials">3-8 Speed-up E2E tests by reusing login credentials</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/3-Frontend/3-9-Have-one-E2E-smoke-test-that-just-travels-across-the-site-map" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-9-Have-one-E2E-smoke-test-that-just-travels-across-the-site-map">3-9 Have one E2E smoke test that just travels across the site map</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/3-Frontend/3-10-Expose-the-tests-as-a-live-collaborative-document" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-10-Expose-the-tests-as-a-live-collaborative-document">3-10 Expose the tests as a live collaborative document</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/3-Frontend/3-11-Detect-visual-issues-with-automated-tools" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-11-Detect-visual-issues-with-automated-tools">3-11 Detect visual issues with automated tools</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/javascript/4 Measuring Tests Effectiveness"><button class="folder-button"><p class="folder-title">4 Measuring Tests Effectiveness</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/javascript/4 Measuring Tests Effectiveness"><li><li><a href="../../../../fruit/Coding/Testing/javascript/4-Measuring-Tests-Effectiveness/4-1-Get-enough-coverage-for-being-confident-80-seems-to-be-the-lucky-number" data-for="fruit/Coding/Testing/javascript/4-Measuring-Tests-Effectiveness/4-1-Get-enough-coverage-for-being-confident-80-seems-to-be-the-lucky-number">4-1 Get enough coverage for being confident 80 seems to be the lucky number</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/4-Measuring-Tests-Effectiveness/4-2-Inspect-coverage-reports-to-detect-untested-areas-and-other-oddities" data-for="fruit/Coding/Testing/javascript/4-Measuring-Tests-Effectiveness/4-2-Inspect-coverage-reports-to-detect-untested-areas-and-other-oddities">4-2 Inspect coverage reports to detect untested areas and other oddities</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/4-Measuring-Tests-Effectiveness/4-3-Measure-logical-coverage-using-mutation-testing" data-for="fruit/Coding/Testing/javascript/4-Measuring-Tests-Effectiveness/4-3-Measure-logical-coverage-using-mutation-testing">4-3 Measure logical coverage using mutation testing</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/4-Measuring-Tests-Effectiveness/4-4-Preventing-test-code-issues-with-Test-linters" data-for="fruit/Coding/Testing/javascript/4-Measuring-Tests-Effectiveness/4-4-Preventing-test-code-issues-with-Test-linters">4-4 Preventing test code issues with Test linters</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/javascript/5 Continuous Integration"><button class="folder-button"><p class="folder-title">5 Continuous Integration</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/javascript/5 Continuous Integration"><li><li><a href="../../../../fruit/Coding/Testing/javascript/5-Continuous-Integration/5-1-Enrich-your-linters-and-abort-builds-that-have-linting-issues" data-for="fruit/Coding/Testing/javascript/5-Continuous-Integration/5-1-Enrich-your-linters-and-abort-builds-that-have-linting-issues">5-1 Enrich your linters and abort builds that have linting issues</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/5-Continuous-Integration/5-2-Shorten-the-feedback-loop-with-local-developer-CI" data-for="fruit/Coding/Testing/javascript/5-Continuous-Integration/5-2-Shorten-the-feedback-loop-with-local-developer-CI">5-2 Shorten the feedback loop with local developer-CI</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/5-Continuous-Integration/5-3-Perform-e2e-testing-over-a-true-production-mirror" data-for="fruit/Coding/Testing/javascript/5-Continuous-Integration/5-3-Perform-e2e-testing-over-a-true-production-mirror">5-3 Perform e2e testing over a true production-mirror</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/5-Continuous-Integration/5-4-Parallelize-test-execution" data-for="fruit/Coding/Testing/javascript/5-Continuous-Integration/5-4-Parallelize-test-execution">5-4 Parallelize test execution</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/5-Continuous-Integration/5-5-Stay-away-from-legal-issues-using-license-and-plagiarism-check" data-for="fruit/Coding/Testing/javascript/5-Continuous-Integration/5-5-Stay-away-from-legal-issues-using-license-and-plagiarism-check">5-5 Stay away from legal issues using license and plagiarism check</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/5-Continuous-Integration/5-6-Constantly-inspect-for-vulnerable-dependencies" data-for="fruit/Coding/Testing/javascript/5-Continuous-Integration/5-6-Constantly-inspect-for-vulnerable-dependencies">5-6 Constantly inspect for vulnerable dependencies</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/5-Continuous-Integration/5-7-Automate-dependency-updates" data-for="fruit/Coding/Testing/javascript/5-Continuous-Integration/5-7-Automate-dependency-updates">5-7 Automate dependency updates</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/5-Continuous-Integration/5-8-Other-non-Node-related-CI-tips" data-for="fruit/Coding/Testing/javascript/5-Continuous-Integration/5-8-Other-non-Node-related-CI-tips">5-8 Other non-Node related CI tips</a></li></li><li><li><a href="../../../../fruit/Coding/Testing/javascript/5-Continuous-Integration/5-9-Build-matrix-Run-the-same-CI-steps-using-multiple-Node-versions" data-for="fruit/Coding/Testing/javascript/5-Continuous-Integration/5-9-Build-matrix-Run-the-same-CI-steps-using-multiple-Node-versions">5-9 Build matrix Run the same CI steps using multiple Node versions</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/javascript/assets"><button class="folder-button"><p class="folder-title">assets</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/javascript/assets"><li><li><a href="../../../../fruit/Coding/Testing/javascript/assets/readme" data-for="fruit/Coding/Testing/javascript/assets/readme">readme</a></li></li></ul></div></div></li></ul></div></div></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming"><button class="folder-button"><p class="folder-title">Diagraming</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/bizSys"><button class="folder-button"><p class="folder-title">bizSys</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/bizSys"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/bizSys/externalView"><button class="folder-button"><p class="folder-title">externalView</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/bizSys/externalView"><li><li><a href="../../../../fruit/Diagraming/bizSys/externalView/constructing-sequence-diagrams" data-for="fruit/Diagraming/bizSys/externalView/constructing-sequence-diagrams">constructing-sequence-diagrams</a></li></li><li><li><a href="../../../../fruit/Diagraming/bizSys/externalView/high-level-sequence-diagrams" data-for="fruit/Diagraming/bizSys/externalView/high-level-sequence-diagrams">high-level-sequence-diagrams</a></li></li><li><li><a href="../../../../fruit/Diagraming/bizSys/externalView/sequence-diagrams" data-for="fruit/Diagraming/bizSys/externalView/sequence-diagrams">sequence-diagrams</a></li></li><li><li><a href="../../../../fruit/Diagraming/bizSys/externalView/sequence-diagrams-for-scenarios-of-business-use-cases" data-for="fruit/Diagraming/bizSys/externalView/sequence-diagrams-for-scenarios-of-business-use-cases">sequence-diagrams-for-scenarios-of-business-use-cases</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/bizSys/internalView"><button class="folder-button"><p class="folder-title">internalView</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/bizSys/internalView"><li><li><a href="../../../../fruit/Diagraming/bizSys/internalView/activity-diagram" data-for="fruit/Diagraming/bizSys/internalView/activity-diagram">activity-diagram</a></li></li><li><li><a href="../../../../fruit/Diagraming/bizSys/internalView/class-diagram" data-for="fruit/Diagraming/bizSys/internalView/class-diagram">class-diagram</a></li></li><li><li><a href="../../../../fruit/Diagraming/bizSys/internalView/constructing-class-diagrams" data-for="fruit/Diagraming/bizSys/internalView/constructing-class-diagrams">constructing-class-diagrams</a></li></li><li><li><a href="../../../../fruit/Diagraming/bizSys/internalView/constructing-package-diagrams" data-for="fruit/Diagraming/bizSys/internalView/constructing-package-diagrams">constructing-package-diagrams</a></li></li><li><li><a href="../../../../fruit/Diagraming/bizSys/internalView/package-diagram" data-for="fruit/Diagraming/bizSys/internalView/package-diagram">package-diagram</a></li></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/ITSys"><button class="folder-button"><p class="folder-title">ITSys</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/ITSys"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/ITSys/behavioralView"><button class="folder-button"><p class="folder-title">behavioralView</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/ITSys/behavioralView"><li><li><a href="../../../../fruit/Diagraming/ITSys/behavioralView/constructing-statechart-diagrams" data-for="fruit/Diagraming/ITSys/behavioralView/constructing-statechart-diagrams">constructing-statechart-diagrams</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/behavioralView/statechart-diagram" data-for="fruit/Diagraming/ITSys/behavioralView/statechart-diagram">statechart-diagram</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/behavioralView/the-elements-of-the-view" data-for="fruit/Diagraming/ITSys/behavioralView/the-elements-of-the-view">the-elements-of-the-view</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/behavioralView/the-life-of-an-object" data-for="fruit/Diagraming/ITSys/behavioralView/the-life-of-an-object">the-life-of-an-object</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/ITSys/externalView"><button class="folder-button"><p class="folder-title">externalView</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/ITSys/externalView"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/ITSys/externalView/the-elements-of-view"><button class="folder-button"><p class="folder-title">the-elements-of-view</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/ITSys/externalView/the-elements-of-view"><li><li><a href="../../../../fruit/Diagraming/ITSys/externalView/the-elements-of-view/use-case-diagram" data-for="fruit/Diagraming/ITSys/externalView/the-elements-of-view/use-case-diagram">use-case-diagram</a></li></li></ul></div></div></li><li><li><a href="../../../../fruit/Diagraming/ITSys/externalView/constructing-the-external-view" data-for="fruit/Diagraming/ITSys/externalView/constructing-the-external-view">constructing-the-external-view</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/externalView/query-events-and-mutation-events" data-for="fruit/Diagraming/ITSys/externalView/query-events-and-mutation-events">query-events-and-mutation-events</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/externalView/the-user-view-or-i-dont-care-how-it-works-as-long-as-it-works" data-for="fruit/Diagraming/ITSys/externalView/the-user-view-or-i-dont-care-how-it-works-as-long-as-it-works">the-user-view-or-i-dont-care-how-it-works-as-long-as-it-works</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/externalView/use-case-sequence-diagram" data-for="fruit/Diagraming/ITSys/externalView/use-case-sequence-diagram">use-case-sequence-diagram</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/ITSys/interactionView"><button class="folder-button"><p class="folder-title">interactionView</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/ITSys/interactionView"><li><li><a href="../../../../fruit/Diagraming/ITSys/interactionView/communication-diagram" data-for="fruit/Diagraming/ITSys/interactionView/communication-diagram">communication-diagram</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/interactionView/constructing-communication-diagrams" data-for="fruit/Diagraming/ITSys/interactionView/constructing-communication-diagrams">constructing-communication-diagrams</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/interactionView/constructing-sequence-diagrams" data-for="fruit/Diagraming/ITSys/interactionView/constructing-sequence-diagrams">constructing-sequence-diagrams</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/interactionView/elements-of-the-view" data-for="fruit/Diagraming/ITSys/interactionView/elements-of-the-view">elements-of-the-view</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/interactionView/seeing-what-happens-inside-the-it-system" data-for="fruit/Diagraming/ITSys/interactionView/seeing-what-happens-inside-the-it-system">seeing-what-happens-inside-the-it-system</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/interactionView/sequence-diagram" data-for="fruit/Diagraming/ITSys/interactionView/sequence-diagram">sequence-diagram</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/ITSys/structuralView"><button class="folder-button"><p class="folder-title">structuralView</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/ITSys/structuralView"><li><li><a href="../../../../fruit/Diagraming/ITSys/structuralView/class-diagram" data-for="fruit/Diagraming/ITSys/structuralView/class-diagram">class-diagram</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/structuralView/constructing-class-diagrams" data-for="fruit/Diagraming/ITSys/structuralView/constructing-class-diagrams">constructing-class-diagrams</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/structuralView/elements-of-the-view" data-for="fruit/Diagraming/ITSys/structuralView/elements-of-the-view">elements-of-the-view</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/structuralView/generalization-specialization-and-inheritance" data-for="fruit/Diagraming/ITSys/structuralView/generalization-specialization-and-inheritance">generalization-specialization-and-inheritance</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/structuralView/objects-and-classes" data-for="fruit/Diagraming/ITSys/structuralView/objects-and-classes">objects-and-classes</a></li></li><li><li><a href="../../../../fruit/Diagraming/ITSys/structuralView/static-and-dynamic-business-rules" data-for="fruit/Diagraming/ITSys/structuralView/static-and-dynamic-business-rules">static-and-dynamic-business-rules</a></li></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/prepIntegr"><button class="folder-button"><p class="folder-title">prepIntegr</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/prepIntegr"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/prepIntegr/processView"><button class="folder-button"><p class="folder-title">processView</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/prepIntegr/processView"><li><li><a href="../../../../fruit/Diagraming/prepIntegr/processView/activity-diagrams" data-for="fruit/Diagraming/prepIntegr/processView/activity-diagrams">activity-diagrams</a></li></li><li><li><a href="../../../../fruit/Diagraming/prepIntegr/processView/constructing-diagrams-in-the-process-view" data-for="fruit/Diagraming/prepIntegr/processView/constructing-diagrams-in-the-process-view">constructing-diagrams-in-the-process-view</a></li></li><li><li><a href="../../../../fruit/Diagraming/prepIntegr/processView/elements-of-the-view" data-for="fruit/Diagraming/prepIntegr/processView/elements-of-the-view">elements-of-the-view</a></li></li><li><li><a href="../../../../fruit/Diagraming/prepIntegr/processView/sequence-diagram" data-for="fruit/Diagraming/prepIntegr/processView/sequence-diagram">sequence-diagram</a></li></li><li><li><a href="../../../../fruit/Diagraming/prepIntegr/processView/the-business-system-model-as-foundation" data-for="fruit/Diagraming/prepIntegr/processView/the-business-system-model-as-foundation">the-business-system-model-as-foundation</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/prepIntegr/staticView"><button class="folder-button"><p class="folder-title">staticView</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/prepIntegr/staticView"><li><li><a href="../../../../fruit/Diagraming/prepIntegr/staticView/class-diagram" data-for="fruit/Diagraming/prepIntegr/staticView/class-diagram">class-diagram</a></li></li><li><li><a href="../../../../fruit/Diagraming/prepIntegr/staticView/constructing-class-diagrams" data-for="fruit/Diagraming/prepIntegr/staticView/constructing-class-diagrams">constructing-class-diagrams</a></li></li><li><li><a href="../../../../fruit/Diagraming/prepIntegr/staticView/elements-of-the-view" data-for="fruit/Diagraming/prepIntegr/staticView/elements-of-the-view">elements-of-the-view</a></li></li><li><li><a href="../../../../fruit/Diagraming/prepIntegr/staticView/transformation-of-uml-messages-into-various-stan" data-for="fruit/Diagraming/prepIntegr/staticView/transformation-of-uml-messages-into-various-stan">transformation-of-uml-messages-into-various-stan</a></li></li><li><li><a href="../../../../fruit/Diagraming/prepIntegr/staticView/transforming-data-from-the-it-system-to-the-mess" data-for="fruit/Diagraming/prepIntegr/staticView/transforming-data-from-the-it-system-to-the-mess">transforming-data-from-the-it-system-to-the-mess</a></li></li></ul></div></div></li></ul></div></div></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/seed"><button class="folder-button"><p class="folder-title">seed</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/seed"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/seed/computing"><button class="folder-button"><p class="folder-title">computing</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/seed/computing"><li><li><a href="../../../../seed/computing/ployglot-(computing)" data-for="seed/computing/ployglot-(computing)">ployglot (computing)</a></li></li><li><li><a href="../../../../seed/computing/Seeding-(computing)" data-for="seed/computing/Seeding-(computing)">Seeding (computing)</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/seed/software development"><button class="folder-button"><p class="folder-title">software development</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/seed/software development"><li><li><a href="../../../../seed/software-development/artifact-(software-development)" data-for="seed/software-development/artifact-(software-development)">artifact (software development)</a></li></li><li><li><a href="../../../../seed/software-development/Generic-function" data-for="seed/software-development/Generic-function">Generic function</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/seed/Unix"><button class="folder-button"><p class="folder-title">Unix</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/seed/Unix"><li><li><a href="../../../../seed/Unix/Shebang-(Unix)" data-for="seed/Unix/Shebang-(Unix)">Shebang (Unix)</a></li></li></ul></div></div></li><li><li><a href="../../../../seed/artifact" data-for="seed/artifact">artifact</a></li></li><li><li><a href="../../../../seed/polyglot" data-for="seed/polyglot">polyglot</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/tree"><button class="folder-button"><p class="folder-title">tree</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/tree"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/tree/Product Design"><button class="folder-button"><p class="folder-title">Product Design</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/tree/Product Design"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/tree/Product Design/Design"><button class="folder-button"><p class="folder-title">Design</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/tree/Product Design/Design"><li><li><a href="../../../../tree/Product-Design/Design/Business-Model-Canvas" data-for="tree/Product-Design/Design/Business-Model-Canvas">Business Model Canvas</a></li></li><li><li><a href="../../../../tree/Product-Design/Design/Call-to-Action" data-for="tree/Product-Design/Design/Call-to-Action">Call to Action</a></li></li><li><li><a href="../../../../tree/Product-Design/Design/Cheating" data-for="tree/Product-Design/Design/Cheating">Cheating</a></li></li><li><li><a href="../../../../tree/Product-Design/Design/Deploy-Social-Proof" data-for="tree/Product-Design/Design/Deploy-Social-Proof">Deploy Social Proof</a></li></li><li><li><a href="../../../../tree/Product-Design/Design/Incremental-A,-B-Testing" data-for="tree/Product-Design/Design/Incremental-A,-B-Testing">Incremental A, B Testing</a></li></li><li><li><a href="../../../../tree/Product-Design/Design/Lean-Canvas" data-for="tree/Product-Design/Design/Lean-Canvas">Lean Canvas</a></li></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/tree/Software Development"><button class="folder-button"><p class="folder-title">Software Development</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/tree/Software Development"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/tree/Software Development/Architecture"><button class="folder-button"><p class="folder-title">Architecture</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/tree/Software Development/Architecture"><li><li><a href="../../../../tree/Software-Development/Architecture/Untitled" data-for="tree/Software-Development/Architecture/Untitled">Untitled</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/tree/Software Development/Project Layout"><button class="folder-button"><p class="folder-title">Project Layout</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/tree/Software Development/Project Layout"><li><li><a href="../../../../tree/Software-Development/Project-Layout/Untitled" data-for="tree/Software-Development/Project-Layout/Untitled">Untitled</a></li></li></ul></div></div></li></ul></div></div></li></ul></div></div></li><li><li><a href="../../../../Applications" data-for="Applications">Applications</a></li></li><li><li><a href="../../../../Inbox" data-for="Inbox">Inbox</a></li></li></ul></div></div></li><li id="explorer-end"></li></ul></div></div></div><div class="center"><div class="page-header"><div class="popover-hint"><nav class="breadcrumb-container " aria-label="breadcrumbs"><div class="breadcrumb-element"><a href="../../../..">Home</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../../../flower/">flower</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../../../flower/testing/">testing</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../../../flower/testing/go/">go</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../../../flower/testing/go/testing_fundamentals/">testing_fundamentals</a><p> ❯ </p></div><div class="breadcrumb-element"><a href>scaling-acceptance-tests</a></div></nav><h1 class="article-title ">scaling-acceptance-tests</h1><p class="content-meta ">Dec 22, 2023, 43 min read</p></div></div><article class="popover-hint"><h1 id="learn-go-with-tests---scaling-acceptance-tests-and-light-intro-to-grpc">Learn Go with Tests - Scaling Acceptance Tests (and light intro to gRPC)<a aria-hidden="true" tabindex="-1" href="#learn-go-with-tests---scaling-acceptance-tests-and-light-intro-to-grpc" class="internal alias"> §</a></h1>
<p>This chapter is a follow-up to <a href="https://quii.gitbook.io/learn-go-with-tests/testing-fundamentals/intro-to-acceptance-tests" class="external alias">Intro to acceptance tests</a>. You can find <a href="https://github.com/quii/go-specs-greet" class="external alias">the finished code for this chapter on GitHub</a>.</p>
<p>Acceptance tests are essential, and they directly impact your ability to confidently evolve your system over time, with a reasonable cost of change.</p>
<p>They’re also a fantastic tool to help you work with legacy code. When faced with a poor codebase without any tests, please resist the temptation to start refactoring. Instead, write some acceptance tests to give you a safety net to freely change the system’s internals without affecting its functional external behaviour. ATs need not be concerned with internal quality, so they’re a great fit in these situations.</p>
<p>After reading this, you’ll appreciate that acceptance tests are useful for verification and can also be used in the development process by helping us change our system more deliberately and methodically, reducing wasted effort.</p>
<h2 id="prerequisite-material">Prerequisite material<a aria-hidden="true" tabindex="-1" href="#prerequisite-material" class="internal alias"> §</a></h2>
<p>The inspiration for this chapter is borne of many years of frustration with acceptance tests. Two videos I would recommend you watch are:</p>
<ul>
<li>Dave Farley - <a href="https://www.youtube.com/watch?v=JDD5EEJgpHU" class="external alias">How to write acceptance tests</a></li>
<li>Nat Pryce - <a href="https://www.youtube.com/watch?v=Fk4rCn4YLLU" class="external alias">E2E functional tests that can run in milliseconds</a></li>
</ul>
<p>“Growing Object Oriented Software” (GOOS) is such an important book for many software engineers, including myself. The approach it prescribes is the one I coach engineers I work with to follow.</p>
<ul>
<li><a href="http://www.growing-object-oriented-software.com" class="external alias">GOOS</a> - Nat Pryce &amp; Steve Freeman</li>
</ul>
<p>Finally, <a href="https://twitter.com/dattaniriya" class="external alias">Riya Dattani</a> and I spoke about this topic in the context of BDD in our talk, <a href="https://www.youtube.com/watch?v=ZMWJCk_0WrY" class="external alias">Acceptance tests, BDD and Go</a>.</p>
<h2 id="recap">Recap<a aria-hidden="true" tabindex="-1" href="#recap" class="internal alias"> §</a></h2>
<p>We’re talking about “black-box” tests that verify your system behaves as expected from the outside, from a ”<strong>business perspective</strong>”. The tests do not have access to the innards of the system it tests; they’re only concerned with <strong>what</strong> your system does rather than <strong>how</strong>.</p>
<h2 id="anatomy-of-bad-acceptance-tests">Anatomy of bad acceptance tests<a aria-hidden="true" tabindex="-1" href="#anatomy-of-bad-acceptance-tests" class="internal alias"> §</a></h2>
<p>Over many years, I’ve worked for several companies and teams. Each of them recognised the need for acceptance tests; some way to test a system from a user’s point of view and to verify it works how it’s intended, but almost without exception, the cost of these tests became a real problem for the team.</p>
<ul>
<li>Slow to run</li>
<li>Brittle</li>
<li>Flaky</li>
<li>Expensive to maintain, and seem to make changing the software harder than it ought to be</li>
<li>Can only run in a particular environment, causing slow and poor feedback loops</li>
</ul>
<p>Let’s say you intend to write an acceptance test around a website you’re building. You decide to use a headless web browser (like <a href="https://www.selenium.dev" class="external alias">Selenium</a>) to simulate a user clicking buttons on your website to verify it does what it needs to do.</p>
<p>Over time, your website’s markup has to change as new features are discovered, and engineers bike-shed over whether something should be an <code>&lt;article></code> or a <code>&lt;section></code> for the billionth time.</p>
<p>Even though your team are only making minor changes to the system, barely noticeable to the actual user, you find yourself wasting lots of time updating your ATs.</p>
<h3 id="tight-coupling">Tight-coupling<a aria-hidden="true" tabindex="-1" href="#tight-coupling" class="internal alias"> §</a></h3>
<p>Think about what prompts acceptance tests to change:</p>
<ul>
<li>An external behaviour change. If you want to change what the system does, changing the acceptance test suite seems reasonable, if not desirable.</li>
<li>An implementation detail change / refactoring. Ideally, this shouldn’t prompt a change, or if it does, a minor one.</li>
</ul>
<p>Too often, though, the latter is the reason acceptance tests have to change. To the point where engineers even become reluctant to change their system because of the perceived effort of updating tests!</p>
<p><img src="https://i.imgur.com/bbG6z57.png" alt="Riya and myself talking about separating concerns in our tests"/></p>
<p>These problems stem from not applying well-established and practised engineering habits written by the authors mentioned above. <strong>You can’t write acceptance tests like unit tests</strong>; they require more thought and different practices.</p>
<h2 id="anatomy-of-good-acceptance-tests">Anatomy of good acceptance tests<a aria-hidden="true" tabindex="-1" href="#anatomy-of-good-acceptance-tests" class="internal alias"> §</a></h2>
<p>If we want acceptance tests that only change when we change behaviour and not implementation detail, it stands to reason that we need to separate those concerns.</p>
<h3 id="on-types-of-complexity">On types of complexity<a aria-hidden="true" tabindex="-1" href="#on-types-of-complexity" class="internal alias"> §</a></h3>
<p>As software engineers, we have to deal with two kinds of complexity.</p>
<ul>
<li>
<p><strong>Accidental complexity</strong> is the complexity we have to deal with because we’re working with computers, stuff like networks, disks, APIs, etc.</p>
</li>
<li>
<p><strong>Essential complexity</strong> is sometimes referred to as “domain logic”. It’s the particular rules and truths within your domain.</p>
<ul>
<li>For example, “if an account owner withdraws more money than is available, they are overdrawn”. This statement says nothing about computers; this statement was true before computers were even used in banks!</li>
</ul>
</li>
</ul>
<p>Essential complexity should be expressible to a non-technical person, and it’s valuable to have modelled it in our “domain” code, and in our acceptance tests.</p>
<h3 id="separation-of-concerns">Separation of concerns<a aria-hidden="true" tabindex="-1" href="#separation-of-concerns" class="internal alias"> §</a></h3>
<p>What Dave Farley proposed in the video earlier, and what Riya and I also discussed, is we should have the idea of <strong>specifications</strong>. Specifications describe the behaviour of the system we want without being coupled with accidental complexity or implementation detail.</p>
<p>This idea should feel reasonable to you. In production code, we frequently strive to separate concerns and decouple units of work. Would you not hesitate to introduce an <code>interface</code> to allow your <code>HTTP</code> handler to decouple it from non-HTTP concerns? Let’s take this same line of thinking for our acceptance tests.</p>
<p>Dave Farley describes a specific structure.</p>
<p><img src="https://i.imgur.com/nPwpihG.png" alt="Dave Farley on Acceptance Tests"/></p>
<p>At GopherconUK, Riya and I put this in Go terms.</p>
<p><img src="https://i.imgur.com/qdY4RJe.png" alt="Separation of concerns"/></p>
<h3 id="testing-on-steroids">Testing on steroids<a aria-hidden="true" tabindex="-1" href="#testing-on-steroids" class="internal alias"> §</a></h3>
<p>Decoupling how the specification is executed allows us to reuse it in different scenarios. We can:</p>
<h4 id="make-our-drivers-configurable">Make our drivers configurable<a aria-hidden="true" tabindex="-1" href="#make-our-drivers-configurable" class="internal alias"> §</a></h4>
<p>This means you can run your ATs locally, in your staging and (ideally) production environments.</p>
<ul>
<li>Too many teams engineer their systems such that acceptance tests are impossible to run locally. This introduces an intolerably slow feedback loop. Wouldn’t you rather be confident your ATs will pass <em>before</em> integrating your code? If the tests start breaking, is it acceptable that you’d be unable to reproduce the failure locally and instead, have to commit changes and cross your fingers that it’ll pass 20 minutes later in a different environment?</li>
<li>Remember, just because your tests pass in staging doesn’t mean your system will work. Dev/Prod parity is, at best, a white lie. <a href="https://increment.com/testing/i-test-in-production/" class="external alias">I test in prod</a>.</li>
<li>There are always differences between the environments that can affect the <em>behaviour</em> of your system. A CDN could have some cache headers incorrectly set; a downstream service you depend on may behave differently; a configuration value may be incorrect. But wouldn’t it be nice if you could run your specifications in prod to catch these problems quickly?</li>
</ul>
<h4 id="plug-in-different-drivers-to-test-other-parts-of-your-system">Plug in <em>different</em> drivers to test other parts of your system<a aria-hidden="true" tabindex="-1" href="#plug-in-different-drivers-to-test-other-parts-of-your-system" class="internal alias"> §</a></h4>
<p>This flexibility allows us to test behaviours at different abstraction and architectural layers, which allows us to have more focused tests beyond black-box tests.</p>
<ul>
<li>For instance, you may have a web page with an API behind it. Why not use the same specification to test both? You can use a headless web browser for the web page, and HTTP calls for the API.</li>
<li>Taking this idea further, ideally, we want the <strong>code to model essential complexity</strong> (as “domain” code) so we should also be able to use our specifications for unit tests. This will give swift feedback that the essential complexity in our system is modelled and behaves correctly.</li>
</ul>
<h3 id="acceptance-tests-changing-for-the-right-reasons">Acceptance tests changing for the right reasons<a aria-hidden="true" tabindex="-1" href="#acceptance-tests-changing-for-the-right-reasons" class="internal alias"> §</a></h3>
<p>With this approach, the only reason for your specifications to change is if the behaviour of the system changes, which is reasonable.</p>
<ul>
<li>If your HTTP API has to change, you have one obvious place to update it, the driver.</li>
<li>If your markup changes, again, update the specific driver.</li>
</ul>
<p>As your system grows, you’ll find yourself reusing drivers for multiple tests, which again means if implementation detail changes, you only have to update one, usually obvious place.</p>
<p>When done right, this approach gives us flexibility in our implementation detail and stability in our specifications. Importantly, it provides a simple and obvious structure for managing change, which becomes essential as a system and its team grows.</p>
<h3 id="acceptance-tests-as-a-method-for-software-development">Acceptance tests as a method for software development<a aria-hidden="true" tabindex="-1" href="#acceptance-tests-as-a-method-for-software-development" class="internal alias"> §</a></h3>
<p>In our talk, Riya and I discussed acceptance tests and their relation to BDD. We talked about how starting your work by trying to <em>understand the problem you’re trying to solve</em> and expressing it as a specification helps focus your intent and is a great way to start your work.</p>
<p>I was first introduced to this way of working in GOOS. A while ago, I summarised the ideas on my blog. Here is an extract from my post <a href="https://quii.dev/The_Why_of_TDD" class="external alias">Why TDD</a></p>
<hr/>
<p>TDD is focused on letting you design for the behaviour you precisely need, iteratively. When starting a new area, you must identify a key, necessary behaviour and aggressively cut scope.</p>
<p>Follow a “top-down” approach, starting with an acceptance test (AT) that exercises the behaviour from the outside. This will act as a north-star for your efforts. All you should be focused on is making that test pass. This test will likely be failing for a while whilst you develop enough code to make it pass.</p>
<p><img src="https://i.imgur.com/pxTaYu4.png" alt/></p>
<p>Once your AT is set up, you can break into the TDD process to drive out enough units to make the AT pass. The trick is to not worry too much about design at this point; get enough code to make the AT pass because you’re still learning and exploring the problem.</p>
<p>Taking this first step is often more extensive than you think, setting up web servers, routing, configuration, etc., which is why keeping the scope of the work small is essential. We want to make that first positive step on our blank canvas and have it backed by a passing AT so we can continue to iterate quickly and safely.</p>
<p><img src="https://i.imgur.com/t5y5opw.png" alt/></p>
<p>As you develop, listen to your tests, and they should give you signals to help you push your design in a better direction but, again, anchored to the behaviour rather than our imagination.</p>
<p>Typically, your first “unit” that does the hard work to make the AT pass will grow too big to be comfortable, even for this small amount of behaviour. This is when you can start thinking about how to break the problem down and introduce new collaborators.</p>
<p><img src="https://i.imgur.com/UYqd7Cq.png" alt/></p>
<p>This is where test doubles (e.g. fakes, mocks) are handy because most of the complexity that lives internally within software doesn’t usually reside in implementation detail but “between” the units and how they interact.</p>
<h4 id="the-perils-of-bottom-up">The perils of bottom-up<a aria-hidden="true" tabindex="-1" href="#the-perils-of-bottom-up" class="internal alias"> §</a></h4>
<p>This is a “top-down” approach rather than a “bottom-up”. Bottom-up has its uses, but it carries an element of risk. By building “services” and code without it being integrated into your application quickly and without verifying a high-level test, <strong>you risk wasting lots of effort on unvalidated ideas</strong>.</p>
<p>This is a crucial property of the acceptance-test-driven approach, using tests to get real validation of our code.</p>
<p>Too many times, I’ve encountered engineers who have made a chunk of code, in isolation, bottom-up, they think is going to solve a job, but it:</p>
<ul>
<li>Doesn’t work how we want to</li>
<li>Does stuff we don’t need</li>
<li>Doesn’t integrate easily</li>
<li>Requires a ton of re-writing anyway</li>
</ul>
<p>This is waste.</p>
<h2 id="enough-talk-time-to-code">Enough talk, time to code<a aria-hidden="true" tabindex="-1" href="#enough-talk-time-to-code" class="internal alias"> §</a></h2>
<p>Unlike other chapters, you’ll need <a href="https://www.docker.com" class="external alias">Docker</a> installed because we’ll be running our applications in containers. It’s assumed at this point in the book you’re comfortable writing Go code, importing from different packages, etc.</p>
<p>Create a new project with <code>go mod init github.com/quii/go-specs-greet</code> (you can put whatever you like here but if you change the path you will need to change all internal imports to match)</p>
<p>Make a folder <code>specifications</code> to hold our specifications, and add a file <code>greet.go</code></p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">package</span><span style="color:var(--shiki-color-text);"> specifications</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;testing&quot;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;github.com/alecthomas/assert/v2&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Greeter</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">interface</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">Greet</span><span style="color:var(--shiki-color-text);">() (</span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">GreetSpecification</span><span style="color:var(--shiki-color-text);">(t testing.TB, greeter Greeter) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	got, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> greeter.</span><span style="color:var(--shiki-token-function);">Greet</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	assert.</span><span style="color:var(--shiki-token-function);">NoError</span><span style="color:var(--shiki-color-text);">(t, err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	assert.</span><span style="color:var(--shiki-token-function);">Equal</span><span style="color:var(--shiki-color-text);">(t, got, </span><span style="color:var(--shiki-token-string-expression);">&quot;Hello, world&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>My IDE (Goland) takes care of the fuss of adding dependencies for me, but if you need to do it manually, you’d do</p>
<p><code>go get github.com/alecthomas/assert/v2</code></p>
<p>Given Farley’s acceptance test design (Specification->DSL->Driver->System), we now have a decoupled specification from implementation. It doesn’t know or care about <em>how</em> we <code>Greet</code>; it’s just concerned with the essential complexity of our domain. Admittedly this complexity isn’t much right now, but we’ll expand upon the spec to add more functionality as we further iterate. It’s always important to start small!</p>
<p>You could view the interface as our first step of a DSL; as the project grows, you may find the need to abstract differently, but for now, this is fine.</p>
<p>At this point, this level of ceremony to decouple our specification from implementation might make some people accuse us of “overly abstracting”. <strong>I promise you that acceptance tests that are too coupled to implementation become a real burden on engineering teams</strong>. I am confident that most acceptance tests out in the wild are expensive to maintain due to this inappropriate coupling; rather than the reverse of being overly abstract.</p>
<p>We can use this specification to verify any “system” that can <code>Greet</code>.</p>
<h3 id="first-system-http-api">First system: HTTP API<a aria-hidden="true" tabindex="-1" href="#first-system-http-api" class="internal alias"> §</a></h3>
<p>We require to provide a “greeter service” over HTTP. So we’ll need to create:</p>
<ol>
<li>A <strong>driver</strong>. In this case, one works with an HTTP system by using an <strong>HTTP client</strong>. This code will know how to work with our API. Drivers translate DSLs into system-specific calls; in our case, the driver will implement the interface specifications define.</li>
<li>An <strong>HTTP server</strong> with a greet API</li>
<li>A <strong>test</strong>, which is responsible for managing the life-cycle of spinning up the server and then plugging the driver into the specification to run it as a test</li>
</ol>
<h2 id="write-the-test-first">Write the test first<a aria-hidden="true" tabindex="-1" href="#write-the-test-first" class="internal alias"> §</a></h2>
<p>The initial process for creating a black-box test that compiles and runs your program, executes the test and then cleans everything up can be quite labour intensive. That’s why it’s preferable to do it at the start of your project with minimal functionality. I typically start all my projects with a “hello world” server implementation, with all of my tests set up and ready for me to build the actual functionality quickly.</p>
<p>The mental model of “specifications”, “drivers”, and “acceptance tests” can take a little time to get used to, so follow carefully. It can be helpful to “work backwards” by trying to call the specification first.</p>
<p>Create some structure to house the program we intend to ship.</p>
<p><code>mkdir -p cmd/httpserver</code></p>
<p>Inside the new folder, create a new file <code>greeter_server_test.go</code>, and add the following.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">package</span><span style="color:var(--shiki-color-text);"> main_test</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;testing&quot;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;github.com/quii/go-specs-greet/specifications&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">TestGreeterServer</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	specifications.</span><span style="color:var(--shiki-token-function);">GreetSpecification</span><span style="color:var(--shiki-color-text);">(t, </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>We wish to run our specification in a Go test. We already have access to a <code>*testing.T</code>, so that’s the first argument, but what about the second?</p>
<p><code>specifications.Greeter</code> is an interface, which we will implement with a <code>Driver</code> by changing the new TestGreeterServer code to the following:</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	go_specs_greet </span><span style="color:var(--shiki-token-string-expression);">&quot;github.com/quii/go-specs-greet&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">TestGreeterServer</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	driver </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> go_specs_greet.Driver{BaseURL: </span><span style="color:var(--shiki-token-string-expression);">&quot;http://localhost:8080&quot;</span><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	specifications.</span><span style="color:var(--shiki-token-function);">GreetSpecification</span><span style="color:var(--shiki-color-text);">(t, driver)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>It would be favourable for our <code>Driver</code> to be configurable to run it against different environments, including locally, so we have added a <code>BaseURL</code> field.</p>
<h2 id="try-to-run-the-test">Try to run the test<a aria-hidden="true" tabindex="-1" href="#try-to-run-the-test" class="internal alias"> §</a></h2>
<pre><code>./greeter_server_test.go:46:12: undefined: go_specs_greet.Driver
</code></pre>
<p>We’re still practising TDD here! It’s a big first step we have to make; we need to make a few files and write maybe more code than we’re typically used to, but when you’re first starting, this is often the case. It’s so important we try to remember the red step’s rules.</p>
<blockquote>
<p>Commit as many sins as necessary to get the test passing</p>
</blockquote>
<h2 id="write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output">Write the minimal amount of code for the test to run and check the failing test output<a aria-hidden="true" tabindex="-1" href="#write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output" class="internal alias"> §</a></h2>
<p>Hold your nose; remember, we can refactor when the test has passed. Here’s the code for the driver in <code>driver.go</code> which we will place in the project root:</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">package</span><span style="color:var(--shiki-color-text);"> go_specs_greet</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;io&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;net/http&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Driver</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">struct</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	BaseURL </span><span style="color:var(--shiki-token-keyword);">string</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (d Driver) </span><span style="color:var(--shiki-token-function);">Greet</span><span style="color:var(--shiki-color-text);">() (</span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	res, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> http.</span><span style="color:var(--shiki-token-function);">Get</span><span style="color:var(--shiki-color-text);">(d.BaseURL </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;/greet&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;&quot;</span><span style="color:var(--shiki-color-text);">, err</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">defer</span><span style="color:var(--shiki-color-text);"> res.Body.</span><span style="color:var(--shiki-token-function);">Close</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	greeting, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> io.</span><span style="color:var(--shiki-token-function);">ReadAll</span><span style="color:var(--shiki-color-text);">(res.Body)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;&quot;</span><span style="color:var(--shiki-color-text);">, err</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">string</span><span style="color:var(--shiki-color-text);">(greeting), </span><span style="color:var(--shiki-token-constant);">nil</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Notes:</p>
<ul>
<li>You could argue that I should be writing tests to drive out the various <code>if err != nil</code>, but in my experience, so long as you’re not doing anything with the <code>err</code>, tests that say “you return the error you get” are relatively low value.</li>
<li><strong>You shouldn’t use the default HTTP client</strong>. Later we’ll pass in an HTTP client to configure it with timeouts etc., but for now, we’re just trying to get ourselves to a passing test.</li>
<li>In our <code>greeter_server_test.go</code> we called the Driver function from <code>go_specs_greet</code> package which we have now created, don’t forget to add <code>github.com/quii/go-specs-greet</code> to its imports.
Try and rerun the tests; they should now compile but not pass.</li>
</ul>
<pre><code>Get &quot;http://localhost:8080/greet&quot;: dial tcp [::1]:8080: connect: connection refused
</code></pre>
<p>We have a <code>Driver</code>, but we have not started our application yet, so it cannot do an HTTP request. We need our acceptance test to coordinate building, running and finally killing our system for the test to run.</p>
<h3 id="running-our-application">Running our application<a aria-hidden="true" tabindex="-1" href="#running-our-application" class="internal alias"> §</a></h3>
<p>It’s common for teams to build Docker images of their systems to deploy, so for our test we’ll do the same</p>
<p>To help us use Docker in our tests, we will use <a href="https://golang.testcontainers.org" class="external alias">Testcontainers</a>. Testcontainers gives us a programmatic way to build Docker images and manage container life-cycles.</p>
<p><code>go get github.com/testcontainers/testcontainers-go</code></p>
<p>Now you can edit <code>cmd/httpserver/greeter_server_test.go</code> to read as follows:</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">package</span><span style="color:var(--shiki-color-text);"> main_test</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;context&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;testing&quot;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;github.com/alecthomas/assert/v2&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	go_specs_greet </span><span style="color:var(--shiki-token-string-expression);">&quot;github.com/quii/go-specs-greet&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;github.com/quii/go-specs-greet/specifications&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;github.com/testcontainers/testcontainers-go&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;github.com/testcontainers/testcontainers-go/wait&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">TestGreeterServer</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	ctx </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> context.</span><span style="color:var(--shiki-token-function);">Background</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	req </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> testcontainers.ContainerRequest{</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		FromDockerfile: testcontainers.FromDockerfile{</span></span>
<span data-line><span style="color:var(--shiki-color-text);">			Context:    </span><span style="color:var(--shiki-token-string-expression);">&quot;../../.&quot;</span><span style="color:var(--shiki-color-text);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">			Dockerfile: </span><span style="color:var(--shiki-token-string-expression);">&quot;./cmd/httpserver/Dockerfile&quot;</span><span style="color:var(--shiki-color-text);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">			</span><span style="color:var(--shiki-token-comment);">// set to false if you want less spam, but this is helpful if you're having troubles</span></span>
<span data-line><span style="color:var(--shiki-color-text);">			PrintBuildLog: </span><span style="color:var(--shiki-token-constant);">true</span><span style="color:var(--shiki-color-text);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		},</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		ExposedPorts: []</span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">{</span><span style="color:var(--shiki-token-string-expression);">&quot;8080:8080&quot;</span><span style="color:var(--shiki-color-text);">},</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		WaitingFor:   wait.</span><span style="color:var(--shiki-token-function);">ForHTTP</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;/&quot;</span><span style="color:var(--shiki-color-text);">).</span><span style="color:var(--shiki-token-function);">WithPort</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;8080&quot;</span><span style="color:var(--shiki-color-text);">),</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	container, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> testcontainers.</span><span style="color:var(--shiki-token-function);">GenericContainer</span><span style="color:var(--shiki-color-text);">(ctx, testcontainers.GenericContainerRequest{</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		ContainerRequest: req,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		Started:          </span><span style="color:var(--shiki-token-constant);">true</span><span style="color:var(--shiki-color-text);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	})</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	assert.</span><span style="color:var(--shiki-token-function);">NoError</span><span style="color:var(--shiki-color-text);">(t, err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	t.</span><span style="color:var(--shiki-token-function);">Cleanup</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">() {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		assert.</span><span style="color:var(--shiki-token-function);">NoError</span><span style="color:var(--shiki-color-text);">(t, container.</span><span style="color:var(--shiki-token-function);">Terminate</span><span style="color:var(--shiki-color-text);">(ctx))</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	})</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	driver </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> go_specs_greet.Driver{BaseURL: </span><span style="color:var(--shiki-token-string-expression);">&quot;http://localhost:8080&quot;</span><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	specifications.</span><span style="color:var(--shiki-token-function);">GreetSpecification</span><span style="color:var(--shiki-color-text);">(t, driver)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Try and run the test.</p>
<pre><code>=== RUN   TestGreeterHandler
2022/09/10 18:49:44 Starting container id: 03e8588a1be4 image: docker.io/testcontainers/ryuk:0.3.3
2022/09/10 18:49:45 Waiting for container id 03e8588a1be4 image: docker.io/testcontainers/ryuk:0.3.3
2022/09/10 18:49:45 Container is ready id: 03e8588a1be4 image: docker.io/testcontainers/ryuk:0.3.3
    greeter_server_test.go:32: Did not expect an error but got:
        Error response from daemon: Cannot locate specified Dockerfile: ./cmd/httpserver/Dockerfile: failed to create container
--- FAIL: TestGreeterHandler (0.59s)
</code></pre>
<p>We need to create a Dockerfile for our program. Inside our <code>httpserver</code> folder, create a <code>Dockerfile</code> and add the following.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="dockerfile" data-theme="default"><code data-language="dockerfile" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">FROM</span><span style="color:var(--shiki-color-text);"> golang:1.18-alpine</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">WORKDIR</span><span style="color:var(--shiki-color-text);"> /app</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">COPY</span><span style="color:var(--shiki-color-text);"> go.mod ./</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">RUN</span><span style="color:var(--shiki-color-text);"> go mod download</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">COPY</span><span style="color:var(--shiki-color-text);"> . .</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">RUN</span><span style="color:var(--shiki-color-text);"> go build -o svr cmd/httpserver/*.go</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">EXPOSE</span><span style="color:var(--shiki-color-text);"> 8080</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">CMD</span><span style="color:var(--shiki-color-text);"> [ </span><span style="color:var(--shiki-token-string-expression);">&quot;./svr&quot;</span><span style="color:var(--shiki-color-text);"> ]</span></span></code></pre></div>
<p>Don’t worry too much about the details here; it can be refined and optimised, but for this example, it’ll suffice. The advantage of our approach here is we can later improve our Dockerfile and have a test to prove it works as we intend it to. This is a real strength of having black-box tests!</p>
<p>Try and rerun the test; it should complain about not being able to build the image. Of course, that’s because we haven’t written a program to build yet!</p>
<p>For the test to fully execute, we’ll need to create a program that listens on <code>8080</code>, but <strong>that’s all</strong>. Stick to the TDD discipline, don’t write the production code that would make the test pass until we’ve verified the test fails as we’d expect.</p>
<p>Create a <code>main.go</code> inside our <code>httpserver</code> folder with the following</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">package</span><span style="color:var(--shiki-color-text);"> main</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;log&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;net/http&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">main</span><span style="color:var(--shiki-color-text);">() {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	handler </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> http.</span><span style="color:var(--shiki-token-function);">HandlerFunc</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">(writer http.ResponseWriter, request </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">http.Request) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	})</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> http.</span><span style="color:var(--shiki-token-function);">ListenAndServe</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;:8080&quot;</span><span style="color:var(--shiki-color-text);">, handler); err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		log.</span><span style="color:var(--shiki-token-function);">Fatal</span><span style="color:var(--shiki-color-text);">(err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Try to run the test again, and it should fail with the following.</p>
<pre><code>    greet.go:16: Expected values to be equal:
        +Hello, World
        \ No newline at end of file
--- FAIL: TestGreeterHandler (2.09s)
</code></pre>
<h2 id="write-enough-code-to-make-it-pass">Write enough code to make it pass<a aria-hidden="true" tabindex="-1" href="#write-enough-code-to-make-it-pass" class="internal alias"> §</a></h2>
<p>Update the handler to behave how our specification wants it to</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;fmt&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;log&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;net/http&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">main</span><span style="color:var(--shiki-color-text);">() {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	handler </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> http.</span><span style="color:var(--shiki-token-function);">HandlerFunc</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">(w http.ResponseWriter, _ </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">http.Request) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		fmt.</span><span style="color:var(--shiki-token-function);">Fprint</span><span style="color:var(--shiki-color-text);">(w, </span><span style="color:var(--shiki-token-string-expression);">&quot;Hello, world&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	})</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> http.</span><span style="color:var(--shiki-token-function);">ListenAndServe</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;:8080&quot;</span><span style="color:var(--shiki-color-text);">, handler); err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		log.</span><span style="color:var(--shiki-token-function);">Fatal</span><span style="color:var(--shiki-color-text);">(err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<h2 id="refactor">Refactor<a aria-hidden="true" tabindex="-1" href="#refactor" class="internal alias"> §</a></h2>
<p>Whilst this technically isn’t a refactor, we shouldn’t rely on the default HTTP client, so let’s change our Driver, so we can supply one, which our test will give.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;io&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;net/http&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Driver</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">struct</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	BaseURL </span><span style="color:var(--shiki-token-keyword);">string</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	Client  </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">http.Client</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (d Driver) </span><span style="color:var(--shiki-token-function);">Greet</span><span style="color:var(--shiki-color-text);">() (</span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	res, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> d.Client.</span><span style="color:var(--shiki-token-function);">Get</span><span style="color:var(--shiki-color-text);">(d.BaseURL </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;/greet&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;&quot;</span><span style="color:var(--shiki-color-text);">, err</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">defer</span><span style="color:var(--shiki-color-text);"> res.Body.</span><span style="color:var(--shiki-token-function);">Close</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	greeting, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> io.</span><span style="color:var(--shiki-token-function);">ReadAll</span><span style="color:var(--shiki-color-text);">(res.Body)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;&quot;</span><span style="color:var(--shiki-color-text);">, err</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">string</span><span style="color:var(--shiki-color-text);">(greeting), </span><span style="color:var(--shiki-token-constant);">nil</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>In our test in <code>cmd/httpserver/greeter_server_test.go</code>, update the creation of the driver to pass in a client.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">client </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> http.Client{</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	Timeout: </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);"> time.Second,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">driver </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> go_specs_greet.Driver{BaseURL: </span><span style="color:var(--shiki-token-string-expression);">&quot;http://localhost:8080&quot;</span><span style="color:var(--shiki-color-text);">, Client: </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">client}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">specifications.</span><span style="color:var(--shiki-token-function);">GreetSpecification</span><span style="color:var(--shiki-color-text);">(t, driver)</span></span></code></pre></div>
<p>It’s good practice to keep <code>main.go</code> as simple as possible; it should only be concerned with piecing together the building blocks you make into an application.</p>
<p>Create a file in the project root called <code>handler.go</code> and move our code into there.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">package</span><span style="color:var(--shiki-color-text);"> go_specs_greet</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;fmt&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;net/http&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Handler</span><span style="color:var(--shiki-color-text);">(w http.ResponseWriter, r </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">http.Request) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	fmt.</span><span style="color:var(--shiki-token-function);">Fprint</span><span style="color:var(--shiki-color-text);">(w, </span><span style="color:var(--shiki-token-string-expression);">&quot;Hello, world&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Update <code>main.go</code> to import and use the handler instead.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">package</span><span style="color:var(--shiki-color-text);"> main</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;net/http&quot;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	go_specs_greet </span><span style="color:var(--shiki-token-string-expression);">&quot;github.com/quii/go-specs-greet&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">main</span><span style="color:var(--shiki-color-text);">() {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	handler </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> http.</span><span style="color:var(--shiki-token-function);">HandlerFunc</span><span style="color:var(--shiki-color-text);">(go_specs_greet.Handler)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	http.</span><span style="color:var(--shiki-token-function);">ListenAndServe</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;:8080&quot;</span><span style="color:var(--shiki-color-text);">, handler)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<h2 id="reflect">Reflect<a aria-hidden="true" tabindex="-1" href="#reflect" class="internal alias"> §</a></h2>
<p>The first step felt like an effort. We’ve made several <code>go</code> files to create and test an HTTP handler that returns a hard-coded string. This “iteration 0” ceremony and setup will serve us well for further iterations.</p>
<p>Changing functionality should be simple and controlled by driving it through the specification and dealing with whatever changes it forces us to make. Now the <code>DockerFile</code> and <code>testcontainers</code> are set up for our acceptance test; we shouldn’t have to change these files unless the way we construct our application changes.</p>
<p>We’ll see this with our following requirement, greet a particular person.</p>
<h2 id="write-the-test-first-1">Write the test first<a aria-hidden="true" tabindex="-1" href="#write-the-test-first-1" class="internal alias"> §</a></h2>
<p>Edit our specification</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">package</span><span style="color:var(--shiki-color-text);"> specifications</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;testing&quot;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;github.com/alecthomas/assert/v2&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Greeter</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">interface</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">Greet</span><span style="color:var(--shiki-color-text);">(name </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) (</span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">GreetSpecification</span><span style="color:var(--shiki-color-text);">(t testing.TB, greeter Greeter) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	got, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> greeter.</span><span style="color:var(--shiki-token-function);">Greet</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;Mike&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	assert.</span><span style="color:var(--shiki-token-function);">NoError</span><span style="color:var(--shiki-color-text);">(t, err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	assert.</span><span style="color:var(--shiki-token-function);">Equal</span><span style="color:var(--shiki-color-text);">(t, got, </span><span style="color:var(--shiki-token-string-expression);">&quot;Hello, Mike&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>To allow us to greet specific people, we need to change the interface to our system to accept a <code>name</code> parameter.</p>
<h2 id="try-to-run-the-test-1">Try to run the test<a aria-hidden="true" tabindex="-1" href="#try-to-run-the-test-1" class="internal alias"> §</a></h2>
<pre><code>./greeter_server_test.go:48:39: cannot use driver (variable of type go_specs_greet.Driver) as type specifications.Greeter in argument to specifications.GreetSpecification:
	go_specs_greet.Driver does not implement specifications.Greeter (wrong type for Greet method)
		have Greet() (string, error)
		want Greet(name string) (string, error)
</code></pre>
<p>The change in the specification has meant our driver needs to be updated.</p>
<h2 id="write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output-1">Write the minimal amount of code for the test to run and check the failing test output<a aria-hidden="true" tabindex="-1" href="#write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output-1" class="internal alias"> §</a></h2>
<p>Update the driver so that it specifies a <code>name</code> query value in the request to ask for a particular <code>name</code> to be greeted.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;io&quot;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (d Driver) </span><span style="color:var(--shiki-token-function);">Greet</span><span style="color:var(--shiki-color-text);">(name </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) (</span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	res, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> d.Client.</span><span style="color:var(--shiki-token-function);">Get</span><span style="color:var(--shiki-color-text);">(d.BaseURL </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;/greet?name=&quot;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> name)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;&quot;</span><span style="color:var(--shiki-color-text);">, err</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">defer</span><span style="color:var(--shiki-color-text);"> res.Body.</span><span style="color:var(--shiki-token-function);">Close</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	greeting, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> io.</span><span style="color:var(--shiki-token-function);">ReadAll</span><span style="color:var(--shiki-color-text);">(res.Body)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;&quot;</span><span style="color:var(--shiki-color-text);">, err</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">string</span><span style="color:var(--shiki-color-text);">(greeting), </span><span style="color:var(--shiki-token-constant);">nil</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>The test should now run, and fail.</p>
<pre><code>    greet.go:16: Expected values to be equal:
        -Hello, world
        \ No newline at end of file
        +Hello, Mike
        \ No newline at end of file
--- FAIL: TestGreeterHandler (1.92s)
</code></pre>
<h2 id="write-enough-code-to-make-it-pass-1">Write enough code to make it pass<a aria-hidden="true" tabindex="-1" href="#write-enough-code-to-make-it-pass-1" class="internal alias"> §</a></h2>
<p>Extract the <code>name</code> from the request and greet.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;fmt&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;net/http&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Handler</span><span style="color:var(--shiki-color-text);">(w http.ResponseWriter, r </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">http.Request) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	fmt.</span><span style="color:var(--shiki-token-function);">Fprintf</span><span style="color:var(--shiki-color-text);">(w, </span><span style="color:var(--shiki-token-string-expression);">&quot;Hello, </span><span style="color:var(--shiki-token-constant);">%s</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, r.URL.</span><span style="color:var(--shiki-token-function);">Query</span><span style="color:var(--shiki-color-text);">().</span><span style="color:var(--shiki-token-function);">Get</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;name&quot;</span><span style="color:var(--shiki-color-text);">))</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>The test should now pass.</p>
<h2 id="refactor-1">Refactor<a aria-hidden="true" tabindex="-1" href="#refactor-1" class="internal alias"> §</a></h2>
<p>In <a href="https://github.com/quii/learn-go-with-tests/blob/main/http-handlers-revisited.md" class="external alias">HTTP Handlers Revisited,</a> we discussed how important it is for HTTP handlers should only be responsible for handling HTTP concerns; any “domain logic” should live outside of the handler. This allows us to develop domain logic in isolation from HTTP, making it simpler to test and understand.</p>
<p>Let’s pull apart these concerns.</p>
<p>Update our handler in <code>./handler.go</code> as follows:</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Handler</span><span style="color:var(--shiki-color-text);">(w http.ResponseWriter, r </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">http.Request) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	name </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> r.URL.</span><span style="color:var(--shiki-token-function);">Query</span><span style="color:var(--shiki-color-text);">().</span><span style="color:var(--shiki-token-function);">Get</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;name&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	fmt.</span><span style="color:var(--shiki-token-function);">Fprint</span><span style="color:var(--shiki-color-text);">(w, </span><span style="color:var(--shiki-token-function);">Greet</span><span style="color:var(--shiki-color-text);">(name))</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Create new file <code>./greet.go</code>:</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">package</span><span style="color:var(--shiki-color-text);"> go_specs_greet</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;fmt&quot;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Greet</span><span style="color:var(--shiki-color-text);">(name </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> fmt.</span><span style="color:var(--shiki-token-function);">Sprintf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;Hello, </span><span style="color:var(--shiki-token-constant);">%s</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, name)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<h2 id="a-slight-diversion-in-to-the-adapter-design-pattern">A slight diversion in to the “adapter” design pattern<a aria-hidden="true" tabindex="-1" href="#a-slight-diversion-in-to-the-adapter-design-pattern" class="internal alias"> §</a></h2>
<p>Now that we’ve separated our domain logic of greeting people into a separate function, we are now free to write unit tests for our greet function. This is undoubtedly a lot simpler than testing it through a specification that goes through a driver that hits a web server, to get a string!</p>
<p>Wouldn’t it be nice if we could reuse our specification here too? After all, the specification’s point is decoupled from implementation details. If the specification captures our <strong>essential complexity</strong> and our “domain” code is supposed to model it, we should be able to use them together.</p>
<p>Let’s give it a go by creating  <code>./greet_test.go</code> as follows:</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">package</span><span style="color:var(--shiki-color-text);"> go_specs_greet_test</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;testing&quot;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	go_specs_greet </span><span style="color:var(--shiki-token-string-expression);">&quot;github.com/quii/go-specs-greet&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;github.com/quii/go-specs-greet/specifications&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">TestGreet</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	specifications.</span><span style="color:var(--shiki-token-function);">GreetSpecification</span><span style="color:var(--shiki-color-text);">(t, go_specs_greet.Greet)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span></code></pre></div>
<p>This would be nice, but it doesn’t work</p>
<pre><code>./greet_test.go:11:39: cannot use go_specs_greet.Greet (value of type func(name string) string) as type specifications.Greeter in argument to specifications.GreetSpecification:
	func(name string) string does not implement specifications.Greeter (missing Greet method)
</code></pre>
<p>Our specification wants something that has a method <code>Greet()</code> not a function.</p>
<p>The compilation error is frustrating; we have a thing that we “know” is a <code>Greeter</code>, but it’s not quite in the right <strong>shape</strong> for the compiler to let us use it. This is what the <strong>adapter</strong> pattern caters for.</p>
<blockquote>
<p>In <a href="https://en.wikipedia.org/wiki/Software_engineering" class="external alias">software engineering</a>, the <strong>adapter pattern</strong> is a <a href="https://en.wikipedia.org/wiki/Software_design_pattern" class="external alias">software design pattern</a> (also known as <a href="https://en.wikipedia.org/wiki/Wrapper_function" class="external alias">wrapper</a>, an alternative naming shared with the <a href="https://en.wikipedia.org/wiki/Decorator_pattern" class="external alias">decorator pattern</a>) that allows the <a href="https://en.wikipedia.org/wiki/Interface_(computer_science)" class="external alias">interface</a> of an existing <a href="https://en.wikipedia.org/wiki/Class_(computer_science)" class="external alias">class</a> to be used as another interface.[<a href="https://en.wikipedia.org/wiki/Adapter_pattern#cite_note-HeadFirst-1" class="external alias">1]</a> It is often used to make existing classes work with others without modifying their <a href="https://en.wikipedia.org/wiki/Source_code" class="external alias">source code</a>.</p>
</blockquote>
<p>A lot of fancy words for something relatively simple, which is often the case with design patterns, which is why people tend to roll their eyes at them. The value of design patterns is not specific implementations but a language to describe specific solutions to common problems engineers face. If you have a team that has a shared vocabulary, it reduces the friction in communication.</p>
<p>Add this code in <code>./specifications/adapters.go</code></p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">GreetAdapter</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">(name </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) </span><span style="color:var(--shiki-token-keyword);">string</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (g GreetAdapter) </span><span style="color:var(--shiki-token-function);">Greet</span><span style="color:var(--shiki-color-text);">(name </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) (</span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">g</span><span style="color:var(--shiki-color-text);">(name), </span><span style="color:var(--shiki-token-constant);">nil</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>We can now use our adapter in our test to plug our <code>Greet</code> function into the specification.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">package</span><span style="color:var(--shiki-color-text);"> go_specs_greet_test</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;testing&quot;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	gospecsgreet </span><span style="color:var(--shiki-token-string-expression);">&quot;github.com/quii/go-specs-greet&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;github.com/quii/go-specs-greet/specifications&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">TestGreet</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	specifications.</span><span style="color:var(--shiki-token-function);">GreetSpecification</span><span style="color:var(--shiki-color-text);">(</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		t,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		specifications.</span><span style="color:var(--shiki-token-function);">GreetAdapter</span><span style="color:var(--shiki-color-text);">(gospecsgreet.Greet),</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>The adapter pattern is handy when you have a type that exhibits the behaviour that an interface wants, but isn’t in the right shape.</p>
<h2 id="reflect-1">Reflect<a aria-hidden="true" tabindex="-1" href="#reflect-1" class="internal alias"> §</a></h2>
<p>The behaviour change felt simple, right? OK, maybe it was simply due to the nature of the problem, but this method of work gives you discipline and a simple, repeatable way of changing your system from top to bottom:</p>
<ul>
<li>Analyse your problem and identify a slight improvement to your system that pushes you in the right direction</li>
<li>Capture the new essential complexity in a specification</li>
<li>Follow the compilation errors until the AT runs</li>
<li>Update your implementation to make the system behave according to the specification</li>
<li>Refactor</li>
</ul>
<p>After the pain of the first iteration, we didn’t have to edit our acceptance test code because we have the separation of specifications, drivers and implementation. Changing our specification required us to update our driver and finally our implementation, but the boilerplate code around <em>how</em> to spin up the system as a container was unaffected.</p>
<p>Even with the overhead of building a docker image for our application and spinning up the container, the feedback loop for testing our <strong>entire</strong> application is very tight:</p>
<pre><code>quii@Chriss-MacBook-Pro go-specs-greet % go test ./...
ok  	github.com/quii/go-specs-greet	0.181s
ok  	github.com/quii/go-specs-greet/cmd/httpserver	2.221s
?   	github.com/quii/go-specs-greet/specifications	[no test files]
</code></pre>
<p>Now, imagine your CTO has now decided that gRPC is <em>the future</em>. She wants you to expose this same functionality over a gRPC server whilst maintaining the existing HTTP server.</p>
<p>This is an example of <strong>accidental complexity</strong>. Remember, accidental complexity is the complexity we have to deal with because we’re working with computers, stuff like networks, disks, APIs, etc. <strong>The essential complexity has not changed</strong>, so we shouldn’t have to change our specifications.</p>
<p>Many repository structures and design patterns are mainly dealing with separating types of complexity. For instance, “ports and adapters” ask that you separate your domain code from anything to do with accidental complexity; that code lives in an “adapters” folder.</p>
<h3 id="making-the-change-easy">Making the change easy<a aria-hidden="true" tabindex="-1" href="#making-the-change-easy" class="internal alias"> §</a></h3>
<p>Sometimes, it makes sense to do some refactoring <em>before</em> making a change.</p>
<blockquote>
<p>First make the change easy, then make the easy change</p>
</blockquote>
<p>~Kent Beck</p>
<p>For that reason, let’s move our <code>http</code> code - <code>driver.go</code> and <code>handler.go</code> - into a package called <code>httpserver</code> within an <code>adapters</code> folder and change their package names to <code>httpserver</code>.</p>
<p>You’ll now need to import the root package into <code>handler.go</code> to refer to the Greet method…</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">package</span><span style="color:var(--shiki-color-text);"> httpserver</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;fmt&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;net/http&quot;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	go_specs_greet </span><span style="color:var(--shiki-token-string-expression);">&quot;github.com/quii/go-specs-greet/domain/interactions&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Handler</span><span style="color:var(--shiki-color-text);">(w http.ResponseWriter, r </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">http.Request) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	name </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> r.URL.</span><span style="color:var(--shiki-token-function);">Query</span><span style="color:var(--shiki-color-text);">().</span><span style="color:var(--shiki-token-function);">Get</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;name&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	fmt.</span><span style="color:var(--shiki-token-function);">Fprint</span><span style="color:var(--shiki-color-text);">(w, go_specs_greet.</span><span style="color:var(--shiki-token-function);">Greet</span><span style="color:var(--shiki-color-text);">(name))</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span></code></pre></div>
<p>import your httpserver adapter into main.go:</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">package</span><span style="color:var(--shiki-color-text);"> main</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;net/http&quot;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;github.com/quii/go-specs-greet/adapters/httpserver&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">main</span><span style="color:var(--shiki-color-text);">() {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	handler </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> http.</span><span style="color:var(--shiki-token-function);">HandlerFunc</span><span style="color:var(--shiki-color-text);">(httpserver.Handler)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	http.</span><span style="color:var(--shiki-token-function);">ListenAndServe</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;:8080&quot;</span><span style="color:var(--shiki-color-text);">, handler)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>and update the import and reference to <code>Driver</code> in greeter_server_test.go:</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">driver </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> httpserver.Driver{BaseURL: </span><span style="color:var(--shiki-token-string-expression);">&quot;http://localhost:8080&quot;</span><span style="color:var(--shiki-color-text);">, Client: </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">client}</span></span></code></pre></div>
<p>Finally, it’s helpful to gather our domain level code in to its own folder too. Don’t be lazy and have a <code>domain</code> folder in your projects with hundreds of unrelated types and functions. Make an effort to think about your domain and group ideas that belong together, together. This will make your project easier to understand and will improve the quality of your imports.</p>
<p>Rather than seeing</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">domain.Greet</span></span></code></pre></div>
<p>Which is just a bit weird, instead favour</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">interactions.Greet</span></span></code></pre></div>
<p>Create a <code>domain</code> folder to house all your domain code, and within it, an <code>interactions</code> folder. Depending on your tooling, you may have to update some imports and code.</p>
<p>Our project tree should now look like this:</p>
<pre><code>quii@Chriss-MacBook-Pro go-specs-greet % tree
.
├── Dockerfile
├── Makefile
├── README.md
├── adapters
│   └── httpserver
│       ├── driver.go
│       └── handler.go
├── cmd
│   └── httpserver
│       ├── greeter_server_test.go
│       └── main.go
├── domain
│   └── interactions
│       ├── greet.go
│       └── greet_test.go
├── go.mod
├── go.sum
└── specifications
    └── adapters.go
    └── greet.go

</code></pre>
<p>Our domain code, <strong>essential complexity</strong>, lives at the root of our go module, and code that will allow us to use them in “the real world” are organised into <strong>adapters</strong>. The <code>cmd</code> folder is where we can compose these logical groupings into practical applications, which have black-box tests to verify it all works. Nice!</p>
<p>Finally, we can do a <em>tiny</em> bit of tidying up our acceptance test. If you consider the high-level steps of our acceptance test:</p>
<ul>
<li>Build a docker image</li>
<li>Wait for it to be listening on <em>some</em> port</li>
<li>Create a driver that understands how to translate the DSL into system specific calls</li>
<li>Plug in the driver into the specification</li>
</ul>
<p>… you’ll realise we have the same requirements for an acceptance test for the gRPC server!</p>
<p>The <code>adapters</code> folder seems a good place as any, so inside a file called <code>docker.go</code>, encapsulate the first two steps in a function that we’ll reuse next.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">package</span><span style="color:var(--shiki-color-text);"> adapters</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;context&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;fmt&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;testing&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;time&quot;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;github.com/alecthomas/assert/v2&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;github.com/docker/go-connections/nat&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;github.com/testcontainers/testcontainers-go&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;github.com/testcontainers/testcontainers-go/wait&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">StartDockerServer</span><span style="color:var(--shiki-color-text);">(</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	t testing.TB,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	port </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	dockerFilePath </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	ctx </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> context.</span><span style="color:var(--shiki-token-function);">Background</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	t.</span><span style="color:var(--shiki-token-function);">Helper</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	req </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> testcontainers.ContainerRequest{</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		FromDockerfile: testcontainers.FromDockerfile{</span></span>
<span data-line><span style="color:var(--shiki-color-text);">			Context:       </span><span style="color:var(--shiki-token-string-expression);">&quot;../../.&quot;</span><span style="color:var(--shiki-color-text);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">			Dockerfile:    dockerFilePath,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">			PrintBuildLog: </span><span style="color:var(--shiki-token-constant);">true</span><span style="color:var(--shiki-color-text);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		},</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		ExposedPorts: []</span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">{fmt.</span><span style="color:var(--shiki-token-function);">Sprintf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-token-constant);">%s</span><span style="color:var(--shiki-token-string-expression);">:</span><span style="color:var(--shiki-token-constant);">%s</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, port, port)},</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		WaitingFor:   wait.</span><span style="color:var(--shiki-token-function);">ForListeningPort</span><span style="color:var(--shiki-color-text);">(nat.</span><span style="color:var(--shiki-token-function);">Port</span><span style="color:var(--shiki-color-text);">(port)).</span><span style="color:var(--shiki-token-function);">WithStartupTimeout</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">5</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);"> time.Second),</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	container, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> testcontainers.</span><span style="color:var(--shiki-token-function);">GenericContainer</span><span style="color:var(--shiki-color-text);">(ctx, testcontainers.GenericContainerRequest{</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		ContainerRequest: req,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		Started:          </span><span style="color:var(--shiki-token-constant);">true</span><span style="color:var(--shiki-color-text);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	})</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	assert.</span><span style="color:var(--shiki-token-function);">NoError</span><span style="color:var(--shiki-color-text);">(t, err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	t.</span><span style="color:var(--shiki-token-function);">Cleanup</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">() {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		assert.</span><span style="color:var(--shiki-token-function);">NoError</span><span style="color:var(--shiki-color-text);">(t, container.</span><span style="color:var(--shiki-token-function);">Terminate</span><span style="color:var(--shiki-color-text);">(ctx))</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	})</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>This gives us an opportunity to clean up our acceptance test a little</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">TestGreeterServer</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">var</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		port           </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;8080&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		dockerFilePath </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;./cmd/httpserver/Dockerfile&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		baseURL        </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> fmt.</span><span style="color:var(--shiki-token-function);">Sprintf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;http://localhost:</span><span style="color:var(--shiki-token-constant);">%s</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, port)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		driver         </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> httpserver.Driver{BaseURL: baseURL, Client: </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">http.Client{</span></span>
<span data-line><span style="color:var(--shiki-color-text);">			Timeout: </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);"> time.Second,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		}}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	adapters.</span><span style="color:var(--shiki-token-function);">StartDockerServer</span><span style="color:var(--shiki-color-text);">(t, port, dockerFilePath)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	specifications.</span><span style="color:var(--shiki-token-function);">GreetSpecification</span><span style="color:var(--shiki-color-text);">(t, driver)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>This should make writing the <em>next</em> test simpler.</p>
<h2 id="write-the-test-first-2">Write the test first<a aria-hidden="true" tabindex="-1" href="#write-the-test-first-2" class="internal alias"> §</a></h2>
<p>This new functionality can be accomplished by creating a new <code>adapter</code> to interact with our domain code. For that reason we:</p>
<ul>
<li>Shouldn’t have to change the specification;</li>
<li>Should be able to reuse the specification;</li>
<li>Should be able to reuse the domain code.</li>
</ul>
<p>Create a new folder <code>grpcserver</code> inside <code>cmd</code> to house our new program and the corresponding acceptance test. Inside <code>cmd/grpc_server/greeter_server_test.go</code>, add an acceptance test, which looks very similar to our HTTP server test, not by coincidence but by design.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">package</span><span style="color:var(--shiki-color-text);"> main_test</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;fmt&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;testing&quot;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;github.com/quii/go-specs-greet/adapters&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;github.com/quii/go-specs-greet/adapters/grpcserver&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;github.com/quii/go-specs-greet/specifications&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">TestGreeterServer</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">var</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		port           </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;50051&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		dockerFilePath </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;./cmd/grpcserver/Dockerfile&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		driver         </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> grpcserver.Driver{Addr: fmt.</span><span style="color:var(--shiki-token-function);">Sprintf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;localhost:</span><span style="color:var(--shiki-token-constant);">%s</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, port)}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	adapters.</span><span style="color:var(--shiki-token-function);">StartDockerServer</span><span style="color:var(--shiki-color-text);">(t, port, dockerFilePath)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	specifications.</span><span style="color:var(--shiki-token-function);">GreetSpecification</span><span style="color:var(--shiki-color-text);">(t, </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">driver)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>The only differences are:</p>
<ul>
<li>We use a different docker file, because we’re building a different program</li>
<li>This means we’ll need a new <code>Driver</code>, that’ll use <code>gRPC</code> to interact with our new program</li>
</ul>
<h2 id="try-to-run-the-test-2">Try to run the test<a aria-hidden="true" tabindex="-1" href="#try-to-run-the-test-2" class="internal alias"> §</a></h2>
<pre><code>./greeter_server_test.go:26:12: undefined: grpcserver
</code></pre>
<p>We haven’t created a <code>Driver</code> yet, so it won’t compile.</p>
<h2 id="write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output-2">Write the minimal amount of code for the test to run and check the failing test output<a aria-hidden="true" tabindex="-1" href="#write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output-2" class="internal alias"> §</a></h2>
<p>Create a <code>grpcserver</code> folder inside <code>adapters</code> and inside it create <code>driver.go</code></p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">package</span><span style="color:var(--shiki-color-text);"> grpcserver</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Driver</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">struct</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	Addr </span><span style="color:var(--shiki-token-keyword);">string</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (d Driver) </span><span style="color:var(--shiki-token-function);">Greet</span><span style="color:var(--shiki-color-text);">(name </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) (</span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;&quot;</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-constant);">nil</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>If you run again, it should now <em>compile</em> but not pass because we haven’t created a Dockerfile and corresponding program to run.</p>
<p>Create a new <code>Dockerfile</code> inside <code>cmd/grpcserver</code>.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="dockerfile" data-theme="default"><code data-language="dockerfile" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">FROM</span><span style="color:var(--shiki-color-text);"> golang:1.18-alpine</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">WORKDIR</span><span style="color:var(--shiki-color-text);"> /app</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">COPY</span><span style="color:var(--shiki-color-text);"> go.mod ./</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">RUN</span><span style="color:var(--shiki-color-text);"> go mod download</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">COPY</span><span style="color:var(--shiki-color-text);"> . .</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">RUN</span><span style="color:var(--shiki-color-text);"> go build -o svr cmd/grpcserver/*.go</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">EXPOSE</span><span style="color:var(--shiki-color-text);"> 8080</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">CMD</span><span style="color:var(--shiki-color-text);"> [ </span><span style="color:var(--shiki-token-string-expression);">&quot;./svr&quot;</span><span style="color:var(--shiki-color-text);"> ]</span></span></code></pre></div>
<p>And a <code>main.go</code></p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">package</span><span style="color:var(--shiki-color-text);"> main</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;fmt&quot;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">main</span><span style="color:var(--shiki-color-text);">() {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	fmt.</span><span style="color:var(--shiki-token-function);">Println</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;implement me&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>You should find now that the test fails because our server is not listening on the port. Now is the time to start building our client and server with gRPC.</p>
<h2 id="write-enough-code-to-make-it-pass-2">Write enough code to make it pass<a aria-hidden="true" tabindex="-1" href="#write-enough-code-to-make-it-pass-2" class="internal alias"> §</a></h2>
<h3 id="grpc">gRPC<a aria-hidden="true" tabindex="-1" href="#grpc" class="internal alias"> §</a></h3>
<p>If you’re unfamiliar with gRPC, I’d start by looking at the <a href="https://grpc.io" class="external alias">gRPC website</a>. Still, for this chapter, it’s just another kind of adapter into our system, a way for other systems to call (<strong>r</strong>emote <strong>p</strong>rocedure <strong>c</strong>all) our excellent domain code.</p>
<p>The twist is you define a “service definition” using Protocol Buffers. You then generate server and client code from the definition. This not only works for Go but for most mainstream languages too. This means you can share a definition with other teams in your company who may not even write Go and can still do service-to-service communication smoothly.</p>
<p>If you haven’t used gRPC before, you’ll need to install a <strong>Protocol buffer compiler</strong> and some <strong>Go plugins</strong>. <a href="https://grpc.io/docs/languages/go/quickstart/" class="external alias">The gRPC website has clear instructions on how to do this</a>.</p>
<p>Inside the same folder as our new driver, add a <code>greet.proto</code> file with the following</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="protobuf" data-theme="default"><code data-language="protobuf" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">syntax = &quot;proto3&quot;;</span></span>
<span data-line><span style="color:var(--shiki-color-text);"></span></span>
<span data-line><span style="color:var(--shiki-color-text);">option go_package = &quot;github.com/quii/adapters/grpcserver&quot;;</span></span>
<span data-line><span style="color:var(--shiki-color-text);"></span></span>
<span data-line><span style="color:var(--shiki-color-text);">package grpcserver;</span></span>
<span data-line><span style="color:var(--shiki-color-text);"></span></span>
<span data-line><span style="color:var(--shiki-color-text);">service Greeter {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  rpc Greet (GreetRequest) returns (GreetReply) {}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line><span style="color:var(--shiki-color-text);"></span></span>
<span data-line><span style="color:var(--shiki-color-text);">message GreetRequest {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  string name = 1;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line><span style="color:var(--shiki-color-text);"></span></span>
<span data-line><span style="color:var(--shiki-color-text);">message GreetReply {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  string message = 1;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>To understand this definition, you don’t need to be an expert in Protocol Buffers. We define a service with a Greet method and then describe the incoming and outgoing message types.</p>
<p>Inside <code>adapters/grpcserver</code> run the following to generate the client and server code</p>
<pre><code>protoc --go_out=. --go_opt=paths=source_relative \
    --go-grpc_out=. --go-grpc_opt=paths=source_relative \
    greet.proto
</code></pre>
<p>If it worked, we would have some code generated for us to use. Let’s start by using the generated client code inside our <code>Driver</code>.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">package</span><span style="color:var(--shiki-color-text);"> grpcserver</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;context&quot;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;google.golang.org/grpc&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;google.golang.org/grpc/credentials/insecure&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Driver</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">struct</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	Addr </span><span style="color:var(--shiki-token-keyword);">string</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (d Driver) </span><span style="color:var(--shiki-token-function);">Greet</span><span style="color:var(--shiki-color-text);">(name </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) (</span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-comment);">//todo: we shouldn't redial every time we call greet, refactor out when we're green</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	conn, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> grpc.</span><span style="color:var(--shiki-token-function);">Dial</span><span style="color:var(--shiki-color-text);">(d.Addr, grpc.</span><span style="color:var(--shiki-token-function);">WithTransportCredentials</span><span style="color:var(--shiki-color-text);">(insecure.</span><span style="color:var(--shiki-token-function);">NewCredentials</span><span style="color:var(--shiki-color-text);">()))</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;&quot;</span><span style="color:var(--shiki-color-text);">, err</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">defer</span><span style="color:var(--shiki-color-text);"> conn.</span><span style="color:var(--shiki-token-function);">Close</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	client </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NewGreeterClient</span><span style="color:var(--shiki-color-text);">(conn)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	greeting, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> client.</span><span style="color:var(--shiki-token-function);">Greet</span><span style="color:var(--shiki-color-text);">(context.</span><span style="color:var(--shiki-token-function);">Background</span><span style="color:var(--shiki-color-text);">(), </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">GreetRequest{</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		Name: name,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	})</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;&quot;</span><span style="color:var(--shiki-color-text);">, err</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> greeting.Message, </span><span style="color:var(--shiki-token-constant);">nil</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Now that we have a client, we need to update our <code>main.go</code> to create a server. Remember, at this point; we’re just trying to get our test to pass and not worrying about code quality.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">package</span><span style="color:var(--shiki-color-text);"> main</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;context&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;log&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;net&quot;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;github.com/quii/go-specs-greet/adapters/grpcserver&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;google.golang.org/grpc&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">main</span><span style="color:var(--shiki-color-text);">() {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	lis, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> net.</span><span style="color:var(--shiki-token-function);">Listen</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;tcp&quot;</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-string-expression);">&quot;:50051&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		log.</span><span style="color:var(--shiki-token-function);">Fatal</span><span style="color:var(--shiki-color-text);">(err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	s </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> grpc.</span><span style="color:var(--shiki-token-function);">NewServer</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	grpcserver.</span><span style="color:var(--shiki-token-function);">RegisterGreeterServer</span><span style="color:var(--shiki-color-text);">(s, </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">GreetServer{})</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> s.</span><span style="color:var(--shiki-token-function);">Serve</span><span style="color:var(--shiki-color-text);">(lis); err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		log.</span><span style="color:var(--shiki-token-function);">Fatal</span><span style="color:var(--shiki-color-text);">(err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">GreetServer</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">struct</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	grpcserver.UnimplementedGreeterServer</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (g GreetServer) </span><span style="color:var(--shiki-token-function);">Greet</span><span style="color:var(--shiki-color-text);">(ctx context.Context, request </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">grpcserver.GreetRequest) (</span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">grpcserver.GreetReply, </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">grpcserver.GreetReply{Message: </span><span style="color:var(--shiki-token-string-expression);">&quot;fixme&quot;</span><span style="color:var(--shiki-color-text);">}, </span><span style="color:var(--shiki-token-constant);">nil</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>To create our gRPC server, we have to implement the interface it generated for us</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-comment);">// GreeterServer is the server API for Greeter service.</span></span>
<span data-line><span style="color:var(--shiki-token-comment);">// All implementations must embed UnimplementedGreeterServer</span></span>
<span data-line><span style="color:var(--shiki-token-comment);">// for forward compatibility</span></span>
<span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">GreeterServer</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">interface</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">Greet</span><span style="color:var(--shiki-color-text);">(context.Context, </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">GreetRequest) (</span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">GreetReply, </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">mustEmbedUnimplementedGreeterServer</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Our <code>main</code> function:</p>
<ul>
<li>Listens on a port</li>
<li>Creates a <code>GreetServer</code> that implements the interface, and then registers it with <code>grpcServer.RegisterGreeterServer</code>, along with a <code>grpc.Server</code>.</li>
<li>Uses the server with the listener</li>
</ul>
<p>It wouldn’t be a massive extra effort to call our domain code inside <code>greetServer.Greet</code> rather than hard-coding <code>fix-me</code> in the message, but I’d like to run our acceptance test first to see if everything is working on a transport level and verify the failing test output.</p>
<pre><code>greet.go:16: Expected values to be equal:
-fixme
\ No newline at end of file
+Hello, Mike
\ No newline at end of file
</code></pre>
<p>Nice! We can see our driver is able to connect to our gRPC server in the test.</p>
<p>Now, call our domain code inside our <code>GreetServer</code></p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">GreetServer</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">struct</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	grpcserver.UnimplementedGreeterServer</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (g GreetServer) </span><span style="color:var(--shiki-token-function);">Greet</span><span style="color:var(--shiki-color-text);">(ctx context.Context, request </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">grpcserver.GreetRequest) (</span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">grpcserver.GreetReply, </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">grpcserver.GreetReply{Message: interactions.</span><span style="color:var(--shiki-token-function);">Greet</span><span style="color:var(--shiki-color-text);">(request.Name)}, </span><span style="color:var(--shiki-token-constant);">nil</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Finally, it passes! We have an acceptance test that proves our gRPC greet server behaves how we’d like.</p>
<h2 id="refactor-2">Refactor<a aria-hidden="true" tabindex="-1" href="#refactor-2" class="internal alias"> §</a></h2>
<p>We committed several sins to get the test passing, but now they’re passing, we have the safety net to refactor.</p>
<h3 id="simplify-main">Simplify main<a aria-hidden="true" tabindex="-1" href="#simplify-main" class="internal alias"> §</a></h3>
<p>As before, we don’t want <code>main</code> to have too much code inside it. We can move our new <code>GreetServer</code> into <code>adapters/grpcserver</code> as that’s where it should live. In terms of cohesion, if we change the service definition, we want the “blast-radius” of change to be confined to that area of our code.</p>
<h3 id="dont-redial-in-our-driver-every-time">Don’t redial in our driver every time<a aria-hidden="true" tabindex="-1" href="#dont-redial-in-our-driver-every-time" class="internal alias"> §</a></h3>
<p>We only have one test, but if we expand our specification (we will), it doesn’t make sense for the Driver to redial for every RPC call.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">package</span><span style="color:var(--shiki-color-text);"> grpcserver</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;context&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;sync&quot;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;google.golang.org/grpc&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;google.golang.org/grpc/credentials/insecure&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Driver</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">struct</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	Addr </span><span style="color:var(--shiki-token-keyword);">string</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	connectionOnce sync.Once</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	conn           </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">grpc.ClientConn</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	client         GreeterClient</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (d </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">Driver) </span><span style="color:var(--shiki-token-function);">Greet</span><span style="color:var(--shiki-color-text);">(name </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) (</span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	client, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> d.</span><span style="color:var(--shiki-token-function);">getClient</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;&quot;</span><span style="color:var(--shiki-color-text);">, err</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	greeting, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> client.</span><span style="color:var(--shiki-token-function);">Greet</span><span style="color:var(--shiki-color-text);">(context.</span><span style="color:var(--shiki-token-function);">Background</span><span style="color:var(--shiki-color-text);">(), </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">GreetRequest{</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		Name: name,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	})</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;&quot;</span><span style="color:var(--shiki-color-text);">, err</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> greeting.Message, </span><span style="color:var(--shiki-token-constant);">nil</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (d </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">Driver) </span><span style="color:var(--shiki-token-function);">getClient</span><span style="color:var(--shiki-color-text);">() (GreeterClient, </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">var</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">error</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	d.connectionOnce.</span><span style="color:var(--shiki-token-function);">Do</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">() {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		d.conn, err </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> grpc.</span><span style="color:var(--shiki-token-function);">Dial</span><span style="color:var(--shiki-color-text);">(d.Addr, grpc.</span><span style="color:var(--shiki-token-function);">WithTransportCredentials</span><span style="color:var(--shiki-color-text);">(insecure.</span><span style="color:var(--shiki-token-function);">NewCredentials</span><span style="color:var(--shiki-color-text);">()))</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		d.client </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NewGreeterClient</span><span style="color:var(--shiki-color-text);">(d.conn)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	})</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> d.client, err</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Here we’re showing how we can use <a href="https://pkg.go.dev/sync#Once" class="external"><code>sync.Once</code></a> to ensure our <code>Driver</code> only attempts to create a connection to our server once.</p>
<p>Let’s take a look at the current state of our project structure before moving on.</p>
<pre><code>quii@Chriss-MacBook-Pro go-specs-greet % tree
.
├── Makefile
├── README.md
├── adapters
│   ├── docker.go
│   ├── grpcserver
│   │   ├── driver.go
│   │   ├── greet.pb.go
│   │   ├── greet.proto
│   │   ├── greet_grpc.pb.go
│   │   └── server.go
│   └── httpserver
│       ├── driver.go
│       └── handler.go
├── cmd
│   ├── grpcserver
│   │   ├── Dockerfile
│   │   ├── greeter_server_test.go
│   │   └── main.go
│   └── httpserver
│       ├── Dockerfile
│       ├── greeter_server_test.go
│       └── main.go
├── domain
│   └── interactions
│       ├── greet.go
│       └── greet_test.go
├── go.mod
├── go.sum
└── specifications
    └── greet.go
</code></pre>
<ul>
<li><code>adapters</code> have cohesive units of functionality grouped together</li>
<li><code>cmd</code> holds our applications and corresponding acceptance tests</li>
<li>Our code is totally decoupled from any accidental complexity</li>
</ul>
<h3 id="consolidating-dockerfile">Consolidating <code>Dockerfile</code><a aria-hidden="true" tabindex="-1" href="#consolidating-dockerfile" class="internal alias"> §</a></h3>
<p>You’ve probably noticed the two <code>Dockerfiles</code> are almost identical beyond the path to the binary we wish to build.</p>
<p><code>Dockerfiles</code> can accept arguments to let us reuse them in different contexts, which sounds perfect. We can delete our 2 Dockerfiles and instead have one at the root of the project with the following</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="dockerfile" data-theme="default"><code data-language="dockerfile" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">FROM</span><span style="color:var(--shiki-color-text);"> golang:1.18-alpine</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">WORKDIR</span><span style="color:var(--shiki-color-text);"> /app</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">ARG</span><span style="color:var(--shiki-color-text);"> bin_to_build</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">COPY</span><span style="color:var(--shiki-color-text);"> go.mod ./</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">RUN</span><span style="color:var(--shiki-color-text);"> go mod download</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">COPY</span><span style="color:var(--shiki-color-text);"> . .</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">RUN</span><span style="color:var(--shiki-color-text);"> go build -o svr cmd/${bin_to_build}/main.go</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">CMD</span><span style="color:var(--shiki-color-text);"> [ </span><span style="color:var(--shiki-token-string-expression);">&quot;./svr&quot;</span><span style="color:var(--shiki-color-text);"> ]</span></span></code></pre></div>
<p>We’ll have to update our <code>StartDockerServer</code> function to pass in the argument when we build the images</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">StartDockerServer</span><span style="color:var(--shiki-color-text);">(</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	t testing.TB,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	port </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	binToBuild </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	ctx </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> context.</span><span style="color:var(--shiki-token-function);">Background</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	t.</span><span style="color:var(--shiki-token-function);">Helper</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	req </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> testcontainers.ContainerRequest{</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		FromDockerfile: testcontainers.FromDockerfile{</span></span>
<span data-line><span style="color:var(--shiki-color-text);">			Context:    </span><span style="color:var(--shiki-token-string-expression);">&quot;../../.&quot;</span><span style="color:var(--shiki-color-text);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">			Dockerfile: </span><span style="color:var(--shiki-token-string-expression);">&quot;Dockerfile&quot;</span><span style="color:var(--shiki-color-text);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">			BuildArgs: </span><span style="color:var(--shiki-token-keyword);">map</span><span style="color:var(--shiki-color-text);">[</span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">]</span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">{</span></span>
<span data-line><span style="color:var(--shiki-color-text);">				</span><span style="color:var(--shiki-token-string-expression);">&quot;bin_to_build&quot;</span><span style="color:var(--shiki-color-text);">: </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">binToBuild,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">			},</span></span>
<span data-line><span style="color:var(--shiki-color-text);">			PrintBuildLog: </span><span style="color:var(--shiki-token-constant);">true</span><span style="color:var(--shiki-color-text);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		},</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		ExposedPorts: []</span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">{fmt.</span><span style="color:var(--shiki-token-function);">Sprintf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-token-constant);">%s</span><span style="color:var(--shiki-token-string-expression);">:</span><span style="color:var(--shiki-token-constant);">%s</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, port, port)},</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		WaitingFor:   wait.</span><span style="color:var(--shiki-token-function);">ForListeningPort</span><span style="color:var(--shiki-color-text);">(nat.</span><span style="color:var(--shiki-token-function);">Port</span><span style="color:var(--shiki-color-text);">(port)).</span><span style="color:var(--shiki-token-function);">WithStartupTimeout</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">5</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);"> time.Second),</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	container, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> testcontainers.</span><span style="color:var(--shiki-token-function);">GenericContainer</span><span style="color:var(--shiki-color-text);">(ctx, testcontainers.GenericContainerRequest{</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		ContainerRequest: req,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		Started:          </span><span style="color:var(--shiki-token-constant);">true</span><span style="color:var(--shiki-color-text);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	})</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	assert.</span><span style="color:var(--shiki-token-function);">NoError</span><span style="color:var(--shiki-color-text);">(t, err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	t.</span><span style="color:var(--shiki-token-function);">Cleanup</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">() {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		assert.</span><span style="color:var(--shiki-token-function);">NoError</span><span style="color:var(--shiki-color-text);">(t, container.</span><span style="color:var(--shiki-token-function);">Terminate</span><span style="color:var(--shiki-color-text);">(ctx))</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	})</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>And finally, update our tests to pass in the image to build (do this for the other test and change <code>grpcserver</code> to <code>httpserver</code>).</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">TestGreeterServer</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">var</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		port   </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;50051&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		driver </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> grpcserver.Driver{Addr: fmt.</span><span style="color:var(--shiki-token-function);">Sprintf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;localhost:</span><span style="color:var(--shiki-token-constant);">%s</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, port)}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	adapters.</span><span style="color:var(--shiki-token-function);">StartDockerServer</span><span style="color:var(--shiki-color-text);">(t, port, </span><span style="color:var(--shiki-token-string-expression);">&quot;grpcserver&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	specifications.</span><span style="color:var(--shiki-token-function);">GreetSpecification</span><span style="color:var(--shiki-color-text);">(t, </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">driver)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<h3 id="separating-different-kinds-of-tests">Separating different kinds of tests<a aria-hidden="true" tabindex="-1" href="#separating-different-kinds-of-tests" class="internal alias"> §</a></h3>
<p>Acceptance tests are great in that they test the whole system works from a pure user-facing, behavioural POV, but they do have their downsides compared to unit tests:</p>
<ul>
<li>Slower</li>
<li>Quality of feedback is often not as focused as a unit test</li>
<li>Doesn’t help you with internal quality, or design</li>
</ul>
<p><a href="https://martinfowler.com/articles/practical-test-pyramid.html" class="external alias">The Test Pyramid</a> guides us on the kind of mix we want for our test suite, you should read Fowler’s post for more detail, but the very simplistic summary for this post is “lots of unit tests and a few acceptance tests”.</p>
<p>For that reason, as a project grows you often may be in situations where the acceptance tests can take a few minutes to run. To offer a friendly developer experience for people checking out your project, you can enable developers to run the different kinds of tests separately.</p>
<p>It’s preferable that running <code>go test ./...</code> should be runnable with no further set up from an engineer, beyond say a few key dependencies such as the Go compiler (obviously) and perhaps Docker.</p>
<p>Go provides a mechanism for engineers to run only “short” tests with the <a href="https://pkg.go.dev/testing#Short" class="external alias">short flag</a></p>
<p><code>go test -short ./...</code></p>
<p>We can add to our acceptance tests to see if the user wants to run our acceptance tests by inspecting the value of the flag</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> testing.</span><span style="color:var(--shiki-token-function);">Short</span><span style="color:var(--shiki-color-text);">() {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	t.</span><span style="color:var(--shiki-token-function);">Skip</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>I made a <code>Makefile</code> to show this usage</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="makefile" data-theme="default"><code data-language="makefile" data-theme="default"><span data-line><span style="color:var(--shiki-token-function);">build</span><span style="color:var(--shiki-token-keyword);">:</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	golangci-lint run</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	go test ./...</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-function);">unit-tests</span><span style="color:var(--shiki-token-keyword);">:</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	go test -short ./...</span></span></code></pre></div>
<h3 id="when-should-i-write-acceptance-tests">When should I write acceptance tests?<a aria-hidden="true" tabindex="-1" href="#when-should-i-write-acceptance-tests" class="internal alias"> §</a></h3>
<p>The best practice is to favour having lots of fast running unit tests and a few acceptance tests, but how do you decide when you should write an acceptance test, vs unit tests?</p>
<p>It’s difficult to give a concrete rule, but the questions I typically ask myself are:</p>
<ul>
<li>Is this an edge case? I’d prefer to unit test those</li>
<li>Is this something that the non-computer people talk about a lot? I would prefer to have a lot of confidence the key thing “really” works, so I’d add an acceptance test</li>
<li>Am I describing a user journey, rather than a specific function? Acceptance test</li>
<li>Would unit tests give me enough confidence? Sometimes you’re taking an existing journey that already has an acceptance test, but you’re adding other functionality to deal with different scenarios due to different inputs. In this case, adding another acceptance test adds a cost but brings little value, so I’d prefer some unit tests.</li>
</ul>
<h2 id="iterating-on-our-work">Iterating on our work<a aria-hidden="true" tabindex="-1" href="#iterating-on-our-work" class="internal alias"> §</a></h2>
<p>With all this effort, you’d hope extending our system will now be simple. Making a system that is simple to work on, is not necessarily easy, but it’s worth the time, and is substantially easier to do when you start a project.</p>
<p>Let’s extend our API to include a “curse” functionality.</p>
<h2 id="write-the-test-first-3">Write the test first<a aria-hidden="true" tabindex="-1" href="#write-the-test-first-3" class="internal alias"> §</a></h2>
<p>This is brand-new behaviour, so we should start with an acceptance test. In our specification file, add the following</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">MeanGreeter</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">interface</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">Curse</span><span style="color:var(--shiki-color-text);">(name </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) (</span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">CurseSpecification</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T, meany MeanGreeter) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	got, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> meany.</span><span style="color:var(--shiki-token-function);">Curse</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;Chris&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	assert.</span><span style="color:var(--shiki-token-function);">NoError</span><span style="color:var(--shiki-color-text);">(t, err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	assert.</span><span style="color:var(--shiki-token-function);">Equal</span><span style="color:var(--shiki-color-text);">(t, got, </span><span style="color:var(--shiki-token-string-expression);">&quot;Go to hell, Chris!&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Pick one of our acceptance tests and try to use the specification</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">TestGreeterServer</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> testing.</span><span style="color:var(--shiki-token-function);">Short</span><span style="color:var(--shiki-color-text);">() {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		t.</span><span style="color:var(--shiki-token-function);">Skip</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">var</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		port   </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;50051&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		driver </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> grpcserver.Driver{Addr: fmt.</span><span style="color:var(--shiki-token-function);">Sprintf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;localhost:</span><span style="color:var(--shiki-token-constant);">%s</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, port)}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	t.</span><span style="color:var(--shiki-token-function);">Cleanup</span><span style="color:var(--shiki-color-text);">(driver.Close)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	adapters.</span><span style="color:var(--shiki-token-function);">StartDockerServer</span><span style="color:var(--shiki-color-text);">(t, port, </span><span style="color:var(--shiki-token-string-expression);">&quot;grpcserver&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	specifications.</span><span style="color:var(--shiki-token-function);">GreetSpecification</span><span style="color:var(--shiki-color-text);">(t, </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">driver)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	specifications.</span><span style="color:var(--shiki-token-function);">CurseSpecification</span><span style="color:var(--shiki-color-text);">(t, </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">driver)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<h2 id="try-to-run-the-test-3">Try to run the test<a aria-hidden="true" tabindex="-1" href="#try-to-run-the-test-3" class="internal alias"> §</a></h2>
<pre><code># github.com/quii/go-specs-greet/cmd/grpcserver_test [github.com/quii/go-specs-greet/cmd/grpcserver.test]
./greeter_server_test.go:27:39: cannot use &amp;driver (value of type *grpcserver.Driver) as type specifications.MeanGreeter in argument to specifications.CurseSpecification:
	*grpcserver.Driver does not implement specifications.MeanGreeter (missing Curse method)
</code></pre>
<p>Our <code>Driver</code> doesn’t support <code>Curse</code> yet.</p>
<h2 id="write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output-3">Write the minimal amount of code for the test to run and check the failing test output<a aria-hidden="true" tabindex="-1" href="#write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output-3" class="internal alias"> §</a></h2>
<p>Remember we’re just trying to get the test to run, so add the method to <code>Driver</code></p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (d </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">Driver) </span><span style="color:var(--shiki-token-function);">Curse</span><span style="color:var(--shiki-color-text);">(name </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) (</span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;&quot;</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-constant);">nil</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>If you try again, the test should compile, run, and fail</p>
<pre><code>greet.go:26: Expected values to be equal:
+Go to hell, Chris!
\ No newline at end of file
</code></pre>
<h2 id="write-enough-code-to-make-it-pass-3">Write enough code to make it pass<a aria-hidden="true" tabindex="-1" href="#write-enough-code-to-make-it-pass-3" class="internal alias"> §</a></h2>
<p>We’ll need to update our protocol buffer specification have a <code>Curse</code> method on it, and then regenerate our code.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="protobuf" data-theme="default"><code data-language="protobuf" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">service Greeter {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  rpc Greet (GreetRequest) returns (GreetReply) {}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">  rpc Curse (GreetRequest) returns (GreetReply) {}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>You could argue that reusing the types <code>GreetRequest</code> and <code>GreetReply</code> is inappropriate coupling, but we can deal with that in the refactoring stage. As I keep stressing, we’re just trying to get the test passing, so we verify the software works, <em>then</em> we can make it nice.</p>
<p>Re-generate our code with (inside <code>adapters/grpcserver</code>).</p>
<pre><code>protoc --go_out=. --go_opt=paths=source_relative \
    --go-grpc_out=. --go-grpc_opt=paths=source_relative \
    greet.proto
</code></pre>
<h3 id="update-driver">Update driver<a aria-hidden="true" tabindex="-1" href="#update-driver" class="internal alias"> §</a></h3>
<p>Now the client code has been updated, we can now call <code>Curse</code> in our <code>Driver</code></p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (d </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">Driver) </span><span style="color:var(--shiki-token-function);">Curse</span><span style="color:var(--shiki-color-text);">(name </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) (</span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	client, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> d.</span><span style="color:var(--shiki-token-function);">getClient</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;&quot;</span><span style="color:var(--shiki-color-text);">, err</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	greeting, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> client.</span><span style="color:var(--shiki-token-function);">Curse</span><span style="color:var(--shiki-color-text);">(context.</span><span style="color:var(--shiki-token-function);">Background</span><span style="color:var(--shiki-color-text);">(), </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">GreetRequest{</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		Name: name,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	})</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;&quot;</span><span style="color:var(--shiki-color-text);">, err</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> greeting.Message, </span><span style="color:var(--shiki-token-constant);">nil</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<h3 id="update-server">Update server<a aria-hidden="true" tabindex="-1" href="#update-server" class="internal alias"> §</a></h3>
<p>Finally, we need to add the <code>Curse</code> method to our <code>Server</code></p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">package</span><span style="color:var(--shiki-color-text);"> grpcserver</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;context&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;fmt&quot;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-string-expression);">&quot;github.com/quii/go-specs-greet/domain/interactions&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">GreetServer</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">struct</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	UnimplementedGreeterServer</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (g GreetServer) </span><span style="color:var(--shiki-token-function);">Curse</span><span style="color:var(--shiki-color-text);">(ctx context.Context, request </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">GreetRequest) (</span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">GreetReply, </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">GreetReply{Message: fmt.</span><span style="color:var(--shiki-token-function);">Sprintf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;Go to hell, </span><span style="color:var(--shiki-token-constant);">%s</span><span style="color:var(--shiki-token-string-expression);">!&quot;</span><span style="color:var(--shiki-color-text);">, request.Name)}, </span><span style="color:var(--shiki-token-constant);">nil</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (g GreetServer) </span><span style="color:var(--shiki-token-function);">Greet</span><span style="color:var(--shiki-color-text);">(ctx context.Context, request </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">GreetRequest) (</span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">GreetReply, </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">GreetReply{Message: interactions.</span><span style="color:var(--shiki-token-function);">Greet</span><span style="color:var(--shiki-color-text);">(request.Name)}, </span><span style="color:var(--shiki-token-constant);">nil</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>The tests should now pass.</p>
<h2 id="refactor-3">Refactor<a aria-hidden="true" tabindex="-1" href="#refactor-3" class="internal alias"> §</a></h2>
<p>Try doing this yourself.</p>
<ul>
<li>Extract the <code>Curse</code> “domain logic”, away from the grpc server, as we did for <code>Greet</code>. Use the specification as a unit test against your domain logic</li>
<li>Have different types in the protobuf to ensure the message types for <code>Greet</code> and <code>Curse</code> are decoupled.</li>
</ul>
<h2 id="implementing-curse-for-the-http-server">Implementing <code>Curse</code> for the HTTP server<a aria-hidden="true" tabindex="-1" href="#implementing-curse-for-the-http-server" class="internal alias"> §</a></h2>
<p>Again, an exercise for you, the reader. We have our domain-level specification and our domain-level logic neatly separated. If you’ve followed this chapter, this should be very straightforward.</p>
<ul>
<li>Add the specification to the existing acceptance test for the HTTP server</li>
<li>Update your <code>Driver</code></li>
<li>Add the new endpoint to the server, and reuse the domain code to implement the functionality. You may wish to use <code>http.NewServeMux</code> to handle the routeing to the separate endpoints.</li>
</ul>
<p>Remember to work in small steps, commit and run your tests frequently. If you get really stuck <a href="https://github.com/quii/go-specs-greet" class="external alias">you can find my implementation on GitHub</a>.</p>
<h2 id="enhance-both-systems-by-updating-the-domain-logic-with-a-unit-test">Enhance both systems by updating the domain logic with a unit test<a aria-hidden="true" tabindex="-1" href="#enhance-both-systems-by-updating-the-domain-logic-with-a-unit-test" class="internal alias"> §</a></h2>
<p>As mentioned, not every change to a system should be driven via an acceptance test. Permutations of business rules and edge cases should be simple to drive via a unit test if you have separated concerns well.</p>
<p>Add a unit test to our <code>Greet</code> function to default the <code>name</code> to <code>World</code> if it is empty. You should see how simple this is, and then the business rules are reflected in both applications for “free”.</p>
<h2 id="wrapping-up">Wrapping up<a aria-hidden="true" tabindex="-1" href="#wrapping-up" class="internal alias"> §</a></h2>
<p>Building systems with a reasonable cost of change requires you to have ATs engineered to help you, not become a maintenance burden. They can be used as a means of guiding, or as a GOOS says, “growing” your software methodically.</p>
<p>Hopefully, with this example, you can see our application’s predictable, structured workflow for driving change and how you could use it for your work.</p>
<p>You can imagine talking to a stakeholder who wants to extend the system you work on in some way. Capture it in a domain-centric, implementation-agnostic way in a specification, and use it as a north star towards your efforts. Riya and I describe leveraging BDD techniques like “Example Mapping” <a href="https://www.youtube.com/watch?v=ZMWJCk_0WrY" class="external alias">in our GopherconUK talk</a> to help you understand the essential complexity more deeply and allow you to write more detailed and meaningful specifications.</p>
<p>Separating essential and accidental complexity concerns will make your work less ad-hoc and more structured and deliberate; this ensures the resiliency of your acceptance tests and helps them become less of a maintenance burden.</p>
<p>Dave Farley gives an excellent tip:</p>
<blockquote>
<p>Imagine the least technical person that you can think of, who understands the problem-domain, reading your Acceptance Tests. The tests should make sense to that person.</p>
</blockquote>
<p>Specifications should then double up as documentation. They should specify clearly how a system should behave. This idea is the principle around tools like <a href="https://cucumber.io" class="external alias">Cucumber</a>, which offers you a DSL for capturing behaviours as code, and then you convert that DSL into system calls, just like we did here.</p>
<h3 id="what-has-been-covered">What has been covered<a aria-hidden="true" tabindex="-1" href="#what-has-been-covered" class="internal alias"> §</a></h3>
<ul>
<li>Writing abstract specifications allows you to express the essential complexity of the problem you’re solving and remove accidental complexity. This will enable you to reuse the specifications in different contexts.</li>
<li>How to use <a href="https://golang.testcontainers.org" class="external alias">Testcontainers</a> to manage the life-cycle of your system for ATs. This allows you to thoroughly test the image you intend to ship on your computer, giving you fast feedback and confidence.</li>
<li>A brief intro into containerising your application with Docker</li>
<li>gRPC</li>
<li>Rather than chasing canned folder structures, you can use your development approach to naturally drive out the structure of your application, based on your own needs</li>
</ul>
<h3 id="further-material">Further material<a aria-hidden="true" tabindex="-1" href="#further-material" class="internal alias"> §</a></h3>
<ul>
<li>In this example, our “DSL” is not much of a DSL; we just used interfaces to decouple our specification from the real world and allow us to express domain logic cleanly. As your system grows, this level of abstraction might become clumsy and unclear. <a href="https://cucumber.io/blog/bdd/understanding-screenplay-(part-1)/" class="external alias">Read into the “Screenplay Pattern”</a> if you want to find more ideas as to how to structure your specifications.</li>
<li>For emphasis, <a href="http://www.growing-object-oriented-software.com" class="external alias">Growing Object-Oriented Software, Guided by Tests,</a> is a classic. It demonstrates applying this “London style”, “top-down” approach to writing software. Anyone who has enjoyed Learn Go with Tests should get much value from reading GOOS.</li>
<li><a href="https://github.com/quii/go-specs-greet" class="external alias">In the example code repository</a>, there’s more code and ideas I haven’t written about here, such as multi-stage docker build, you may wish to check this out.
<ul>
<li>In particular, <em>for fun</em>, I made a <strong>third program</strong>, a website with some HTML forms to <code>Greet</code> and <code>Curse</code>. The <code>Driver</code> leverages the excellent-looking <a href="https://github.com/go-rod/rod" class="external">https://github.com/go-rod/rod</a> module, which allows it to work with the website with a browser, just like a user would. Looking at the git history, you can see how I started not using any templating tools “just to make it work” Then, once I passed my acceptance test, I had the freedom to do so without fear of breaking things. —></li>
</ul>
</li>
</ul></article></div><div class="right sidebar"><div class="graph "><h3>Graph View</h3><div class="graph-outer"><div id="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[]}"></div><svg version="1.1" id="global-graph-icon" xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xmlSpace="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
	s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
	c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
	C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
	c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
	v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
	s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
	C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
	S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
	s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
	s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></div><div id="global-graph-outer"><div id="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[]}"></div></div></div><div class="toc desktop-only"><button type="button" id="toc" class><h3>Table of Contents</h3><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="toc-content"><ul class="overflow"><li class="depth-0"><a href="#learn-go-with-tests---scaling-acceptance-tests-and-light-intro-to-grpc" data-for="learn-go-with-tests---scaling-acceptance-tests-and-light-intro-to-grpc">Learn Go with Tests - Scaling Acceptance Tests (and light intro to gRPC)</a></li><li class="depth-1"><a href="#prerequisite-material" data-for="prerequisite-material">Prerequisite material</a></li><li class="depth-1"><a href="#recap" data-for="recap">Recap</a></li><li class="depth-1"><a href="#anatomy-of-bad-acceptance-tests" data-for="anatomy-of-bad-acceptance-tests">Anatomy of bad acceptance tests</a></li><li class="depth-2"><a href="#tight-coupling" data-for="tight-coupling">Tight-coupling</a></li><li class="depth-1"><a href="#anatomy-of-good-acceptance-tests" data-for="anatomy-of-good-acceptance-tests">Anatomy of good acceptance tests</a></li><li class="depth-2"><a href="#on-types-of-complexity" data-for="on-types-of-complexity">On types of complexity</a></li><li class="depth-2"><a href="#separation-of-concerns" data-for="separation-of-concerns">Separation of concerns</a></li><li class="depth-2"><a href="#testing-on-steroids" data-for="testing-on-steroids">Testing on steroids</a></li><li class="depth-2"><a href="#acceptance-tests-changing-for-the-right-reasons" data-for="acceptance-tests-changing-for-the-right-reasons">Acceptance tests changing for the right reasons</a></li><li class="depth-2"><a href="#acceptance-tests-as-a-method-for-software-development" data-for="acceptance-tests-as-a-method-for-software-development">Acceptance tests as a method for software development</a></li><li class="depth-1"><a href="#enough-talk-time-to-code" data-for="enough-talk-time-to-code">Enough talk, time to code</a></li><li class="depth-2"><a href="#first-system-http-api" data-for="first-system-http-api">First system: HTTP API</a></li><li class="depth-1"><a href="#write-the-test-first" data-for="write-the-test-first">Write the test first</a></li><li class="depth-1"><a href="#try-to-run-the-test" data-for="try-to-run-the-test">Try to run the test</a></li><li class="depth-1"><a href="#write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output" data-for="write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output">Write the minimal amount of code for the test to run and check the failing test output</a></li><li class="depth-2"><a href="#running-our-application" data-for="running-our-application">Running our application</a></li><li class="depth-1"><a href="#write-enough-code-to-make-it-pass" data-for="write-enough-code-to-make-it-pass">Write enough code to make it pass</a></li><li class="depth-1"><a href="#refactor" data-for="refactor">Refactor</a></li><li class="depth-1"><a href="#reflect" data-for="reflect">Reflect</a></li><li class="depth-1"><a href="#write-the-test-first-1" data-for="write-the-test-first-1">Write the test first</a></li><li class="depth-1"><a href="#try-to-run-the-test-1" data-for="try-to-run-the-test-1">Try to run the test</a></li><li class="depth-1"><a href="#write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output-1" data-for="write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output-1">Write the minimal amount of code for the test to run and check the failing test output</a></li><li class="depth-1"><a href="#write-enough-code-to-make-it-pass-1" data-for="write-enough-code-to-make-it-pass-1">Write enough code to make it pass</a></li><li class="depth-1"><a href="#refactor-1" data-for="refactor-1">Refactor</a></li><li class="depth-1"><a href="#a-slight-diversion-in-to-the-adapter-design-pattern" data-for="a-slight-diversion-in-to-the-adapter-design-pattern">A slight diversion in to the &quot;adapter&quot; design pattern</a></li><li class="depth-1"><a href="#reflect-1" data-for="reflect-1">Reflect</a></li><li class="depth-2"><a href="#making-the-change-easy" data-for="making-the-change-easy">Making the change easy</a></li><li class="depth-1"><a href="#write-the-test-first-2" data-for="write-the-test-first-2">Write the test first</a></li><li class="depth-1"><a href="#try-to-run-the-test-2" data-for="try-to-run-the-test-2">Try to run the test</a></li><li class="depth-1"><a href="#write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output-2" data-for="write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output-2">Write the minimal amount of code for the test to run and check the failing test output</a></li><li class="depth-1"><a href="#write-enough-code-to-make-it-pass-2" data-for="write-enough-code-to-make-it-pass-2">Write enough code to make it pass</a></li><li class="depth-2"><a href="#grpc" data-for="grpc">gRPC</a></li><li class="depth-1"><a href="#refactor-2" data-for="refactor-2">Refactor</a></li><li class="depth-2"><a href="#simplify-main" data-for="simplify-main">Simplify main</a></li><li class="depth-2"><a href="#dont-redial-in-our-driver-every-time" data-for="dont-redial-in-our-driver-every-time">Don't redial in our driver every time</a></li><li class="depth-2"><a href="#consolidating-dockerfile" data-for="consolidating-dockerfile">Consolidating Dockerfile</a></li><li class="depth-2"><a href="#separating-different-kinds-of-tests" data-for="separating-different-kinds-of-tests">Separating different kinds of tests</a></li><li class="depth-2"><a href="#when-should-i-write-acceptance-tests" data-for="when-should-i-write-acceptance-tests">When should I write acceptance tests?</a></li><li class="depth-1"><a href="#iterating-on-our-work" data-for="iterating-on-our-work">Iterating on our work</a></li><li class="depth-1"><a href="#write-the-test-first-3" data-for="write-the-test-first-3">Write the test first</a></li><li class="depth-1"><a href="#try-to-run-the-test-3" data-for="try-to-run-the-test-3">Try to run the test</a></li><li class="depth-1"><a href="#write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output-3" data-for="write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output-3">Write the minimal amount of code for the test to run and check the failing test output</a></li><li class="depth-1"><a href="#write-enough-code-to-make-it-pass-3" data-for="write-enough-code-to-make-it-pass-3">Write enough code to make it pass</a></li><li class="depth-2"><a href="#update-driver" data-for="update-driver">Update driver</a></li><li class="depth-2"><a href="#update-server" data-for="update-server">Update server</a></li><li class="depth-1"><a href="#refactor-3" data-for="refactor-3">Refactor</a></li><li class="depth-1"><a href="#implementing-curse-for-the-http-server" data-for="implementing-curse-for-the-http-server">Implementing Curse for the HTTP server</a></li><li class="depth-1"><a href="#enhance-both-systems-by-updating-the-domain-logic-with-a-unit-test" data-for="enhance-both-systems-by-updating-the-domain-logic-with-a-unit-test">Enhance both systems by updating the domain logic with a unit test</a></li><li class="depth-1"><a href="#wrapping-up" data-for="wrapping-up">Wrapping up</a></li><li class="depth-2"><a href="#what-has-been-covered" data-for="what-has-been-covered">What has been covered</a></li><li class="depth-2"><a href="#further-material" data-for="further-material">Further material</a></li></ul></div></div><div class="backlinks "><h3>Backlinks</h3><ul class="overflow"><li>No backlinks found</li></ul></div></div></div><footer class><hr/><p>Created with <a href="https://quartz.jzhao.xyz/">Quartz v4.1.1</a>, © 2023</p><ul><li><a href="https://github.com/mindulle">GitHub</a></li></ul></footer></div></body><script type="application/javascript">// quartz/components/scripts/quartz/components/scripts/callout.inline.ts
function toggleCallout() {
  const outerBlock = this.parentElement;
  outerBlock.classList.toggle(`is-collapsed`);
  const collapsed = outerBlock.classList.contains(`is-collapsed`);
  const height = collapsed ? this.scrollHeight : outerBlock.scrollHeight;
  outerBlock.style.maxHeight = height + `px`;
  let current = outerBlock;
  let parent = outerBlock.parentElement;
  while (parent) {
    if (!parent.classList.contains(`callout`)) {
      return;
    }
    const collapsed2 = parent.classList.contains(`is-collapsed`);
    const height2 = collapsed2 ? parent.scrollHeight : parent.scrollHeight + current.scrollHeight;
    parent.style.maxHeight = height2 + `px`;
    current = parent;
    parent = parent.parentElement;
  }
}
function setupCallout() {
  const collapsible = document.getElementsByClassName(
    `callout is-collapsible`
  );
  for (const div of collapsible) {
    const title = div.firstElementChild;
    if (title) {
      title.removeEventListener(`click`, toggleCallout);
      title.addEventListener(`click`, toggleCallout);
      const collapsed = div.classList.contains(`is-collapsed`);
      const height = collapsed ? title.scrollHeight : div.scrollHeight;
      div.style.maxHeight = height + `px`;
    }
  }
}
document.addEventListener(`nav`, setupCallout);
window.addEventListener(`resize`, setupCallout);
</script><script type="module">
          import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
          const darkMode = document.documentElement.getAttribute('saved-theme') === 'dark'
          mermaid.initialize({
            startOnLoad: false,
            securityLevel: 'loose',
            theme: darkMode ? 'dark' : 'default'
          });
          document.addEventListener('nav', async () => {
            await mermaid.run({
              querySelector: '.mermaid'
            })
          });
          </script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/copy-tex.min.js" type="application/javascript"></script><script type="application/javascript">
          const socket = new WebSocket('ws://localhost:3001')
          socket.addEventListener('message', () => document.location.reload())
        </script><script src="../../../../postscript.js" type="module"></script></html>