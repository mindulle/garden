<!DOCTYPE html>
<html><head><title>websockets</title><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:title" content="websockets"/><meta property="og:description" content="WebSockets § You can find all the code for this chapter here In this chapter we’ll learn how to use WebSockets to improve our application. Project recap § We have two applications in our poker codebase Command line app."/><meta property="og:image" content="https://mindulle.github.io/garden/static/og-image.png"/><meta property="og:width" content="1200"/><meta property="og:height" content="675"/><link rel="icon" href="../../../../../static/icon.png"/><meta name="description" content="WebSockets § You can find all the code for this chapter here In this chapter we’ll learn how to use WebSockets to improve our application. Project recap § We have two applications in our poker codebase Command line app."/><meta name="generator" content="Quartz"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link href="../../../../../index.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://fonts.googleapis.com/css2?family=IBM Plex Mono&amp;family=Schibsted Grotesk:wght@400;700&amp;family=Source Sans Pro:ital,wght@0,400;0,600;1,400;1,600&amp;display=swap" rel="stylesheet" type="text/css" spa-preserve/><script src="../../../../../prescript.js" type="application/javascript" spa-preserve></script><script type="application/javascript" spa-preserve>const fetchData = fetch(`../../../../../static/contentIndex.json`).then(data => data.json())</script></head><body data-slug="fruit/Coding/Testing/go/build_an_application/websockets"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h1 class="page-title "><a href="../../../../..">Mindulle Garden</a></h1><div class="spacer mobile-only"></div><div class="search "><div id="search-icon"><p>Search</p><div></div><svg tabIndex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search</title><desc id="desc">Search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg></div><div id="search-container"><div id="search-space"><input autocomplete="off" id="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div id="results-container"></div></div></div></div><div class="darkmode "><input class="toggle" id="darkmode-toggle" type="checkbox" tabIndex="-1"/><label id="toggle-label-light" for="darkmode-toggle" tabIndex="-1"><svg xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" version="1.1" id="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35;" xmlSpace="preserve"><title>Light mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg></label><label id="toggle-label-dark" for="darkmode-toggle" tabIndex="-1"><svg xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" version="1.1" id="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'" xmlSpace="preserve"><title>Dark mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></label></div><div class="explorer desktop-only"><button type="button" id="explorer" data-behavior="collapse" data-collapsed="collapsed" data-savestate="true" data-tree="[{&quot;path&quot;:&quot;core&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/fundamental&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/fundamental/design&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/law&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/law/computing&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/law/dev&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/law/management&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/law/ux&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/paradigm&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/paradigm/FP&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/principle&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/principle/computing&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/principle/dev&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/principle/management&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;core/background-knowledge/principle/ux&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/smells&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/smells/bloaters&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/smells/change-preventers&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/smells/couplers&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/smells/dispensables&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/smells/oo-abusers&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/smells/other&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/techniques&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/techniques/composing-methods&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/techniques/dealing-with-generalization&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/techniques/moving-features-between-objects&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/techniques/organizing-data&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/techniques/simplifying-conditional-expressions&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/techniques/simplifying-method-calls&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/refactoring/what-is-refactoring&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/automation&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/go&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/go/anti_patterns&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/go/build_an_application&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/go/fundamentals&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/go/testing_fundamentals&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/go/tips&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/javascript&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/javascript/0 The Golden Rule&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/javascript/1 The Test Anatomy&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/javascript/2 Backend&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/javascript/3 Frontend&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/javascript/4 Measuring Tests Effectiveness&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/javascript/5 Continuous Integration&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;flower/testing/javascript/assets&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/Design Patterns&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/Design Patterns/catalog&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/Design Patterns/catalog/behavioral&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/Design Patterns/catalog/creational&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/Design Patterns/catalog/structural&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/Design Patterns/intro&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/Design Patterns/react&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/Design Patterns/vanilla&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/rendering&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/rendering/react&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Patterns/rendering/vanilla&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/go&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/go/anti_patterns&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/go/build_an_application&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/go/fundamentals&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/go/testing_fundamentals&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/go/tips&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/javascript&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/javascript/0 The Golden Rule&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/javascript/1 The Test Anatomy&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/javascript/2 Backend&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/javascript/3 Frontend&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/javascript/4 Measuring Tests Effectiveness&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/javascript/5 Continuous Integration&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Coding/Testing/javascript/assets&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/bizSys&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/bizSys/externalView&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/bizSys/internalView&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/ITSys&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/ITSys/behavioralView&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/ITSys/externalView&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/ITSys/externalView/the-elements-of-view&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/ITSys/interactionView&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/ITSys/structuralView&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/prepIntegr&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/prepIntegr/processView&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;fruit/Diagraming/prepIntegr/staticView&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;seed&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;seed/computing&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;seed/software development&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;seed/Unix&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;tree&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;tree/Product Design&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;tree/Product Design/Design&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;tree/Software Development&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;tree/Software Development/Architecture&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;tree/Software Development/Project Layout&quot;,&quot;collapsed&quot;:true}]"><h1>Explorer</h1><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="explorer-content"><ul class="overflow" id="explorer-ul"><li><div><div class="folder-outer open"><ul style="padding-left:0;" class="content" data-folderul><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core"><button class="folder-button"><p class="folder-title">core</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge"><button class="folder-button"><p class="folder-title">background-knowledge</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/fundamental"><button class="folder-button"><p class="folder-title">fundamental</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/fundamental"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/fundamental/design"><button class="folder-button"><p class="folder-title">design</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/fundamental/design"><li><li><a href="../../../../../core/background-knowledge/fundamental/design/BASIS_01_laws" data-for="core/background-knowledge/fundamental/design/BASIS_01_laws">BASIS_01_laws</a></li></li><li><li><a href="../../../../../core/background-knowledge/fundamental/design/BASIS_02_process" data-for="core/background-knowledge/fundamental/design/BASIS_02_process">BASIS_02_process</a></li></li><li><li><a href="../../../../../core/background-knowledge/fundamental/design/BASIS_02_process-gist" data-for="core/background-knowledge/fundamental/design/BASIS_02_process-gist">BASIS_02_process-gist</a></li></li><li><li><a href="../../../../../core/background-knowledge/fundamental/design/BASIS_03_information_architecture" data-for="core/background-knowledge/fundamental/design/BASIS_03_information_architecture">BASIS_03_information_architecture</a></li></li><li><li><a href="../../../../../core/background-knowledge/fundamental/design/LAYOUT_01_artboard_and_margin" data-for="core/background-knowledge/fundamental/design/LAYOUT_01_artboard_and_margin">LAYOUT_01_artboard_and_margin</a></li></li><li><li><a href="../../../../../core/background-knowledge/fundamental/design/LAYOUT_02_grid_basis" data-for="core/background-knowledge/fundamental/design/LAYOUT_02_grid_basis">LAYOUT_02_grid_basis</a></li></li><li><li><a href="../../../../../core/background-knowledge/fundamental/design/LAYOUT_03_set_grid_layout" data-for="core/background-knowledge/fundamental/design/LAYOUT_03_set_grid_layout">LAYOUT_03_set_grid_layout</a></li></li><li><li><a href="../../../../../core/background-knowledge/fundamental/design/LAYOUT_04_grouping" data-for="core/background-knowledge/fundamental/design/LAYOUT_04_grouping">LAYOUT_04_grouping</a></li></li><li><li><a href="../../../../../core/background-knowledge/fundamental/design/LAYOUT_05_sorting" data-for="core/background-knowledge/fundamental/design/LAYOUT_05_sorting">LAYOUT_05_sorting</a></li></li><li><li><a href="../../../../../core/background-knowledge/fundamental/design/LAYOUT_06_contrast" data-for="core/background-knowledge/fundamental/design/LAYOUT_06_contrast">LAYOUT_06_contrast</a></li></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/law"><button class="folder-button"><p class="folder-title">law</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/law"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/law/computing"><button class="folder-button"><p class="folder-title">computing</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/law/computing"><li><li><a href="../../../../../core/background-knowledge/law/computing/Amdahls-Law" data-for="core/background-knowledge/law/computing/Amdahls-Law">Amdahls-Law</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/computing/Galls-Law" data-for="core/background-knowledge/law/computing/Galls-Law">Galls-Law</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/computing/Metcalfes-Law" data-for="core/background-knowledge/law/computing/Metcalfes-Law">Metcalfes-Law</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/computing/Moores-Law" data-for="core/background-knowledge/law/computing/Moores-Law">Moores-Law</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/computing/Reeds-Law" data-for="core/background-knowledge/law/computing/Reeds-Law">Reeds-Law</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/computing/The-Law-of-Conservation-of-Complexity-Teslers-Law" data-for="core/background-knowledge/law/computing/The-Law-of-Conservation-of-Complexity-Teslers-Law">The-Law-of-Conservation-of-Complexity-Teslers-Law</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/computing/The-Law-of-Leaky-Abstractions" data-for="core/background-knowledge/law/computing/The-Law-of-Leaky-Abstractions">The-Law-of-Leaky-Abstractions</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/law/dev"><button class="folder-button"><p class="folder-title">dev</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/law/dev"><li><li><a href="../../../../../core/background-knowledge/law/dev/Brooks-Law" data-for="core/background-knowledge/law/dev/Brooks-Law">Brooks-Law</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/dev/Conways-Law" data-for="core/background-knowledge/law/dev/Conways-Law">Conways-Law</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/dev/Cunninghams-Law" data-for="core/background-knowledge/law/dev/Cunninghams-Law">Cunninghams-Law</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/dev/Hutbers-Law" data-for="core/background-knowledge/law/dev/Hutbers-Law">Hutbers-Law</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/dev/Hyrums-Law-The-Law-of-Implicit-Interfaces" data-for="core/background-knowledge/law/dev/Hyrums-Law-The-Law-of-Implicit-Interfaces">Hyrums-Law-The-Law-of-Implicit-Interfaces</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/dev/Kernighans-Law" data-for="core/background-knowledge/law/dev/Kernighans-Law">Kernighans-Law</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/dev/The-Law-of-Triviality" data-for="core/background-knowledge/law/dev/The-Law-of-Triviality">The-Law-of-Triviality</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/dev/Wadlers-Law" data-for="core/background-knowledge/law/dev/Wadlers-Law">Wadlers-Law</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/dev/Wheatons-Law" data-for="core/background-knowledge/law/dev/Wheatons-Law">Wheatons-Law</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/law/management"><button class="folder-button"><p class="folder-title">management</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/law/management"><li><li><a href="../../../../../core/background-knowledge/law/management/Goodharts-Law" data-for="core/background-knowledge/law/management/Goodharts-Law">Goodharts-Law</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/management/Hofstadters-Law" data-for="core/background-knowledge/law/management/Hofstadters-Law">Hofstadters-Law</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/management/Parkinsons-Law" data-for="core/background-knowledge/law/management/Parkinsons-Law">Parkinsons-Law</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/management/Putts-Law" data-for="core/background-knowledge/law/management/Putts-Law">Putts-Law</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/management/The-Hype-Cycle--Amaras-Law" data-for="core/background-knowledge/law/management/The-Hype-Cycle--Amaras-Law">The-Hype-Cycle--Amaras-Law</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/law/ux"><button class="folder-button"><p class="folder-title">ux</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/law/ux"><li><li><a href="../../../../../core/background-knowledge/law/ux/[cognitiveBias]Peak-End_Rule" data-for="core/background-knowledge/law/ux/[cognitiveBias]Peak-End_Rule">[cognitiveBias]Peak-End_Rule</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/ux/[cognitiveBias]Serial_Position_Effect" data-for="core/background-knowledge/law/ux/[cognitiveBias]Serial_Position_Effect">[cognitiveBias]Serial_Position_Effect</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/ux/[cognitiveBias]Von_Restorff_Effect" data-for="core/background-knowledge/law/ux/[cognitiveBias]Von_Restorff_Effect">[cognitiveBias]Von_Restorff_Effect</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/ux/[cognitiveBias]Zeigarnik_Effect" data-for="core/background-knowledge/law/ux/[cognitiveBias]Zeigarnik_Effect">[cognitiveBias]Zeigarnik_Effect</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/ux/[gestalt]Law_of_Common_Region" data-for="core/background-knowledge/law/ux/[gestalt]Law_of_Common_Region">[gestalt]Law_of_Common_Region</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/ux/[gestalt]Law_of_Prägnanz" data-for="core/background-knowledge/law/ux/[gestalt]Law_of_Prägnanz">[gestalt]Law_of_Prägnanz</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/ux/[gestalt]Law_of_Proximity" data-for="core/background-knowledge/law/ux/[gestalt]Law_of_Proximity">[gestalt]Law_of_Proximity</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/ux/[gestalt]Law_of_Similarity" data-for="core/background-knowledge/law/ux/[gestalt]Law_of_Similarity">[gestalt]Law_of_Similarity</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/ux/[gestalt]Law_of_Uniform_Connectedness" data-for="core/background-knowledge/law/ux/[gestalt]Law_of_Uniform_Connectedness">[gestalt]Law_of_Uniform_Connectedness</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/ux/[heuristic]Aesthetic-Usability_Effect" data-for="core/background-knowledge/law/ux/[heuristic]Aesthetic-Usability_Effect">[heuristic]Aesthetic-Usability_Effect</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/ux/[heuristic]Fitts’s_Law" data-for="core/background-knowledge/law/ux/[heuristic]Fitts’s_Law">[heuristic]Fitts’s_Law</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/ux/[heuristic]Goal-Gradient_Effect" data-for="core/background-knowledge/law/ux/[heuristic]Goal-Gradient_Effect">[heuristic]Goal-Gradient_Effect</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/ux/[heuristic]Hick’s_Law" data-for="core/background-knowledge/law/ux/[heuristic]Hick’s_Law">[heuristic]Hick’s_Law</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/ux/[heuristic]Jakob’s_Law" data-for="core/background-knowledge/law/ux/[heuristic]Jakob’s_Law">[heuristic]Jakob’s_Law</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/ux/[heuristic]Miller’s_Law" data-for="core/background-knowledge/law/ux/[heuristic]Miller’s_Law">[heuristic]Miller’s_Law</a></li></li><li><li><a href="../../../../../core/background-knowledge/law/ux/[heuristic]Parkinson’s_Law" data-for="core/background-knowledge/law/ux/[heuristic]Parkinson’s_Law">[heuristic]Parkinson’s_Law</a></li></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/paradigm"><button class="folder-button"><p class="folder-title">paradigm</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/paradigm"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/paradigm/FP"><button class="folder-button"><p class="folder-title">FP</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/paradigm/FP"><li><li><a href="../../../../../core/background-knowledge/paradigm/FP/ApendixA_Essential_Functions_Support" data-for="core/background-knowledge/paradigm/FP/ApendixA_Essential_Functions_Support">ApendixA_Essential_Functions_Support</a></li></li><li><li><a href="../../../../../core/background-knowledge/paradigm/FP/ApendixB_Algebraic_Structures_Support" data-for="core/background-knowledge/paradigm/FP/ApendixB_Algebraic_Structures_Support">ApendixB_Algebraic_Structures_Support</a></li></li><li><li><a href="../../../../../core/background-knowledge/paradigm/FP/ApendixC_Pointfree_Utilities" data-for="core/background-knowledge/paradigm/FP/ApendixC_Pointfree_Utilities">ApendixC_Pointfree_Utilities</a></li></li><li><li><a href="../../../../../core/background-knowledge/paradigm/FP/CH_01_What_Ever_Are_We_Doing" data-for="core/background-knowledge/paradigm/FP/CH_01_What_Ever_Are_We_Doing">CH_01_What_Ever_Are_We_Doing</a></li></li><li><li><a href="../../../../../core/background-knowledge/paradigm/FP/CH_02_First_Class_Functions" data-for="core/background-knowledge/paradigm/FP/CH_02_First_Class_Functions">CH_02_First_Class_Functions</a></li></li><li><li><a href="../../../../../core/background-knowledge/paradigm/FP/CH_03_Pure_Happiness_with_Pure_Functions" data-for="core/background-knowledge/paradigm/FP/CH_03_Pure_Happiness_with_Pure_Functions">CH_03_Pure_Happiness_with_Pure_Functions</a></li></li><li><li><a href="../../../../../core/background-knowledge/paradigm/FP/CH_04_Currying" data-for="core/background-knowledge/paradigm/FP/CH_04_Currying">CH_04_Currying</a></li></li><li><li><a href="../../../../../core/background-knowledge/paradigm/FP/CH_05_Coding_by_Composing" data-for="core/background-knowledge/paradigm/FP/CH_05_Coding_by_Composing">CH_05_Coding_by_Composing</a></li></li><li><li><a href="../../../../../core/background-knowledge/paradigm/FP/CH_06_Example_Application" data-for="core/background-knowledge/paradigm/FP/CH_06_Example_Application">CH_06_Example_Application</a></li></li><li><li><a href="../../../../../core/background-knowledge/paradigm/FP/CH_07_Hindley-Milner_and_Me" data-for="core/background-knowledge/paradigm/FP/CH_07_Hindley-Milner_and_Me">CH_07_Hindley-Milner_and_Me</a></li></li><li><li><a href="../../../../../core/background-knowledge/paradigm/FP/CH_08_Tupperware" data-for="core/background-knowledge/paradigm/FP/CH_08_Tupperware">CH_08_Tupperware</a></li></li><li><li><a href="../../../../../core/background-knowledge/paradigm/FP/CH_09_Monadic_Onions" data-for="core/background-knowledge/paradigm/FP/CH_09_Monadic_Onions">CH_09_Monadic_Onions</a></li></li><li><li><a href="../../../../../core/background-knowledge/paradigm/FP/CH_10_Applicative_Functors" data-for="core/background-knowledge/paradigm/FP/CH_10_Applicative_Functors">CH_10_Applicative_Functors</a></li></li><li><li><a href="../../../../../core/background-knowledge/paradigm/FP/CH_11_Transform_Again,_Naturally" data-for="core/background-knowledge/paradigm/FP/CH_11_Transform_Again,_Naturally">CH_11_Transform_Again,_Naturally</a></li></li><li><li><a href="../../../../../core/background-knowledge/paradigm/FP/CH_12_Traversing_the_Stone" data-for="core/background-knowledge/paradigm/FP/CH_12_Traversing_the_Stone">CH_12_Traversing_the_Stone</a></li></li><li><li><a href="../../../../../core/background-knowledge/paradigm/FP/CH_13_Monoids_bring_it_all_together" data-for="core/background-knowledge/paradigm/FP/CH_13_Monoids_bring_it_all_together">CH_13_Monoids_bring_it_all_together</a></li></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/principle"><button class="folder-button"><p class="folder-title">principle</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/principle"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/principle/computing"><button class="folder-button"><p class="folder-title">computing</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/principle/computing"><li><li><a href="../../../../../core/background-knowledge/principle/computing/The-Fallacies-of-Distributed-Computing" data-for="core/background-knowledge/principle/computing/The-Fallacies-of-Distributed-Computing">The-Fallacies-of-Distributed-Computing</a></li></li><li><li><a href="../../../../../core/background-knowledge/principle/computing/The-Spotify-Model" data-for="core/background-knowledge/principle/computing/The-Spotify-Model">The-Spotify-Model</a></li></li><li><li><a href="../../../../../core/background-knowledge/principle/computing/The-Unix-Philosophy" data-for="core/background-knowledge/principle/computing/The-Unix-Philosophy">The-Unix-Philosophy</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/principle/dev"><button class="folder-button"><p class="folder-title">dev</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/principle/dev"><li><li><a href="../../../../../core/background-knowledge/principle/dev/Premature-Optimization-Effect" data-for="core/background-knowledge/principle/dev/Premature-Optimization-Effect">Premature-Optimization-Effect</a></li></li><li><li><a href="../../../../../core/background-knowledge/principle/dev/SOLID" data-for="core/background-knowledge/principle/dev/SOLID">SOLID</a></li></li><li><li><a href="../../../../../core/background-knowledge/principle/dev/The-Dependency-Inversion-Principle" data-for="core/background-knowledge/principle/dev/The-Dependency-Inversion-Principle">The-Dependency-Inversion-Principle</a></li></li><li><li><a href="../../../../../core/background-knowledge/principle/dev/The-DRY-Principle" data-for="core/background-knowledge/principle/dev/The-DRY-Principle">The-DRY-Principle</a></li></li><li><li><a href="../../../../../core/background-knowledge/principle/dev/The-Interface-Segregation-Principle" data-for="core/background-knowledge/principle/dev/The-Interface-Segregation-Principle">The-Interface-Segregation-Principle</a></li></li><li><li><a href="../../../../../core/background-knowledge/principle/dev/The-KISS-principle" data-for="core/background-knowledge/principle/dev/The-KISS-principle">The-KISS-principle</a></li></li><li><li><a href="../../../../../core/background-knowledge/principle/dev/The-Liskov-Substitution-Principle" data-for="core/background-knowledge/principle/dev/The-Liskov-Substitution-Principle">The-Liskov-Substitution-Principle</a></li></li><li><li><a href="../../../../../core/background-knowledge/principle/dev/The-OpenClosed-Principle" data-for="core/background-knowledge/principle/dev/The-OpenClosed-Principle">The-OpenClosed-Principle</a></li></li><li><li><a href="../../../../../core/background-knowledge/principle/dev/The-Robustness-Principle-Postels-Law" data-for="core/background-knowledge/principle/dev/The-Robustness-Principle-Postels-Law">The-Robustness-Principle-Postels-Law</a></li></li><li><li><a href="../../../../../core/background-knowledge/principle/dev/The-Single-Responsibility-Principle" data-for="core/background-knowledge/principle/dev/The-Single-Responsibility-Principle">The-Single-Responsibility-Principle</a></li></li><li><li><a href="../../../../../core/background-knowledge/principle/dev/YAGNI" data-for="core/background-knowledge/principle/dev/YAGNI">YAGNI</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/principle/management"><button class="folder-button"><p class="folder-title">management</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/principle/management"><li><li><a href="../../../../../core/background-knowledge/principle/management/Occams-Razor" data-for="core/background-knowledge/principle/management/Occams-Razor">Occams-Razor</a></li></li><li><li><a href="../../../../../core/background-knowledge/principle/management/The-Dilbert-Principle" data-for="core/background-knowledge/principle/management/The-Dilbert-Principle">The-Dilbert-Principle</a></li></li><li><li><a href="../../../../../core/background-knowledge/principle/management/The-Pareto-Principle-The-8020-Rule" data-for="core/background-knowledge/principle/management/The-Pareto-Principle-The-8020-Rule">The-Pareto-Principle-The-8020-Rule</a></li></li><li><li><a href="../../../../../core/background-knowledge/principle/management/The-Peter-Principle" data-for="core/background-knowledge/principle/management/The-Peter-Principle">The-Peter-Principle</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/core/background-knowledge/principle/ux"><button class="folder-button"><p class="folder-title">ux</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/core/background-knowledge/principle/ux"><li><li><a href="../../../../../core/background-knowledge/principle/ux/Doherty_Threshold" data-for="core/background-knowledge/principle/ux/Doherty_Threshold">Doherty_Threshold</a></li></li><li><li><a href="../../../../../core/background-knowledge/principle/ux/Occam’s_Razor" data-for="core/background-knowledge/principle/ux/Occam’s_Razor">Occam’s_Razor</a></li></li><li><li><a href="../../../../../core/background-knowledge/principle/ux/Pareto_Principle" data-for="core/background-knowledge/principle/ux/Pareto_Principle">Pareto_Principle</a></li></li><li><li><a href="../../../../../core/background-knowledge/principle/ux/Postel’s_Law" data-for="core/background-knowledge/principle/ux/Postel’s_Law">Postel’s_Law</a></li></li><li><li><a href="../../../../../core/background-knowledge/principle/ux/Tesler’s_Law" data-for="core/background-knowledge/principle/ux/Tesler’s_Law">Tesler’s_Law</a></li></li></ul></div></div></li></ul></div></div></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower"><button class="folder-button"><p class="folder-title">flower</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring"><button class="folder-button"><p class="folder-title">refactoring</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/smells"><button class="folder-button"><p class="folder-title">smells</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/smells"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/smells/bloaters"><button class="folder-button"><p class="folder-title">bloaters</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/smells/bloaters"><li><li><a href="../../../../../flower/refactoring/smells/bloaters/data-clumps" data-for="flower/refactoring/smells/bloaters/data-clumps">Data Clumps</a></li></li><li><li><a href="../../../../../flower/refactoring/smells/bloaters/large-class" data-for="flower/refactoring/smells/bloaters/large-class">Large Class</a></li></li><li><li><a href="../../../../../flower/refactoring/smells/bloaters/long-method" data-for="flower/refactoring/smells/bloaters/long-method">Long Method</a></li></li><li><li><a href="../../../../../flower/refactoring/smells/bloaters/long-parameter-list" data-for="flower/refactoring/smells/bloaters/long-parameter-list">Long Parameter List</a></li></li><li><li><a href="../../../../../flower/refactoring/smells/bloaters/primitive-obsession" data-for="flower/refactoring/smells/bloaters/primitive-obsession">Primitive Obsession</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/smells/change-preventers"><button class="folder-button"><p class="folder-title">change-preventers</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/smells/change-preventers"><li><li><a href="../../../../../flower/refactoring/smells/change-preventers/divergent-change" data-for="flower/refactoring/smells/change-preventers/divergent-change">Divergent Change</a></li></li><li><li><a href="../../../../../flower/refactoring/smells/change-preventers/parallel-inheritance-hierarchies" data-for="flower/refactoring/smells/change-preventers/parallel-inheritance-hierarchies">Parallel Inheritance Hierarchies</a></li></li><li><li><a href="../../../../../flower/refactoring/smells/change-preventers/shotgun-surgery" data-for="flower/refactoring/smells/change-preventers/shotgun-surgery">Shotgun Surgery</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/smells/couplers"><button class="folder-button"><p class="folder-title">couplers</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/smells/couplers"><li><li><a href="../../../../../flower/refactoring/smells/couplers/feature-envy" data-for="flower/refactoring/smells/couplers/feature-envy">Feature Envy</a></li></li><li><li><a href="../../../../../flower/refactoring/smells/couplers/inappropriate-intimacy" data-for="flower/refactoring/smells/couplers/inappropriate-intimacy">Inappropriate Intimacy</a></li></li><li><li><a href="../../../../../flower/refactoring/smells/couplers/message-chains" data-for="flower/refactoring/smells/couplers/message-chains">Message Chains</a></li></li><li><li><a href="../../../../../flower/refactoring/smells/couplers/middle-man" data-for="flower/refactoring/smells/couplers/middle-man">Middle Man</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/smells/dispensables"><button class="folder-button"><p class="folder-title">dispensables</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/smells/dispensables"><li><li><a href="../../../../../flower/refactoring/smells/dispensables/comments" data-for="flower/refactoring/smells/dispensables/comments">Comments</a></li></li><li><li><a href="../../../../../flower/refactoring/smells/dispensables/data-class" data-for="flower/refactoring/smells/dispensables/data-class">Data Class</a></li></li><li><li><a href="../../../../../flower/refactoring/smells/dispensables/dead-code" data-for="flower/refactoring/smells/dispensables/dead-code">Dead Code</a></li></li><li><li><a href="../../../../../flower/refactoring/smells/dispensables/duplicate-code" data-for="flower/refactoring/smells/dispensables/duplicate-code">Duplicate Code</a></li></li><li><li><a href="../../../../../flower/refactoring/smells/dispensables/lazy-class" data-for="flower/refactoring/smells/dispensables/lazy-class">Lazy Class</a></li></li><li><li><a href="../../../../../flower/refactoring/smells/dispensables/speculative-generality" data-for="flower/refactoring/smells/dispensables/speculative-generality">Speculative Generality</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/smells/oo-abusers"><button class="folder-button"><p class="folder-title">oo-abusers</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/smells/oo-abusers"><li><li><a href="../../../../../flower/refactoring/smells/oo-abusers/alternative-classes-with-different-interfaces" data-for="flower/refactoring/smells/oo-abusers/alternative-classes-with-different-interfaces">Alternative Classes with Different Interfaces</a></li></li><li><li><a href="../../../../../flower/refactoring/smells/oo-abusers/refused-bequest" data-for="flower/refactoring/smells/oo-abusers/refused-bequest">Refused Bequest</a></li></li><li><li><a href="../../../../../flower/refactoring/smells/oo-abusers/switch-statements" data-for="flower/refactoring/smells/oo-abusers/switch-statements">Switch Statements</a></li></li><li><li><a href="../../../../../flower/refactoring/smells/oo-abusers/temporary-field" data-for="flower/refactoring/smells/oo-abusers/temporary-field">Temporary Field</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/smells/other"><button class="folder-button"><p class="folder-title">other</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/smells/other"><li><li><a href="../../../../../flower/refactoring/smells/other/incomplete-library-class" data-for="flower/refactoring/smells/other/incomplete-library-class">Incomplete Library Class</a></li></li></ul></div></div></li><li><li><a href="../../../../../flower/refactoring/smells/bloaters" data-for="flower/refactoring/smells/bloaters">Bloaters</a></li></li><li><li><a href="../../../../../flower/refactoring/smells/change-preventers" data-for="flower/refactoring/smells/change-preventers">Change Preventers</a></li></li><li><li><a href="../../../../../flower/refactoring/smells/couplers" data-for="flower/refactoring/smells/couplers">Couplers</a></li></li><li><li><a href="../../../../../flower/refactoring/smells/dispensables" data-for="flower/refactoring/smells/dispensables">Dispensables</a></li></li><li><li><a href="../../../../../flower/refactoring/smells/oo-abusers" data-for="flower/refactoring/smells/oo-abusers">Object-Orientation Abusers</a></li></li><li><li><a href="../../../../../flower/refactoring/smells/other" data-for="flower/refactoring/smells/other">Other Smells</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/techniques"><button class="folder-button"><p class="folder-title">techniques</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/techniques"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/techniques/composing-methods"><button class="folder-button"><p class="folder-title">composing-methods</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/techniques/composing-methods"><li><li><a href="../../../../../flower/refactoring/techniques/composing-methods/extract-method" data-for="flower/refactoring/techniques/composing-methods/extract-method">Extract Method</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/composing-methods/extract-variable" data-for="flower/refactoring/techniques/composing-methods/extract-variable">Extract Variable</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/composing-methods/inline-method" data-for="flower/refactoring/techniques/composing-methods/inline-method">Inline Method</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/composing-methods/inline-temp" data-for="flower/refactoring/techniques/composing-methods/inline-temp">Inline Temp</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/composing-methods/remove-assignments-to-parameters" data-for="flower/refactoring/techniques/composing-methods/remove-assignments-to-parameters">Remove Assignments to Parameters</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/composing-methods/replace-method-with-method-object" data-for="flower/refactoring/techniques/composing-methods/replace-method-with-method-object">Replace Method with Method Object</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/composing-methods/replace-temp-with-query" data-for="flower/refactoring/techniques/composing-methods/replace-temp-with-query">Replace Temp with Query</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/composing-methods/split-temporary-variable" data-for="flower/refactoring/techniques/composing-methods/split-temporary-variable">Split Temporary Variable</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/composing-methods/substitute-algorithm" data-for="flower/refactoring/techniques/composing-methods/substitute-algorithm">Substitute Algorithm</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/techniques/dealing-with-generalization"><button class="folder-button"><p class="folder-title">dealing-with-generalization</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/techniques/dealing-with-generalization"><li><li><a href="../../../../../flower/refactoring/techniques/dealing-with-generalization/collapse-hierarchy" data-for="flower/refactoring/techniques/dealing-with-generalization/collapse-hierarchy">Collapse Hierarchy</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/dealing-with-generalization/extract-interface" data-for="flower/refactoring/techniques/dealing-with-generalization/extract-interface">Extract Interface</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/dealing-with-generalization/extract-subclass" data-for="flower/refactoring/techniques/dealing-with-generalization/extract-subclass">Extract Subclass</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/dealing-with-generalization/extract-superclass" data-for="flower/refactoring/techniques/dealing-with-generalization/extract-superclass">Extract Superclass</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/dealing-with-generalization/form-template-method" data-for="flower/refactoring/techniques/dealing-with-generalization/form-template-method">Form Template Method</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/dealing-with-generalization/pull-up-constructor-body" data-for="flower/refactoring/techniques/dealing-with-generalization/pull-up-constructor-body">Pull Up Constructor Body</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/dealing-with-generalization/pull-up-field" data-for="flower/refactoring/techniques/dealing-with-generalization/pull-up-field">Pull Up Field</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/dealing-with-generalization/pull-up-method" data-for="flower/refactoring/techniques/dealing-with-generalization/pull-up-method">Pull Up Method</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/dealing-with-generalization/push-down-field" data-for="flower/refactoring/techniques/dealing-with-generalization/push-down-field">Push Down Field</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/dealing-with-generalization/push-down-method" data-for="flower/refactoring/techniques/dealing-with-generalization/push-down-method">Push Down Method</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/dealing-with-generalization/replace-delegation-with-inheritance" data-for="flower/refactoring/techniques/dealing-with-generalization/replace-delegation-with-inheritance">Replace Delegation with Inheritance</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/dealing-with-generalization/replace-inheritance-with-delegation" data-for="flower/refactoring/techniques/dealing-with-generalization/replace-inheritance-with-delegation">Replace Inheritance with Delegation</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/techniques/moving-features-between-objects"><button class="folder-button"><p class="folder-title">moving-features-between-objects</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/techniques/moving-features-between-objects"><li><li><a href="../../../../../flower/refactoring/techniques/moving-features-between-objects/extract-class" data-for="flower/refactoring/techniques/moving-features-between-objects/extract-class">Extract Class</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/moving-features-between-objects/hide-delegate" data-for="flower/refactoring/techniques/moving-features-between-objects/hide-delegate">Hide Delegate</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/moving-features-between-objects/inline-class" data-for="flower/refactoring/techniques/moving-features-between-objects/inline-class">Inline Class</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/moving-features-between-objects/introduce-foreign-method" data-for="flower/refactoring/techniques/moving-features-between-objects/introduce-foreign-method">Introduce Foreign Method</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/moving-features-between-objects/introduce-local-extension" data-for="flower/refactoring/techniques/moving-features-between-objects/introduce-local-extension">Introduce Local Extension</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/moving-features-between-objects/move-field" data-for="flower/refactoring/techniques/moving-features-between-objects/move-field">Move Field</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/moving-features-between-objects/move-method" data-for="flower/refactoring/techniques/moving-features-between-objects/move-method">Move Method</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/moving-features-between-objects/remove-middle-man" data-for="flower/refactoring/techniques/moving-features-between-objects/remove-middle-man">Remove Middle Man</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/techniques/organizing-data"><button class="folder-button"><p class="folder-title">organizing-data</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/techniques/organizing-data"><li><li><a href="../../../../../flower/refactoring/techniques/organizing-data/change-bidirectional-association-to-unidirectional" data-for="flower/refactoring/techniques/organizing-data/change-bidirectional-association-to-unidirectional">Change Bidirectional Association to Unidirectional</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/organizing-data/change-reference-to-value" data-for="flower/refactoring/techniques/organizing-data/change-reference-to-value">Change Reference to Value</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/organizing-data/change-unidirectional-association-to-bidirectional" data-for="flower/refactoring/techniques/organizing-data/change-unidirectional-association-to-bidirectional">Change Unidirectional Association to Bidirectional</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/organizing-data/change-value-to-reference" data-for="flower/refactoring/techniques/organizing-data/change-value-to-reference">Change Value to Reference</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/organizing-data/duplicate-observed-data" data-for="flower/refactoring/techniques/organizing-data/duplicate-observed-data">Duplicate Observed Data</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/organizing-data/encapsulate-collection" data-for="flower/refactoring/techniques/organizing-data/encapsulate-collection">Encapsulate Collection</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/organizing-data/encapsulate-field" data-for="flower/refactoring/techniques/organizing-data/encapsulate-field">Encapsulate Field</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/organizing-data/replace-array-with-object" data-for="flower/refactoring/techniques/organizing-data/replace-array-with-object">Replace Array with Object</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/organizing-data/replace-data-value-with-object" data-for="flower/refactoring/techniques/organizing-data/replace-data-value-with-object">Replace Data Value with Object</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/organizing-data/replace-magic-number-with-symbolic-constant" data-for="flower/refactoring/techniques/organizing-data/replace-magic-number-with-symbolic-constant">Replace Magic Number with Symbolic Constant</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/organizing-data/replace-subclass-with-fields" data-for="flower/refactoring/techniques/organizing-data/replace-subclass-with-fields">Replace Subclass with Fields</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/organizing-data/replace-type-code-with-class" data-for="flower/refactoring/techniques/organizing-data/replace-type-code-with-class">Replace Type Code with Class</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/organizing-data/replace-type-code-with-state-strategy" data-for="flower/refactoring/techniques/organizing-data/replace-type-code-with-state-strategy">Replace Type Code with State/Strategy</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/organizing-data/replace-type-code-with-subclasses" data-for="flower/refactoring/techniques/organizing-data/replace-type-code-with-subclasses">Replace Type Code with Subclasses</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/organizing-data/self-encapsulate-field" data-for="flower/refactoring/techniques/organizing-data/self-encapsulate-field">Self Encapsulate Field</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/techniques/simplifying-conditional-expressions"><button class="folder-button"><p class="folder-title">simplifying-conditional-expressions</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/techniques/simplifying-conditional-expressions"><li><li><a href="../../../../../flower/refactoring/techniques/simplifying-conditional-expressions/consolidate-conditional-expression" data-for="flower/refactoring/techniques/simplifying-conditional-expressions/consolidate-conditional-expression">Consolidate Conditional Expression</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/simplifying-conditional-expressions/consolidate-duplicate-conditional-fragments" data-for="flower/refactoring/techniques/simplifying-conditional-expressions/consolidate-duplicate-conditional-fragments">Consolidate Duplicate Conditional Fragments</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/simplifying-conditional-expressions/decompose-conditional" data-for="flower/refactoring/techniques/simplifying-conditional-expressions/decompose-conditional">Decompose Conditional</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/simplifying-conditional-expressions/introduce-assertion" data-for="flower/refactoring/techniques/simplifying-conditional-expressions/introduce-assertion">Introduce Assertion</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/simplifying-conditional-expressions/introduce-null-object" data-for="flower/refactoring/techniques/simplifying-conditional-expressions/introduce-null-object">Introduce Null Object</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/simplifying-conditional-expressions/remove-control-flag" data-for="flower/refactoring/techniques/simplifying-conditional-expressions/remove-control-flag">Remove Control Flag</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/simplifying-conditional-expressions/replace-conditional-with-polymorphism" data-for="flower/refactoring/techniques/simplifying-conditional-expressions/replace-conditional-with-polymorphism">Replace Conditional with Polymorphism</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/simplifying-conditional-expressions/replace-nested-conditional-with-guard-clauses" data-for="flower/refactoring/techniques/simplifying-conditional-expressions/replace-nested-conditional-with-guard-clauses">Replace Nested Conditional with Guard Clauses</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/techniques/simplifying-method-calls"><button class="folder-button"><p class="folder-title">simplifying-method-calls</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/techniques/simplifying-method-calls"><li><li><a href="../../../../../flower/refactoring/techniques/simplifying-method-calls/add-parameter" data-for="flower/refactoring/techniques/simplifying-method-calls/add-parameter">Add Parameter</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/simplifying-method-calls/hide-method" data-for="flower/refactoring/techniques/simplifying-method-calls/hide-method">Hide Method</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/simplifying-method-calls/introduce-parameter-object" data-for="flower/refactoring/techniques/simplifying-method-calls/introduce-parameter-object">Introduce Parameter Object</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/simplifying-method-calls/parameterize-method" data-for="flower/refactoring/techniques/simplifying-method-calls/parameterize-method">Parameterize Method</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/simplifying-method-calls/preserve-whole-object" data-for="flower/refactoring/techniques/simplifying-method-calls/preserve-whole-object">Preserve Whole Object</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/simplifying-method-calls/remove-parameter" data-for="flower/refactoring/techniques/simplifying-method-calls/remove-parameter">Remove Parameter</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/simplifying-method-calls/remove-setting-method" data-for="flower/refactoring/techniques/simplifying-method-calls/remove-setting-method">Remove Setting Method</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/simplifying-method-calls/rename-method" data-for="flower/refactoring/techniques/simplifying-method-calls/rename-method">Rename Method</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/simplifying-method-calls/replace-constructor-with-factory-method" data-for="flower/refactoring/techniques/simplifying-method-calls/replace-constructor-with-factory-method">Replace Constructor with Factory Method</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/simplifying-method-calls/replace-error-code-with-exception" data-for="flower/refactoring/techniques/simplifying-method-calls/replace-error-code-with-exception">Replace Error Code with Exception</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/simplifying-method-calls/replace-exception-with-test" data-for="flower/refactoring/techniques/simplifying-method-calls/replace-exception-with-test">Replace Exception with Test</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/simplifying-method-calls/replace-parameter-with-explicit-methods" data-for="flower/refactoring/techniques/simplifying-method-calls/replace-parameter-with-explicit-methods">Replace Parameter with Explicit Methods</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/simplifying-method-calls/replace-parameter-with-method-call" data-for="flower/refactoring/techniques/simplifying-method-calls/replace-parameter-with-method-call">Replace Parameter with Method Call</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/simplifying-method-calls/separate-query-from-modifier" data-for="flower/refactoring/techniques/simplifying-method-calls/separate-query-from-modifier">Separate Query from Modifier</a></li></li></ul></div></div></li><li><li><a href="../../../../../flower/refactoring/techniques/composing-methods" data-for="flower/refactoring/techniques/composing-methods">Composing Methods</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/dealing-with-generalization" data-for="flower/refactoring/techniques/dealing-with-generalization">Dealing with Generalization</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/moving-features-between-objects" data-for="flower/refactoring/techniques/moving-features-between-objects">Moving Features between Objects</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/organizing-data" data-for="flower/refactoring/techniques/organizing-data">Organizing Data</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/simplifying-conditional-expressions" data-for="flower/refactoring/techniques/simplifying-conditional-expressions">Simplifying Conditional Expressions</a></li></li><li><li><a href="../../../../../flower/refactoring/techniques/simplifying-method-calls" data-for="flower/refactoring/techniques/simplifying-method-calls">Simplifying Method Calls</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/refactoring/what-is-refactoring"><button class="folder-button"><p class="folder-title">what-is-refactoring</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/refactoring/what-is-refactoring"><li><li><a href="../../../../../flower/refactoring/what-is-refactoring/Clean-code" data-for="flower/refactoring/what-is-refactoring/Clean-code">Clean code</a></li></li><li><li><a href="../../../../../flower/refactoring/what-is-refactoring/how-to" data-for="flower/refactoring/what-is-refactoring/how-to">How to refactor</a></li></li><li><li><a href="../../../../../flower/refactoring/what-is-refactoring/technical-debt" data-for="flower/refactoring/what-is-refactoring/technical-debt">Technical debt</a></li></li><li><li><a href="../../../../../flower/refactoring/what-is-refactoring/when" data-for="flower/refactoring/what-is-refactoring/when">When to refactor</a></li></li></ul></div></div></li><li><li><a href="../../../../../flower/refactoring/catalog" data-for="flower/refactoring/catalog">Catalog of Refactoring</a></li></li><li><li><a href="../../../../../flower/refactoring/Cheat-Sheet" data-for="flower/refactoring/Cheat-Sheet">Cheat Sheet</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing"><button class="folder-button"><p class="folder-title">testing</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/automation"><button class="folder-button"><p class="folder-title">automation</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/automation"><li><li><a href="../../../../../flower/testing/automation/Importance" data-for="flower/testing/automation/Importance">Importance</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/go"><button class="folder-button"><p class="folder-title">go</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/go"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/go/anti_patterns"><button class="folder-button"><p class="folder-title">anti_patterns</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/go/anti_patterns"><li><li><a href="../../../../../flower/testing/go/anti_patterns/anti-patterns" data-for="flower/testing/go/anti_patterns/anti-patterns">anti-patterns</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/go/build_an_application"><button class="folder-button"><p class="folder-title">build_an_application</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/go/build_an_application"><li><li><a href="../../../../../flower/testing/go/build_an_application/command-line" data-for="flower/testing/go/build_an_application/command-line">command-line</a></li></li><li><li><a href="../../../../../flower/testing/go/build_an_application/http-server" data-for="flower/testing/go/build_an_application/http-server">http-server</a></li></li><li><li><a href="../../../../../flower/testing/go/build_an_application/io" data-for="flower/testing/go/build_an_application/io">io</a></li></li><li><li><a href="../../../../../flower/testing/go/build_an_application/json" data-for="flower/testing/go/build_an_application/json">json</a></li></li><li><li><a href="../../../../../flower/testing/go/build_an_application/time" data-for="flower/testing/go/build_an_application/time">time</a></li></li><li><li><a href="../../../../../flower/testing/go/build_an_application/websockets" data-for="flower/testing/go/build_an_application/websockets">websockets</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/go/fundamentals"><button class="folder-button"><p class="folder-title">fundamentals</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/go/fundamentals"><li><li><a href="../../../../../flower/testing/go/fundamentals/arrays-and-slices" data-for="flower/testing/go/fundamentals/arrays-and-slices">arrays-and-slices</a></li></li><li><li><a href="../../../../../flower/testing/go/fundamentals/concurrency" data-for="flower/testing/go/fundamentals/concurrency">concurrency</a></li></li><li><li><a href="../../../../../flower/testing/go/fundamentals/context" data-for="flower/testing/go/fundamentals/context">context</a></li></li><li><li><a href="../../../../../flower/testing/go/fundamentals/dependency-injection" data-for="flower/testing/go/fundamentals/dependency-injection">dependency-injection</a></li></li><li><li><a href="../../../../../flower/testing/go/fundamentals/generics" data-for="flower/testing/go/fundamentals/generics">generics</a></li></li><li><li><a href="../../../../../flower/testing/go/fundamentals/hello-world" data-for="flower/testing/go/fundamentals/hello-world">hello-world</a></li></li><li><li><a href="../../../../../flower/testing/go/fundamentals/install-go" data-for="flower/testing/go/fundamentals/install-go">install-go</a></li></li><li><li><a href="../../../../../flower/testing/go/fundamentals/integers" data-for="flower/testing/go/fundamentals/integers">integers</a></li></li><li><li><a href="../../../../../flower/testing/go/fundamentals/iteration" data-for="flower/testing/go/fundamentals/iteration">iteration</a></li></li><li><li><a href="../../../../../flower/testing/go/fundamentals/maps" data-for="flower/testing/go/fundamentals/maps">maps</a></li></li><li><li><a href="../../../../../flower/testing/go/fundamentals/math" data-for="flower/testing/go/fundamentals/math">math</a></li></li><li><li><a href="../../../../../flower/testing/go/fundamentals/mocking" data-for="flower/testing/go/fundamentals/mocking">mocking</a></li></li><li><li><a href="../../../../../flower/testing/go/fundamentals/pointers-and-errors" data-for="flower/testing/go/fundamentals/pointers-and-errors">pointers-and-errors</a></li></li><li><li><a href="../../../../../flower/testing/go/fundamentals/reading-files" data-for="flower/testing/go/fundamentals/reading-files">reading-files</a></li></li><li><li><a href="../../../../../flower/testing/go/fundamentals/reflection" data-for="flower/testing/go/fundamentals/reflection">reflection</a></li></li><li><li><a href="../../../../../flower/testing/go/fundamentals/revisiting-arrays-and-slices-with-generics" data-for="flower/testing/go/fundamentals/revisiting-arrays-and-slices-with-generics">revisiting-arrays-and-slices-with-generics</a></li></li><li><li><a href="../../../../../flower/testing/go/fundamentals/roman-numerals" data-for="flower/testing/go/fundamentals/roman-numerals">roman-numerals</a></li></li><li><li><a href="../../../../../flower/testing/go/fundamentals/select" data-for="flower/testing/go/fundamentals/select">select</a></li></li><li><li><a href="../../../../../flower/testing/go/fundamentals/structs-methods-and-interfaces" data-for="flower/testing/go/fundamentals/structs-methods-and-interfaces">structs-methods-and-interfaces</a></li></li><li><li><a href="../../../../../flower/testing/go/fundamentals/sync" data-for="flower/testing/go/fundamentals/sync">sync</a></li></li><li><li><a href="../../../../../flower/testing/go/fundamentals/template" data-for="flower/testing/go/fundamentals/template">template</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/go/testing_fundamentals"><button class="folder-button"><p class="folder-title">testing_fundamentals</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/go/testing_fundamentals"><li><li><a href="../../../../../flower/testing/go/testing_fundamentals/intro-to-acceptance-tests" data-for="flower/testing/go/testing_fundamentals/intro-to-acceptance-tests">intro-to-acceptance-tests</a></li></li><li><li><a href="../../../../../flower/testing/go/testing_fundamentals/scaling-acceptance-tests" data-for="flower/testing/go/testing_fundamentals/scaling-acceptance-tests">scaling-acceptance-tests</a></li></li><li><li><a href="../../../../../flower/testing/go/testing_fundamentals/working-without-mocks" data-for="flower/testing/go/testing_fundamentals/working-without-mocks">working-without-mocks</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/go/tips"><button class="folder-button"><p class="folder-title">tips</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/go/tips"><li><li><a href="../../../../../flower/testing/go/tips/context-aware-reader" data-for="flower/testing/go/tips/context-aware-reader">context-aware-reader</a></li></li><li><li><a href="../../../../../flower/testing/go/tips/error-types" data-for="flower/testing/go/tips/error-types">error-types</a></li></li><li><li><a href="../../../../../flower/testing/go/tips/http-handlers-revisited" data-for="flower/testing/go/tips/http-handlers-revisited">http-handlers-revisited</a></li></li><li><li><a href="../../../../../flower/testing/go/tips/os-exec" data-for="flower/testing/go/tips/os-exec">os-exec</a></li></li><li><li><a href="../../../../../flower/testing/go/tips/why-unit-test" data-for="flower/testing/go/tips/why-unit-test">why-unit-test</a></li></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/javascript"><button class="folder-button"><p class="folder-title">javascript</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/javascript"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/javascript/0 The Golden Rule"><button class="folder-button"><p class="folder-title">0 The Golden Rule</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/javascript/0 The Golden Rule"><li><li><a href="../../../../../flower/testing/javascript/0-The-Golden-Rule/0-Design-for-lean-testing" data-for="flower/testing/javascript/0-The-Golden-Rule/0-Design-for-lean-testing">0 Design for lean testing</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/javascript/1 The Test Anatomy"><button class="folder-button"><p class="folder-title">1 The Test Anatomy</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/javascript/1 The Test Anatomy"><li><li><a href="../../../../../flower/testing/javascript/1-The-Test-Anatomy/1-1-Include-3-parts-in-each-test-name" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-1-Include-3-parts-in-each-test-name">1-1 Include 3 parts in each test name</a></li></li><li><li><a href="../../../../../flower/testing/javascript/1-The-Test-Anatomy/1-2-Structure-tests-by-the-AAA-pattern" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-2-Structure-tests-by-the-AAA-pattern">1-2 Structure tests by the AAA pattern</a></li></li><li><li><a href="../../../../../flower/testing/javascript/1-The-Test-Anatomy/1-3-Describe-expectations-in-a-product-language-use-BDD-style-assertions" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-3-Describe-expectations-in-a-product-language-use-BDD-style-assertions">1-3 Describe expectations in a product language use BDD-style assertions</a></li></li><li><li><a href="../../../../../flower/testing/javascript/1-The-Test-Anatomy/1-4-Stick-to-black-box-testing-Test-only-public-methods" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-4-Stick-to-black-box-testing-Test-only-public-methods">1-4 Stick to black-box testing Test only public methods</a></li></li><li><li><a href="../../../../../flower/testing/javascript/1-The-Test-Anatomy/1-5-Choose-the-right-test-doubles-Avoid-mocks-in-favor-of-stubs-and-spies" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-5-Choose-the-right-test-doubles-Avoid-mocks-in-favor-of-stubs-and-spies">1-5 Choose the right test doubles Avoid mocks in favor of stubs and spies</a></li></li><li><li><a href="../../../../../flower/testing/javascript/1-The-Test-Anatomy/1-6-Dont-foo-use-realistic-input-data" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-6-Dont-foo-use-realistic-input-data">1-6 Dont foo use realistic input data</a></li></li><li><li><a href="../../../../../flower/testing/javascript/1-The-Test-Anatomy/1-7-Test-many-input-combinations-using-Property-based-testing" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-7-Test-many-input-combinations-using-Property-based-testing">1-7 Test many input combinations using Property-based testing</a></li></li><li><li><a href="../../../../../flower/testing/javascript/1-The-Test-Anatomy/1-8-If-needed-use-only-short--inline-snapshots" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-8-If-needed-use-only-short--inline-snapshots">1-8 If needed use only short  inline snapshots</a></li></li><li><li><a href="../../../../../flower/testing/javascript/1-The-Test-Anatomy/1-9-Copy-code-but-only-whats-neccessary" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-9-Copy-code-but-only-whats-neccessary">1-9 Copy code but only whats neccessary</a></li></li><li><li><a href="../../../../../flower/testing/javascript/1-The-Test-Anatomy/1-10-Dont-catch-errors-expect-them" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-10-Dont-catch-errors-expect-them">1-10 Dont catch errors expect them</a></li></li><li><li><a href="../../../../../flower/testing/javascript/1-The-Test-Anatomy/1-11-Tag-your-tests" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-11-Tag-your-tests">1-11 Tag your tests</a></li></li><li><li><a href="../../../../../flower/testing/javascript/1-The-Test-Anatomy/1-12-Categorize-tests-under-at-least-2-levels" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-12-Categorize-tests-under-at-least-2-levels">1-12 Categorize tests under at least 2 levels</a></li></li><li><li><a href="../../../../../flower/testing/javascript/1-The-Test-Anatomy/1-13-Other-generic-good-testing-hygiene" data-for="flower/testing/javascript/1-The-Test-Anatomy/1-13-Other-generic-good-testing-hygiene">1-13 Other generic good testing hygiene</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/javascript/2 Backend"><button class="folder-button"><p class="folder-title">2 Backend</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/javascript/2 Backend"><li><li><a href="../../../../../flower/testing/javascript/2-Backend/2-1-Enrich-your-testing-portfolio-Look-beyond-unit-tests-and-the-pyramid" data-for="flower/testing/javascript/2-Backend/2-1-Enrich-your-testing-portfolio-Look-beyond-unit-tests-and-the-pyramid">2-1 Enrich your testing portfolio Look beyond unit tests and the pyramid</a></li></li><li><li><a href="../../../../../flower/testing/javascript/2-Backend/2-2-Component-testing-might-be-your-best-affair" data-for="flower/testing/javascript/2-Backend/2-2-Component-testing-might-be-your-best-affair">2-2 Component testing might be your best affair</a></li></li><li><li><a href="../../../../../flower/testing/javascript/2-Backend/2-3-Ensure-new-releases-dont-break-the-API-using-contract-tests" data-for="flower/testing/javascript/2-Backend/2-3-Ensure-new-releases-dont-break-the-API-using-contract-tests">2-3 Ensure new releases dont break the API using contract tests</a></li></li><li><li><a href="../../../../../flower/testing/javascript/2-Backend/2-4-Test-your-middlewares-in-isolation" data-for="flower/testing/javascript/2-Backend/2-4-Test-your-middlewares-in-isolation">2-4 Test your middlewares in isolation</a></li></li><li><li><a href="../../../../../flower/testing/javascript/2-Backend/2-5-Measure-and-refactor-using-static-analysis-tools" data-for="flower/testing/javascript/2-Backend/2-5-Measure-and-refactor-using-static-analysis-tools">2-5 Measure and refactor using static analysis tools</a></li></li><li><li><a href="../../../../../flower/testing/javascript/2-Backend/2-6-Check-your-readiness-for-Node-related-chaos" data-for="flower/testing/javascript/2-Backend/2-6-Check-your-readiness-for-Node-related-chaos">2-6 Check your readiness for Node-related chaos</a></li></li><li><li><a href="../../../../../flower/testing/javascript/2-Backend/2-7-Avoid-global-test-fixtures-and-seeds-add-data-per-test" data-for="flower/testing/javascript/2-Backend/2-7-Avoid-global-test-fixtures-and-seeds-add-data-per-test">2-7 Avoid global test fixtures and seeds add data per-test</a></li></li><li><li><a href="../../../../../flower/testing/javascript/2-Backend/2-8-Choose-a-clear-data-clean-up-strategy-After-all-recommended-or-after-each" data-for="flower/testing/javascript/2-Backend/2-8-Choose-a-clear-data-clean-up-strategy-After-all-recommended-or-after-each">2-8 Choose a clear data clean-up strategy After-all recommended or after-each</a></li></li><li><li><a href="../../../../../flower/testing/javascript/2-Backend/2-9-Isolate-the-component-from-the-world-using-HTTP-interceptor" data-for="flower/testing/javascript/2-Backend/2-9-Isolate-the-component-from-the-world-using-HTTP-interceptor">2-9 Isolate the component from the world using HTTP interceptor</a></li></li><li><li><a href="../../../../../flower/testing/javascript/2-Backend/2-10-Test-the-response-schema-mostly-when-there-are-auto-generated-fields" data-for="flower/testing/javascript/2-Backend/2-10-Test-the-response-schema-mostly-when-there-are-auto-generated-fields">2-10 Test the response schema mostly when there are auto-generated fields</a></li></li><li><li><a href="../../../../../flower/testing/javascript/2-Backend/2-11-Check-integrations-corner-cases-and-chaos" data-for="flower/testing/javascript/2-Backend/2-11-Check-integrations-corner-cases-and-chaos">2-11 Check integrations corner cases and chaos</a></li></li><li><li><a href="../../../../../flower/testing/javascript/2-Backend/2-12-Test-the-five-potential-outcomes" data-for="flower/testing/javascript/2-Backend/2-12-Test-the-five-potential-outcomes">2-12 Test the five potential outcomes</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/javascript/3 Frontend"><button class="folder-button"><p class="folder-title">3 Frontend</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/javascript/3 Frontend"><li><li><a href="../../../../../flower/testing/javascript/3-Frontend/3-1-Separate-UI-from-functionality" data-for="flower/testing/javascript/3-Frontend/3-1-Separate-UI-from-functionality">3-1 Separate UI from functionality</a></li></li><li><li><a href="../../../../../flower/testing/javascript/3-Frontend/3-2-Query-HTML-elements-based-on-attributes-that-are-unlikely-to-change" data-for="flower/testing/javascript/3-Frontend/3-2-Query-HTML-elements-based-on-attributes-that-are-unlikely-to-change">3-2 Query HTML elements based on attributes that are unlikely to change</a></li></li><li><li><a href="../../../../../flower/testing/javascript/3-Frontend/3-3-Whenever-possible-test-with-a-realistic-and-fully-rendered-component" data-for="flower/testing/javascript/3-Frontend/3-3-Whenever-possible-test-with-a-realistic-and-fully-rendered-component">3-3 Whenever possible test with a realistic and fully rendered component</a></li></li><li><li><a href="../../../../../flower/testing/javascript/3-Frontend/3-4-Dont-sleep-use-frameworks-built-in-support-for-async-events.-Also-try-to-speed-things-up" data-for="flower/testing/javascript/3-Frontend/3-4-Dont-sleep-use-frameworks-built-in-support-for-async-events.-Also-try-to-speed-things-up">3-4 Dont sleep use frameworks built-in support for async events. Also try to speed things up</a></li></li><li><li><a href="../../../../../flower/testing/javascript/3-Frontend/3-5-Watch-how-the-content-is-served-over-the-network" data-for="flower/testing/javascript/3-Frontend/3-5-Watch-how-the-content-is-served-over-the-network">3-5 Watch how the content is served over the network</a></li></li><li><li><a href="../../../../../flower/testing/javascript/3-Frontend/3-6-Stub-flaky-and-slow-resources-like-backend-APIs" data-for="flower/testing/javascript/3-Frontend/3-6-Stub-flaky-and-slow-resources-like-backend-APIs">3-6 Stub flaky and slow resources like backend APIs</a></li></li><li><li><a href="../../../../../flower/testing/javascript/3-Frontend/3-7-Have-very-few-end-to-end-tests-that-spans-the-whole-system" data-for="flower/testing/javascript/3-Frontend/3-7-Have-very-few-end-to-end-tests-that-spans-the-whole-system">3-7 Have very few end-to-end tests that spans the whole system</a></li></li><li><li><a href="../../../../../flower/testing/javascript/3-Frontend/3-8-Speed-up-E2E-tests-by-reusing-login-credentials" data-for="flower/testing/javascript/3-Frontend/3-8-Speed-up-E2E-tests-by-reusing-login-credentials">3-8 Speed-up E2E tests by reusing login credentials</a></li></li><li><li><a href="../../../../../flower/testing/javascript/3-Frontend/3-9-Have-one-E2E-smoke-test-that-just-travels-across-the-site-map" data-for="flower/testing/javascript/3-Frontend/3-9-Have-one-E2E-smoke-test-that-just-travels-across-the-site-map">3-9 Have one E2E smoke test that just travels across the site map</a></li></li><li><li><a href="../../../../../flower/testing/javascript/3-Frontend/3-10-Expose-the-tests-as-a-live-collaborative-document" data-for="flower/testing/javascript/3-Frontend/3-10-Expose-the-tests-as-a-live-collaborative-document">3-10 Expose the tests as a live collaborative document</a></li></li><li><li><a href="../../../../../flower/testing/javascript/3-Frontend/3-11-Detect-visual-issues-with-automated-tools" data-for="flower/testing/javascript/3-Frontend/3-11-Detect-visual-issues-with-automated-tools">3-11 Detect visual issues with automated tools</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/javascript/4 Measuring Tests Effectiveness"><button class="folder-button"><p class="folder-title">4 Measuring Tests Effectiveness</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/javascript/4 Measuring Tests Effectiveness"><li><li><a href="../../../../../flower/testing/javascript/4-Measuring-Tests-Effectiveness/4-1-Get-enough-coverage-for-being-confident-80-seems-to-be-the-lucky-number" data-for="flower/testing/javascript/4-Measuring-Tests-Effectiveness/4-1-Get-enough-coverage-for-being-confident-80-seems-to-be-the-lucky-number">4-1 Get enough coverage for being confident 80 seems to be the lucky number</a></li></li><li><li><a href="../../../../../flower/testing/javascript/4-Measuring-Tests-Effectiveness/4-2-Inspect-coverage-reports-to-detect-untested-areas-and-other-oddities" data-for="flower/testing/javascript/4-Measuring-Tests-Effectiveness/4-2-Inspect-coverage-reports-to-detect-untested-areas-and-other-oddities">4-2 Inspect coverage reports to detect untested areas and other oddities</a></li></li><li><li><a href="../../../../../flower/testing/javascript/4-Measuring-Tests-Effectiveness/4-3-Measure-logical-coverage-using-mutation-testing" data-for="flower/testing/javascript/4-Measuring-Tests-Effectiveness/4-3-Measure-logical-coverage-using-mutation-testing">4-3 Measure logical coverage using mutation testing</a></li></li><li><li><a href="../../../../../flower/testing/javascript/4-Measuring-Tests-Effectiveness/4-4-Preventing-test-code-issues-with-Test-linters" data-for="flower/testing/javascript/4-Measuring-Tests-Effectiveness/4-4-Preventing-test-code-issues-with-Test-linters">4-4 Preventing test code issues with Test linters</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/javascript/5 Continuous Integration"><button class="folder-button"><p class="folder-title">5 Continuous Integration</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/javascript/5 Continuous Integration"><li><li><a href="../../../../../flower/testing/javascript/5-Continuous-Integration/5-1-Enrich-your-linters-and-abort-builds-that-have-linting-issues" data-for="flower/testing/javascript/5-Continuous-Integration/5-1-Enrich-your-linters-and-abort-builds-that-have-linting-issues">5-1 Enrich your linters and abort builds that have linting issues</a></li></li><li><li><a href="../../../../../flower/testing/javascript/5-Continuous-Integration/5-2-Shorten-the-feedback-loop-with-local-developer-CI" data-for="flower/testing/javascript/5-Continuous-Integration/5-2-Shorten-the-feedback-loop-with-local-developer-CI">5-2 Shorten the feedback loop with local developer-CI</a></li></li><li><li><a href="../../../../../flower/testing/javascript/5-Continuous-Integration/5-3-Perform-e2e-testing-over-a-true-production-mirror" data-for="flower/testing/javascript/5-Continuous-Integration/5-3-Perform-e2e-testing-over-a-true-production-mirror">5-3 Perform e2e testing over a true production-mirror</a></li></li><li><li><a href="../../../../../flower/testing/javascript/5-Continuous-Integration/5-4-Parallelize-test-execution" data-for="flower/testing/javascript/5-Continuous-Integration/5-4-Parallelize-test-execution">5-4 Parallelize test execution</a></li></li><li><li><a href="../../../../../flower/testing/javascript/5-Continuous-Integration/5-5-Stay-away-from-legal-issues-using-license-and-plagiarism-check" data-for="flower/testing/javascript/5-Continuous-Integration/5-5-Stay-away-from-legal-issues-using-license-and-plagiarism-check">5-5 Stay away from legal issues using license and plagiarism check</a></li></li><li><li><a href="../../../../../flower/testing/javascript/5-Continuous-Integration/5-6-Constantly-inspect-for-vulnerable-dependencies" data-for="flower/testing/javascript/5-Continuous-Integration/5-6-Constantly-inspect-for-vulnerable-dependencies">5-6 Constantly inspect for vulnerable dependencies</a></li></li><li><li><a href="../../../../../flower/testing/javascript/5-Continuous-Integration/5-7-Automate-dependency-updates" data-for="flower/testing/javascript/5-Continuous-Integration/5-7-Automate-dependency-updates">5-7 Automate dependency updates</a></li></li><li><li><a href="../../../../../flower/testing/javascript/5-Continuous-Integration/5-8-Other-non-Node-related-CI-tips" data-for="flower/testing/javascript/5-Continuous-Integration/5-8-Other-non-Node-related-CI-tips">5-8 Other non-Node related CI tips</a></li></li><li><li><a href="../../../../../flower/testing/javascript/5-Continuous-Integration/5-9-Build-matrix-Run-the-same-CI-steps-using-multiple-Node-versions" data-for="flower/testing/javascript/5-Continuous-Integration/5-9-Build-matrix-Run-the-same-CI-steps-using-multiple-Node-versions">5-9 Build matrix Run the same CI steps using multiple Node versions</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/flower/testing/javascript/assets"><button class="folder-button"><p class="folder-title">assets</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/flower/testing/javascript/assets"><li><li><a href="../../../../../flower/testing/javascript/assets/readme" data-for="flower/testing/javascript/assets/readme">readme</a></li></li></ul></div></div></li></ul></div></div></li></ul></div></div></li><li><li><a href="../../../../../flower/Table-of-contents" data-for="flower/Table-of-contents">Table of contents</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit"><button class="folder-button"><p class="folder-title">fruit</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding"><button class="folder-button"><p class="folder-title">Coding</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns"><button class="folder-button"><p class="folder-title">Patterns</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/Design Patterns"><button class="folder-button"><p class="folder-title">Design Patterns</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/Design Patterns"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/Design Patterns/catalog"><button class="folder-button"><p class="folder-title">catalog</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/Design Patterns/catalog"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/Design Patterns/catalog/behavioral"><button class="folder-button"><p class="folder-title">behavioral</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/Design Patterns/catalog/behavioral"><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/chain-of-responsibility" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/chain-of-responsibility">chain-of-responsibility</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/command" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/command">command</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/iterator" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/iterator">iterator</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/mediator" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/mediator">mediator</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/memento" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/memento">memento</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/observer" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/observer">observer</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/state" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/state">state</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/strategy" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/strategy">strategy</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/template-method" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/template-method">template-method</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/visitor" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral/visitor">visitor</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/Design Patterns/catalog/creational"><button class="folder-button"><p class="folder-title">creational</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/Design Patterns/catalog/creational"><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/catalog/creational/abstract-factory" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/creational/abstract-factory">abstract-factory</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/catalog/creational/builder" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/creational/builder">builder</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/catalog/creational/factory-method" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/creational/factory-method">factory-method</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/catalog/creational/prototype" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/creational/prototype">prototype</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/catalog/creational/singleton" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/creational/singleton">singleton</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/Design Patterns/catalog/structural"><button class="folder-button"><p class="folder-title">structural</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/Design Patterns/catalog/structural"><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/catalog/structural/adapter" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/structural/adapter">adapter</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/catalog/structural/bridge" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/structural/bridge">bridge</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/catalog/structural/composite" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/structural/composite">composite</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/catalog/structural/decorator" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/structural/decorator">decorator</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/catalog/structural/facade" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/structural/facade">facade</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/catalog/structural/flyweight" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/structural/flyweight">flyweight</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/catalog/structural/proxy" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/structural/proxy">proxy</a></li></li></ul></div></div></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/catalog/behavioral-patterns" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/behavioral-patterns">behavioral-patterns</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/catalog/catalog" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/catalog">catalog</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/catalog/creational-patterns" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/creational-patterns">creational-patterns</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/catalog/structural-patterns" data-for="fruit/Coding/Patterns/Design-Patterns/catalog/structural-patterns">structural-patterns</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/Design Patterns/intro"><button class="folder-button"><p class="folder-title">intro</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/Design Patterns/intro"><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/intro/classification" data-for="fruit/Coding/Patterns/Design-Patterns/intro/classification">classification</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/intro/criticism" data-for="fruit/Coding/Patterns/Design-Patterns/intro/criticism">criticism</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/intro/history" data-for="fruit/Coding/Patterns/Design-Patterns/intro/history">history</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/intro/what-is-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/intro/what-is-pattern">what-is-pattern</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/intro/why-learn-patterns" data-for="fruit/Coding/Patterns/Design-Patterns/intro/why-learn-patterns">why-learn-patterns</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/Design Patterns/react"><button class="folder-button"><p class="folder-title">react</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/Design Patterns/react"><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/react/compound-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/react/compound-pattern">compound-pattern</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/react/hoc-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/react/hoc-pattern">hoc-pattern</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/react/hooks-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/react/hooks-pattern">hooks-pattern</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/react/presentational-container-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/react/presentational-container-pattern">presentational-container-pattern</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/react/render-props-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/react/render-props-pattern">render-props-pattern</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/Design Patterns/vanilla"><button class="folder-button"><p class="folder-title">vanilla</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/Design Patterns/vanilla"><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/command-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/command-pattern">command-pattern</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/factory-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/factory-pattern">factory-pattern</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/flyweight-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/flyweight-pattern">flyweight-pattern</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/mediator-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/mediator-pattern">mediator-pattern</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/mixin-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/mixin-pattern">mixin-pattern</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/module-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/module-pattern">module-pattern</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/observer-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/observer-pattern">observer-pattern</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/prototype-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/prototype-pattern">prototype-pattern</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/provider-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/provider-pattern">provider-pattern</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/proxy-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/proxy-pattern">proxy-pattern</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/singleton-pattern" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/singleton-pattern">singleton-pattern</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/Design-Patterns/vanilla/static-import" data-for="fruit/Coding/Patterns/Design-Patterns/vanilla/static-import">static-import</a></li></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/rendering"><button class="folder-button"><p class="folder-title">rendering</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/rendering"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/rendering/react"><button class="folder-button"><p class="folder-title">react</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/rendering/react"><li><li><a href="../../../../../fruit/Coding/Patterns/rendering/react/client-side-rendering" data-for="fruit/Coding/Patterns/rendering/react/client-side-rendering">client-side-rendering</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/rendering/react/incremental-static-rendering" data-for="fruit/Coding/Patterns/rendering/react/incremental-static-rendering">incremental-static-rendering</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/rendering/react/progressive-hydration" data-for="fruit/Coding/Patterns/rendering/react/progressive-hydration">progressive-hydration</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/rendering/react/react-selective-hydration" data-for="fruit/Coding/Patterns/rendering/react/react-selective-hydration">react-selective-hydration</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/rendering/react/react-server-components" data-for="fruit/Coding/Patterns/rendering/react/react-server-components">react-server-components</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/rendering/react/server-side-rendering" data-for="fruit/Coding/Patterns/rendering/react/server-side-rendering">server-side-rendering</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/rendering/react/static-rendering" data-for="fruit/Coding/Patterns/rendering/react/static-rendering">static-rendering</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/rendering/react/streaming-ssr" data-for="fruit/Coding/Patterns/rendering/react/streaming-ssr">streaming-ssr</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Patterns/rendering/vanilla"><button class="folder-button"><p class="folder-title">vanilla</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Patterns/rendering/vanilla"><li><li><a href="../../../../../fruit/Coding/Patterns/rendering/vanilla/islands-architecture" data-for="fruit/Coding/Patterns/rendering/vanilla/islands-architecture">islands-architecture</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/rendering/vanilla/rendering-patterns" data-for="fruit/Coding/Patterns/rendering/vanilla/rendering-patterns">rendering-patterns</a></li></li><li><li><a href="../../../../../fruit/Coding/Patterns/rendering/vanilla/view-transitions" data-for="fruit/Coding/Patterns/rendering/vanilla/view-transitions">view-transitions</a></li></li></ul></div></div></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing"><button class="folder-button"><p class="folder-title">Testing</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/go"><button class="folder-button"><p class="folder-title">go</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/go"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/go/anti_patterns"><button class="folder-button"><p class="folder-title">anti_patterns</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/go/anti_patterns"><li><li><a href="../../../../../fruit/Coding/Testing/go/anti_patterns/anti-patterns" data-for="fruit/Coding/Testing/go/anti_patterns/anti-patterns">anti-patterns</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/go/build_an_application"><button class="folder-button"><p class="folder-title">build_an_application</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/go/build_an_application"><li><li><a href="../../../../../fruit/Coding/Testing/go/build_an_application/command-line" data-for="fruit/Coding/Testing/go/build_an_application/command-line">command-line</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/go/build_an_application/http-server" data-for="fruit/Coding/Testing/go/build_an_application/http-server">http-server</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/go/build_an_application/io" data-for="fruit/Coding/Testing/go/build_an_application/io">io</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/go/build_an_application/json" data-for="fruit/Coding/Testing/go/build_an_application/json">json</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/go/build_an_application/time" data-for="fruit/Coding/Testing/go/build_an_application/time">time</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/go/build_an_application/websockets" data-for="fruit/Coding/Testing/go/build_an_application/websockets">websockets</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/go/fundamentals"><button class="folder-button"><p class="folder-title">fundamentals</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/go/fundamentals"><li><li><a href="../../../../../fruit/Coding/Testing/go/fundamentals/arrays-and-slices" data-for="fruit/Coding/Testing/go/fundamentals/arrays-and-slices">arrays-and-slices</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/go/fundamentals/concurrency" data-for="fruit/Coding/Testing/go/fundamentals/concurrency">concurrency</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/go/fundamentals/context" data-for="fruit/Coding/Testing/go/fundamentals/context">context</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/go/fundamentals/dependency-injection" data-for="fruit/Coding/Testing/go/fundamentals/dependency-injection">dependency-injection</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/go/fundamentals/generics" data-for="fruit/Coding/Testing/go/fundamentals/generics">generics</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/go/fundamentals/hello-world" data-for="fruit/Coding/Testing/go/fundamentals/hello-world">hello-world</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/go/fundamentals/install-go" data-for="fruit/Coding/Testing/go/fundamentals/install-go">install-go</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/go/fundamentals/integers" data-for="fruit/Coding/Testing/go/fundamentals/integers">integers</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/go/fundamentals/iteration" data-for="fruit/Coding/Testing/go/fundamentals/iteration">iteration</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/go/fundamentals/maps" data-for="fruit/Coding/Testing/go/fundamentals/maps">maps</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/go/fundamentals/math" data-for="fruit/Coding/Testing/go/fundamentals/math">math</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/go/fundamentals/mocking" data-for="fruit/Coding/Testing/go/fundamentals/mocking">mocking</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/go/fundamentals/pointers-and-errors" data-for="fruit/Coding/Testing/go/fundamentals/pointers-and-errors">pointers-and-errors</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/go/fundamentals/reading-files" data-for="fruit/Coding/Testing/go/fundamentals/reading-files">reading-files</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/go/fundamentals/reflection" data-for="fruit/Coding/Testing/go/fundamentals/reflection">reflection</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/go/fundamentals/revisiting-arrays-and-slices-with-generics" data-for="fruit/Coding/Testing/go/fundamentals/revisiting-arrays-and-slices-with-generics">revisiting-arrays-and-slices-with-generics</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/go/fundamentals/roman-numerals" data-for="fruit/Coding/Testing/go/fundamentals/roman-numerals">roman-numerals</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/go/fundamentals/select" data-for="fruit/Coding/Testing/go/fundamentals/select">select</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/go/fundamentals/structs-methods-and-interfaces" data-for="fruit/Coding/Testing/go/fundamentals/structs-methods-and-interfaces">structs-methods-and-interfaces</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/go/fundamentals/sync" data-for="fruit/Coding/Testing/go/fundamentals/sync">sync</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/go/fundamentals/template" data-for="fruit/Coding/Testing/go/fundamentals/template">template</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/go/testing_fundamentals"><button class="folder-button"><p class="folder-title">testing_fundamentals</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/go/testing_fundamentals"><li><li><a href="../../../../../fruit/Coding/Testing/go/testing_fundamentals/intro-to-acceptance-tests" data-for="fruit/Coding/Testing/go/testing_fundamentals/intro-to-acceptance-tests">intro-to-acceptance-tests</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/go/testing_fundamentals/scaling-acceptance-tests" data-for="fruit/Coding/Testing/go/testing_fundamentals/scaling-acceptance-tests">scaling-acceptance-tests</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/go/testing_fundamentals/working-without-mocks" data-for="fruit/Coding/Testing/go/testing_fundamentals/working-without-mocks">working-without-mocks</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/go/tips"><button class="folder-button"><p class="folder-title">tips</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/go/tips"><li><li><a href="../../../../../fruit/Coding/Testing/go/tips/context-aware-reader" data-for="fruit/Coding/Testing/go/tips/context-aware-reader">context-aware-reader</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/go/tips/error-types" data-for="fruit/Coding/Testing/go/tips/error-types">error-types</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/go/tips/http-handlers-revisited" data-for="fruit/Coding/Testing/go/tips/http-handlers-revisited">http-handlers-revisited</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/go/tips/os-exec" data-for="fruit/Coding/Testing/go/tips/os-exec">os-exec</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/go/tips/why-unit-test" data-for="fruit/Coding/Testing/go/tips/why-unit-test">why-unit-test</a></li></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/javascript"><button class="folder-button"><p class="folder-title">javascript</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/javascript"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/javascript/0 The Golden Rule"><button class="folder-button"><p class="folder-title">0 The Golden Rule</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/javascript/0 The Golden Rule"><li><li><a href="../../../../../fruit/Coding/Testing/javascript/0-The-Golden-Rule/0-Design-for-lean-testing" data-for="fruit/Coding/Testing/javascript/0-The-Golden-Rule/0-Design-for-lean-testing">0 Design for lean testing</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/javascript/1 The Test Anatomy"><button class="folder-button"><p class="folder-title">1 The Test Anatomy</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/javascript/1 The Test Anatomy"><li><li><a href="../../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-1-Include-3-parts-in-each-test-name" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-1-Include-3-parts-in-each-test-name">1-1 Include 3 parts in each test name</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-2-Structure-tests-by-the-AAA-pattern" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-2-Structure-tests-by-the-AAA-pattern">1-2 Structure tests by the AAA pattern</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-3-Describe-expectations-in-a-product-language-use-BDD-style-assertions" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-3-Describe-expectations-in-a-product-language-use-BDD-style-assertions">1-3 Describe expectations in a product language use BDD-style assertions</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-4-Stick-to-black-box-testing-Test-only-public-methods" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-4-Stick-to-black-box-testing-Test-only-public-methods">1-4 Stick to black-box testing Test only public methods</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-5-Choose-the-right-test-doubles-Avoid-mocks-in-favor-of-stubs-and-spies" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-5-Choose-the-right-test-doubles-Avoid-mocks-in-favor-of-stubs-and-spies">1-5 Choose the right test doubles Avoid mocks in favor of stubs and spies</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-6-Dont-foo-use-realistic-input-data" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-6-Dont-foo-use-realistic-input-data">1-6 Dont foo use realistic input data</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-7-Test-many-input-combinations-using-Property-based-testing" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-7-Test-many-input-combinations-using-Property-based-testing">1-7 Test many input combinations using Property-based testing</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-8-If-needed-use-only-short--inline-snapshots" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-8-If-needed-use-only-short--inline-snapshots">1-8 If needed use only short  inline snapshots</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-9-Copy-code-but-only-whats-neccessary" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-9-Copy-code-but-only-whats-neccessary">1-9 Copy code but only whats neccessary</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-10-Dont-catch-errors-expect-them" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-10-Dont-catch-errors-expect-them">1-10 Dont catch errors expect them</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-11-Tag-your-tests" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-11-Tag-your-tests">1-11 Tag your tests</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-12-Categorize-tests-under-at-least-2-levels" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-12-Categorize-tests-under-at-least-2-levels">1-12 Categorize tests under at least 2 levels</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-13-Other-generic-good-testing-hygiene" data-for="fruit/Coding/Testing/javascript/1-The-Test-Anatomy/1-13-Other-generic-good-testing-hygiene">1-13 Other generic good testing hygiene</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/javascript/2 Backend"><button class="folder-button"><p class="folder-title">2 Backend</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/javascript/2 Backend"><li><li><a href="../../../../../fruit/Coding/Testing/javascript/2-Backend/2-1-Enrich-your-testing-portfolio-Look-beyond-unit-tests-and-the-pyramid" data-for="fruit/Coding/Testing/javascript/2-Backend/2-1-Enrich-your-testing-portfolio-Look-beyond-unit-tests-and-the-pyramid">2-1 Enrich your testing portfolio Look beyond unit tests and the pyramid</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/2-Backend/2-2-Component-testing-might-be-your-best-affair" data-for="fruit/Coding/Testing/javascript/2-Backend/2-2-Component-testing-might-be-your-best-affair">2-2 Component testing might be your best affair</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/2-Backend/2-3-Ensure-new-releases-dont-break-the-API-using-contract-tests" data-for="fruit/Coding/Testing/javascript/2-Backend/2-3-Ensure-new-releases-dont-break-the-API-using-contract-tests">2-3 Ensure new releases dont break the API using contract tests</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/2-Backend/2-4-Test-your-middlewares-in-isolation" data-for="fruit/Coding/Testing/javascript/2-Backend/2-4-Test-your-middlewares-in-isolation">2-4 Test your middlewares in isolation</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/2-Backend/2-5-Measure-and-refactor-using-static-analysis-tools" data-for="fruit/Coding/Testing/javascript/2-Backend/2-5-Measure-and-refactor-using-static-analysis-tools">2-5 Measure and refactor using static analysis tools</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/2-Backend/2-6-Check-your-readiness-for-Node-related-chaos" data-for="fruit/Coding/Testing/javascript/2-Backend/2-6-Check-your-readiness-for-Node-related-chaos">2-6 Check your readiness for Node-related chaos</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/2-Backend/2-7-Avoid-global-test-fixtures-and-seeds-add-data-per-test" data-for="fruit/Coding/Testing/javascript/2-Backend/2-7-Avoid-global-test-fixtures-and-seeds-add-data-per-test">2-7 Avoid global test fixtures and seeds add data per-test</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/2-Backend/2-8-Choose-a-clear-data-clean-up-strategy-After-all-recommended-or-after-each" data-for="fruit/Coding/Testing/javascript/2-Backend/2-8-Choose-a-clear-data-clean-up-strategy-After-all-recommended-or-after-each">2-8 Choose a clear data clean-up strategy After-all recommended or after-each</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/2-Backend/2-9-Isolate-the-component-from-the-world-using-HTTP-interceptor" data-for="fruit/Coding/Testing/javascript/2-Backend/2-9-Isolate-the-component-from-the-world-using-HTTP-interceptor">2-9 Isolate the component from the world using HTTP interceptor</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/2-Backend/2-10-Test-the-response-schema-mostly-when-there-are-auto-generated-fields" data-for="fruit/Coding/Testing/javascript/2-Backend/2-10-Test-the-response-schema-mostly-when-there-are-auto-generated-fields">2-10 Test the response schema mostly when there are auto-generated fields</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/2-Backend/2-11-Check-integrations-corner-cases-and-chaos" data-for="fruit/Coding/Testing/javascript/2-Backend/2-11-Check-integrations-corner-cases-and-chaos">2-11 Check integrations corner cases and chaos</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/2-Backend/2-12-Test-the-five-potential-outcomes" data-for="fruit/Coding/Testing/javascript/2-Backend/2-12-Test-the-five-potential-outcomes">2-12 Test the five potential outcomes</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/javascript/3 Frontend"><button class="folder-button"><p class="folder-title">3 Frontend</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/javascript/3 Frontend"><li><li><a href="../../../../../fruit/Coding/Testing/javascript/3-Frontend/3-1-Separate-UI-from-functionality" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-1-Separate-UI-from-functionality">3-1 Separate UI from functionality</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/3-Frontend/3-2-Query-HTML-elements-based-on-attributes-that-are-unlikely-to-change" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-2-Query-HTML-elements-based-on-attributes-that-are-unlikely-to-change">3-2 Query HTML elements based on attributes that are unlikely to change</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/3-Frontend/3-3-Whenever-possible-test-with-a-realistic-and-fully-rendered-component" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-3-Whenever-possible-test-with-a-realistic-and-fully-rendered-component">3-3 Whenever possible test with a realistic and fully rendered component</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/3-Frontend/3-4-Dont-sleep-use-frameworks-built-in-support-for-async-events.-Also-try-to-speed-things-up" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-4-Dont-sleep-use-frameworks-built-in-support-for-async-events.-Also-try-to-speed-things-up">3-4 Dont sleep use frameworks built-in support for async events. Also try to speed things up</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/3-Frontend/3-5-Watch-how-the-content-is-served-over-the-network" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-5-Watch-how-the-content-is-served-over-the-network">3-5 Watch how the content is served over the network</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/3-Frontend/3-6-Stub-flaky-and-slow-resources-like-backend-APIs" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-6-Stub-flaky-and-slow-resources-like-backend-APIs">3-6 Stub flaky and slow resources like backend APIs</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/3-Frontend/3-7-Have-very-few-end-to-end-tests-that-spans-the-whole-system" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-7-Have-very-few-end-to-end-tests-that-spans-the-whole-system">3-7 Have very few end-to-end tests that spans the whole system</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/3-Frontend/3-8-Speed-up-E2E-tests-by-reusing-login-credentials" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-8-Speed-up-E2E-tests-by-reusing-login-credentials">3-8 Speed-up E2E tests by reusing login credentials</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/3-Frontend/3-9-Have-one-E2E-smoke-test-that-just-travels-across-the-site-map" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-9-Have-one-E2E-smoke-test-that-just-travels-across-the-site-map">3-9 Have one E2E smoke test that just travels across the site map</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/3-Frontend/3-10-Expose-the-tests-as-a-live-collaborative-document" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-10-Expose-the-tests-as-a-live-collaborative-document">3-10 Expose the tests as a live collaborative document</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/3-Frontend/3-11-Detect-visual-issues-with-automated-tools" data-for="fruit/Coding/Testing/javascript/3-Frontend/3-11-Detect-visual-issues-with-automated-tools">3-11 Detect visual issues with automated tools</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/javascript/4 Measuring Tests Effectiveness"><button class="folder-button"><p class="folder-title">4 Measuring Tests Effectiveness</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/javascript/4 Measuring Tests Effectiveness"><li><li><a href="../../../../../fruit/Coding/Testing/javascript/4-Measuring-Tests-Effectiveness/4-1-Get-enough-coverage-for-being-confident-80-seems-to-be-the-lucky-number" data-for="fruit/Coding/Testing/javascript/4-Measuring-Tests-Effectiveness/4-1-Get-enough-coverage-for-being-confident-80-seems-to-be-the-lucky-number">4-1 Get enough coverage for being confident 80 seems to be the lucky number</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/4-Measuring-Tests-Effectiveness/4-2-Inspect-coverage-reports-to-detect-untested-areas-and-other-oddities" data-for="fruit/Coding/Testing/javascript/4-Measuring-Tests-Effectiveness/4-2-Inspect-coverage-reports-to-detect-untested-areas-and-other-oddities">4-2 Inspect coverage reports to detect untested areas and other oddities</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/4-Measuring-Tests-Effectiveness/4-3-Measure-logical-coverage-using-mutation-testing" data-for="fruit/Coding/Testing/javascript/4-Measuring-Tests-Effectiveness/4-3-Measure-logical-coverage-using-mutation-testing">4-3 Measure logical coverage using mutation testing</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/4-Measuring-Tests-Effectiveness/4-4-Preventing-test-code-issues-with-Test-linters" data-for="fruit/Coding/Testing/javascript/4-Measuring-Tests-Effectiveness/4-4-Preventing-test-code-issues-with-Test-linters">4-4 Preventing test code issues with Test linters</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/javascript/5 Continuous Integration"><button class="folder-button"><p class="folder-title">5 Continuous Integration</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/javascript/5 Continuous Integration"><li><li><a href="../../../../../fruit/Coding/Testing/javascript/5-Continuous-Integration/5-1-Enrich-your-linters-and-abort-builds-that-have-linting-issues" data-for="fruit/Coding/Testing/javascript/5-Continuous-Integration/5-1-Enrich-your-linters-and-abort-builds-that-have-linting-issues">5-1 Enrich your linters and abort builds that have linting issues</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/5-Continuous-Integration/5-2-Shorten-the-feedback-loop-with-local-developer-CI" data-for="fruit/Coding/Testing/javascript/5-Continuous-Integration/5-2-Shorten-the-feedback-loop-with-local-developer-CI">5-2 Shorten the feedback loop with local developer-CI</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/5-Continuous-Integration/5-3-Perform-e2e-testing-over-a-true-production-mirror" data-for="fruit/Coding/Testing/javascript/5-Continuous-Integration/5-3-Perform-e2e-testing-over-a-true-production-mirror">5-3 Perform e2e testing over a true production-mirror</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/5-Continuous-Integration/5-4-Parallelize-test-execution" data-for="fruit/Coding/Testing/javascript/5-Continuous-Integration/5-4-Parallelize-test-execution">5-4 Parallelize test execution</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/5-Continuous-Integration/5-5-Stay-away-from-legal-issues-using-license-and-plagiarism-check" data-for="fruit/Coding/Testing/javascript/5-Continuous-Integration/5-5-Stay-away-from-legal-issues-using-license-and-plagiarism-check">5-5 Stay away from legal issues using license and plagiarism check</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/5-Continuous-Integration/5-6-Constantly-inspect-for-vulnerable-dependencies" data-for="fruit/Coding/Testing/javascript/5-Continuous-Integration/5-6-Constantly-inspect-for-vulnerable-dependencies">5-6 Constantly inspect for vulnerable dependencies</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/5-Continuous-Integration/5-7-Automate-dependency-updates" data-for="fruit/Coding/Testing/javascript/5-Continuous-Integration/5-7-Automate-dependency-updates">5-7 Automate dependency updates</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/5-Continuous-Integration/5-8-Other-non-Node-related-CI-tips" data-for="fruit/Coding/Testing/javascript/5-Continuous-Integration/5-8-Other-non-Node-related-CI-tips">5-8 Other non-Node related CI tips</a></li></li><li><li><a href="../../../../../fruit/Coding/Testing/javascript/5-Continuous-Integration/5-9-Build-matrix-Run-the-same-CI-steps-using-multiple-Node-versions" data-for="fruit/Coding/Testing/javascript/5-Continuous-Integration/5-9-Build-matrix-Run-the-same-CI-steps-using-multiple-Node-versions">5-9 Build matrix Run the same CI steps using multiple Node versions</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Coding/Testing/javascript/assets"><button class="folder-button"><p class="folder-title">assets</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Coding/Testing/javascript/assets"><li><li><a href="../../../../../fruit/Coding/Testing/javascript/assets/readme" data-for="fruit/Coding/Testing/javascript/assets/readme">readme</a></li></li></ul></div></div></li></ul></div></div></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming"><button class="folder-button"><p class="folder-title">Diagraming</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/bizSys"><button class="folder-button"><p class="folder-title">bizSys</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/bizSys"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/bizSys/externalView"><button class="folder-button"><p class="folder-title">externalView</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/bizSys/externalView"><li><li><a href="../../../../../fruit/Diagraming/bizSys/externalView/constructing-sequence-diagrams" data-for="fruit/Diagraming/bizSys/externalView/constructing-sequence-diagrams">constructing-sequence-diagrams</a></li></li><li><li><a href="../../../../../fruit/Diagraming/bizSys/externalView/high-level-sequence-diagrams" data-for="fruit/Diagraming/bizSys/externalView/high-level-sequence-diagrams">high-level-sequence-diagrams</a></li></li><li><li><a href="../../../../../fruit/Diagraming/bizSys/externalView/sequence-diagrams" data-for="fruit/Diagraming/bizSys/externalView/sequence-diagrams">sequence-diagrams</a></li></li><li><li><a href="../../../../../fruit/Diagraming/bizSys/externalView/sequence-diagrams-for-scenarios-of-business-use-cases" data-for="fruit/Diagraming/bizSys/externalView/sequence-diagrams-for-scenarios-of-business-use-cases">sequence-diagrams-for-scenarios-of-business-use-cases</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/bizSys/internalView"><button class="folder-button"><p class="folder-title">internalView</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/bizSys/internalView"><li><li><a href="../../../../../fruit/Diagraming/bizSys/internalView/activity-diagram" data-for="fruit/Diagraming/bizSys/internalView/activity-diagram">activity-diagram</a></li></li><li><li><a href="../../../../../fruit/Diagraming/bizSys/internalView/class-diagram" data-for="fruit/Diagraming/bizSys/internalView/class-diagram">class-diagram</a></li></li><li><li><a href="../../../../../fruit/Diagraming/bizSys/internalView/constructing-class-diagrams" data-for="fruit/Diagraming/bizSys/internalView/constructing-class-diagrams">constructing-class-diagrams</a></li></li><li><li><a href="../../../../../fruit/Diagraming/bizSys/internalView/constructing-package-diagrams" data-for="fruit/Diagraming/bizSys/internalView/constructing-package-diagrams">constructing-package-diagrams</a></li></li><li><li><a href="../../../../../fruit/Diagraming/bizSys/internalView/package-diagram" data-for="fruit/Diagraming/bizSys/internalView/package-diagram">package-diagram</a></li></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/ITSys"><button class="folder-button"><p class="folder-title">ITSys</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/ITSys"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/ITSys/behavioralView"><button class="folder-button"><p class="folder-title">behavioralView</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/ITSys/behavioralView"><li><li><a href="../../../../../fruit/Diagraming/ITSys/behavioralView/constructing-statechart-diagrams" data-for="fruit/Diagraming/ITSys/behavioralView/constructing-statechart-diagrams">constructing-statechart-diagrams</a></li></li><li><li><a href="../../../../../fruit/Diagraming/ITSys/behavioralView/statechart-diagram" data-for="fruit/Diagraming/ITSys/behavioralView/statechart-diagram">statechart-diagram</a></li></li><li><li><a href="../../../../../fruit/Diagraming/ITSys/behavioralView/the-elements-of-the-view" data-for="fruit/Diagraming/ITSys/behavioralView/the-elements-of-the-view">the-elements-of-the-view</a></li></li><li><li><a href="../../../../../fruit/Diagraming/ITSys/behavioralView/the-life-of-an-object" data-for="fruit/Diagraming/ITSys/behavioralView/the-life-of-an-object">the-life-of-an-object</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/ITSys/externalView"><button class="folder-button"><p class="folder-title">externalView</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/ITSys/externalView"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/ITSys/externalView/the-elements-of-view"><button class="folder-button"><p class="folder-title">the-elements-of-view</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/ITSys/externalView/the-elements-of-view"><li><li><a href="../../../../../fruit/Diagraming/ITSys/externalView/the-elements-of-view/use-case-diagram" data-for="fruit/Diagraming/ITSys/externalView/the-elements-of-view/use-case-diagram">use-case-diagram</a></li></li></ul></div></div></li><li><li><a href="../../../../../fruit/Diagraming/ITSys/externalView/constructing-the-external-view" data-for="fruit/Diagraming/ITSys/externalView/constructing-the-external-view">constructing-the-external-view</a></li></li><li><li><a href="../../../../../fruit/Diagraming/ITSys/externalView/query-events-and-mutation-events" data-for="fruit/Diagraming/ITSys/externalView/query-events-and-mutation-events">query-events-and-mutation-events</a></li></li><li><li><a href="../../../../../fruit/Diagraming/ITSys/externalView/the-user-view-or-i-dont-care-how-it-works-as-long-as-it-works" data-for="fruit/Diagraming/ITSys/externalView/the-user-view-or-i-dont-care-how-it-works-as-long-as-it-works">the-user-view-or-i-dont-care-how-it-works-as-long-as-it-works</a></li></li><li><li><a href="../../../../../fruit/Diagraming/ITSys/externalView/use-case-sequence-diagram" data-for="fruit/Diagraming/ITSys/externalView/use-case-sequence-diagram">use-case-sequence-diagram</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/ITSys/interactionView"><button class="folder-button"><p class="folder-title">interactionView</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/ITSys/interactionView"><li><li><a href="../../../../../fruit/Diagraming/ITSys/interactionView/communication-diagram" data-for="fruit/Diagraming/ITSys/interactionView/communication-diagram">communication-diagram</a></li></li><li><li><a href="../../../../../fruit/Diagraming/ITSys/interactionView/constructing-communication-diagrams" data-for="fruit/Diagraming/ITSys/interactionView/constructing-communication-diagrams">constructing-communication-diagrams</a></li></li><li><li><a href="../../../../../fruit/Diagraming/ITSys/interactionView/constructing-sequence-diagrams" data-for="fruit/Diagraming/ITSys/interactionView/constructing-sequence-diagrams">constructing-sequence-diagrams</a></li></li><li><li><a href="../../../../../fruit/Diagraming/ITSys/interactionView/elements-of-the-view" data-for="fruit/Diagraming/ITSys/interactionView/elements-of-the-view">elements-of-the-view</a></li></li><li><li><a href="../../../../../fruit/Diagraming/ITSys/interactionView/seeing-what-happens-inside-the-it-system" data-for="fruit/Diagraming/ITSys/interactionView/seeing-what-happens-inside-the-it-system">seeing-what-happens-inside-the-it-system</a></li></li><li><li><a href="../../../../../fruit/Diagraming/ITSys/interactionView/sequence-diagram" data-for="fruit/Diagraming/ITSys/interactionView/sequence-diagram">sequence-diagram</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/ITSys/structuralView"><button class="folder-button"><p class="folder-title">structuralView</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/ITSys/structuralView"><li><li><a href="../../../../../fruit/Diagraming/ITSys/structuralView/class-diagram" data-for="fruit/Diagraming/ITSys/structuralView/class-diagram">class-diagram</a></li></li><li><li><a href="../../../../../fruit/Diagraming/ITSys/structuralView/constructing-class-diagrams" data-for="fruit/Diagraming/ITSys/structuralView/constructing-class-diagrams">constructing-class-diagrams</a></li></li><li><li><a href="../../../../../fruit/Diagraming/ITSys/structuralView/elements-of-the-view" data-for="fruit/Diagraming/ITSys/structuralView/elements-of-the-view">elements-of-the-view</a></li></li><li><li><a href="../../../../../fruit/Diagraming/ITSys/structuralView/generalization-specialization-and-inheritance" data-for="fruit/Diagraming/ITSys/structuralView/generalization-specialization-and-inheritance">generalization-specialization-and-inheritance</a></li></li><li><li><a href="../../../../../fruit/Diagraming/ITSys/structuralView/objects-and-classes" data-for="fruit/Diagraming/ITSys/structuralView/objects-and-classes">objects-and-classes</a></li></li><li><li><a href="../../../../../fruit/Diagraming/ITSys/structuralView/static-and-dynamic-business-rules" data-for="fruit/Diagraming/ITSys/structuralView/static-and-dynamic-business-rules">static-and-dynamic-business-rules</a></li></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/prepIntegr"><button class="folder-button"><p class="folder-title">prepIntegr</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/prepIntegr"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/prepIntegr/processView"><button class="folder-button"><p class="folder-title">processView</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/prepIntegr/processView"><li><li><a href="../../../../../fruit/Diagraming/prepIntegr/processView/activity-diagrams" data-for="fruit/Diagraming/prepIntegr/processView/activity-diagrams">activity-diagrams</a></li></li><li><li><a href="../../../../../fruit/Diagraming/prepIntegr/processView/constructing-diagrams-in-the-process-view" data-for="fruit/Diagraming/prepIntegr/processView/constructing-diagrams-in-the-process-view">constructing-diagrams-in-the-process-view</a></li></li><li><li><a href="../../../../../fruit/Diagraming/prepIntegr/processView/elements-of-the-view" data-for="fruit/Diagraming/prepIntegr/processView/elements-of-the-view">elements-of-the-view</a></li></li><li><li><a href="../../../../../fruit/Diagraming/prepIntegr/processView/sequence-diagram" data-for="fruit/Diagraming/prepIntegr/processView/sequence-diagram">sequence-diagram</a></li></li><li><li><a href="../../../../../fruit/Diagraming/prepIntegr/processView/the-business-system-model-as-foundation" data-for="fruit/Diagraming/prepIntegr/processView/the-business-system-model-as-foundation">the-business-system-model-as-foundation</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/fruit/Diagraming/prepIntegr/staticView"><button class="folder-button"><p class="folder-title">staticView</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/fruit/Diagraming/prepIntegr/staticView"><li><li><a href="../../../../../fruit/Diagraming/prepIntegr/staticView/class-diagram" data-for="fruit/Diagraming/prepIntegr/staticView/class-diagram">class-diagram</a></li></li><li><li><a href="../../../../../fruit/Diagraming/prepIntegr/staticView/constructing-class-diagrams" data-for="fruit/Diagraming/prepIntegr/staticView/constructing-class-diagrams">constructing-class-diagrams</a></li></li><li><li><a href="../../../../../fruit/Diagraming/prepIntegr/staticView/elements-of-the-view" data-for="fruit/Diagraming/prepIntegr/staticView/elements-of-the-view">elements-of-the-view</a></li></li><li><li><a href="../../../../../fruit/Diagraming/prepIntegr/staticView/transformation-of-uml-messages-into-various-stan" data-for="fruit/Diagraming/prepIntegr/staticView/transformation-of-uml-messages-into-various-stan">transformation-of-uml-messages-into-various-stan</a></li></li><li><li><a href="../../../../../fruit/Diagraming/prepIntegr/staticView/transforming-data-from-the-it-system-to-the-mess" data-for="fruit/Diagraming/prepIntegr/staticView/transforming-data-from-the-it-system-to-the-mess">transforming-data-from-the-it-system-to-the-mess</a></li></li></ul></div></div></li></ul></div></div></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/seed"><button class="folder-button"><p class="folder-title">seed</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/seed"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/seed/computing"><button class="folder-button"><p class="folder-title">computing</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/seed/computing"><li><li><a href="../../../../../seed/computing/ployglot-(computing)" data-for="seed/computing/ployglot-(computing)">ployglot (computing)</a></li></li><li><li><a href="../../../../../seed/computing/Seeding-(computing)" data-for="seed/computing/Seeding-(computing)">Seeding (computing)</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/seed/software development"><button class="folder-button"><p class="folder-title">software development</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/seed/software development"><li><li><a href="../../../../../seed/software-development/artifact-(software-development)" data-for="seed/software-development/artifact-(software-development)">artifact (software development)</a></li></li><li><li><a href="../../../../../seed/software-development/Generic-function" data-for="seed/software-development/Generic-function">Generic function</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/seed/Unix"><button class="folder-button"><p class="folder-title">Unix</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/seed/Unix"><li><li><a href="../../../../../seed/Unix/Shebang-(Unix)" data-for="seed/Unix/Shebang-(Unix)">Shebang (Unix)</a></li></li></ul></div></div></li><li><li><a href="../../../../../seed/artifact" data-for="seed/artifact">artifact</a></li></li><li><li><a href="../../../../../seed/polyglot" data-for="seed/polyglot">polyglot</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/tree"><button class="folder-button"><p class="folder-title">tree</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/tree"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/tree/Product Design"><button class="folder-button"><p class="folder-title">Product Design</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/tree/Product Design"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/tree/Product Design/Design"><button class="folder-button"><p class="folder-title">Design</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/tree/Product Design/Design"><li><li><a href="../../../../../tree/Product-Design/Design/Business-Model-Canvas" data-for="tree/Product-Design/Design/Business-Model-Canvas">Business Model Canvas</a></li></li><li><li><a href="../../../../../tree/Product-Design/Design/Call-to-Action" data-for="tree/Product-Design/Design/Call-to-Action">Call to Action</a></li></li><li><li><a href="../../../../../tree/Product-Design/Design/Cheating" data-for="tree/Product-Design/Design/Cheating">Cheating</a></li></li><li><li><a href="../../../../../tree/Product-Design/Design/Deploy-Social-Proof" data-for="tree/Product-Design/Design/Deploy-Social-Proof">Deploy Social Proof</a></li></li><li><li><a href="../../../../../tree/Product-Design/Design/Incremental-A,-B-Testing" data-for="tree/Product-Design/Design/Incremental-A,-B-Testing">Incremental A, B Testing</a></li></li><li><li><a href="../../../../../tree/Product-Design/Design/Lean-Canvas" data-for="tree/Product-Design/Design/Lean-Canvas">Lean Canvas</a></li></li></ul></div></div></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/tree/Software Development"><button class="folder-button"><p class="folder-title">Software Development</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/tree/Software Development"><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/tree/Software Development/Architecture"><button class="folder-button"><p class="folder-title">Architecture</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/tree/Software Development/Architecture"><li><li><a href="../../../../../tree/Software-Development/Architecture/Untitled" data-for="tree/Software-Development/Architecture/Untitled">Untitled</a></li></li></ul></div></div></li><li><div><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="/tree/Software Development/Project Layout"><button class="folder-button"><p class="folder-title">Project Layout</p></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="/tree/Software Development/Project Layout"><li><li><a href="../../../../../tree/Software-Development/Project-Layout/Untitled" data-for="tree/Software-Development/Project-Layout/Untitled">Untitled</a></li></li></ul></div></div></li></ul></div></div></li></ul></div></div></li><li><li><a href="../../../../../Applications" data-for="Applications">Applications</a></li></li><li><li><a href="../../../../../Inbox" data-for="Inbox">Inbox</a></li></li></ul></div></div></li><li id="explorer-end"></li></ul></div></div></div><div class="center"><div class="page-header"><div class="popover-hint"><nav class="breadcrumb-container " aria-label="breadcrumbs"><div class="breadcrumb-element"><a href="../../../../..">Home</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../../../../fruit/">fruit</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../../../../fruit/Coding/">Coding</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../../../../fruit/Coding/Testing/">Testing</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../../../../fruit/Coding/Testing/go/">go</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../../../../fruit/Coding/Testing/go/build_an_application/">build_an_application</a><p> ❯ </p></div><div class="breadcrumb-element"><a href>websockets</a></div></nav><h1 class="article-title ">websockets</h1><p class="content-meta ">Dec 22, 2023, 28 min read</p></div></div><article class="popover-hint"><h1 id="websockets">WebSockets<a aria-hidden="true" tabindex="-1" href="#websockets" class="internal alias"> §</a></h1>
<p><strong><a href="https://github.com/quii/learn-go-with-tests/tree/main/websockets" class="external alias">You can find all the code for this chapter here</a></strong></p>
<p>In this chapter we’ll learn how to use WebSockets to improve our application.</p>
<h2 id="project-recap">Project recap<a aria-hidden="true" tabindex="-1" href="#project-recap" class="internal alias"> §</a></h2>
<p>We have two applications in our poker codebase</p>
<ul>
<li><em>Command line app</em>. Prompts the user to enter the number of players in a game. From then on informs the players of what the “blind bet” value is, which increases over time. At any point a user can enter <code>&quot;{Playername} wins&quot;</code> to finish the game and record the victor in a store.</li>
<li><em>Web app</em>. Allows users to record winners of games and displays a league table. Shares the same store as the command line app.</li>
</ul>
<h2 id="next-steps">Next steps<a aria-hidden="true" tabindex="-1" href="#next-steps" class="internal alias"> §</a></h2>
<p>The product owner is thrilled with the command line application but would prefer it if we could bring that functionality to the browser. She imagines a web page with a text box that allows the user to enter the number of players and when they submit the form the page displays the blind value and automatically updates it when appropriate. Like the command line application the user can declare the winner and it’ll get saved in the database.</p>
<p>On the face of it, it sounds quite simple but as always we must emphasise taking an <em>iterative</em> approach to writing software.</p>
<p>First we will need to serve HTML. So far all of our HTTP endpoints have returned either plaintext or JSON. We <em>could</em> use the same techniques we know (as they’re all ultimately strings) but we can also use the <a href="https://golang.org/pkg/html/template/" class="external alias">html/template</a> package for a cleaner solution.</p>
<p>We also need to be able to asynchronously send messages to the user saying <code>The blind is now *y*</code> without having to refresh the browser. We can use <a href="https://en.wikipedia.org/wiki/WebSocket" class="external alias">WebSockets</a> to facilitate this.</p>
<blockquote>
<p>WebSocket is a computer communications protocol, providing full-duplex communication channels over a single TCP connection</p>
</blockquote>
<p>Given we are taking on a number of techniques it’s even more important we do the smallest amount of useful work possible first and then iterate.</p>
<p>For that reason the first thing we’ll do is create a web page with a form for the user to record a winner. Rather than using a plain form, we will use WebSockets to send that data to our server for it to record.</p>
<p>After that we’ll work on the blind alerts by which point we will have a bit of infrastructure code set up.</p>
<h3 id="what-about-tests-for-the-javascript-">What about tests for the JavaScript ?<a aria-hidden="true" tabindex="-1" href="#what-about-tests-for-the-javascript-" class="internal alias"> §</a></h3>
<p>There will be some JavaScript written to do this but I won’t go in to writing tests.</p>
<p>It is of course possible but for the sake of brevity I won’t be including any explanations for it.</p>
<p>Sorry folks. Lobby O’Reilly to pay me to make a “Learn JavaScript with tests”.</p>
<h2 id="write-the-test-first">Write the test first<a aria-hidden="true" tabindex="-1" href="#write-the-test-first" class="internal alias"> §</a></h2>
<p>First thing we need to do is serve up some HTML to users when they hit <code>/game</code>.</p>
<p>Here’s a reminder of the pertinent code in our web server</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">PlayerServer</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">struct</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	store PlayerStore</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	http.Handler</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> jsonContentType </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;application/json&quot;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NewPlayerServer</span><span style="color:var(--shiki-color-text);">(store PlayerStore) </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">PlayerServer {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	p </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">new</span><span style="color:var(--shiki-color-text);">(PlayerServer)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	p.store </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> store</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	router </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> http.</span><span style="color:var(--shiki-token-function);">NewServeMux</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	router.</span><span style="color:var(--shiki-token-function);">Handle</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;/league&quot;</span><span style="color:var(--shiki-color-text);">, http.</span><span style="color:var(--shiki-token-function);">HandlerFunc</span><span style="color:var(--shiki-color-text);">(p.leagueHandler))</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	router.</span><span style="color:var(--shiki-token-function);">Handle</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;/players/&quot;</span><span style="color:var(--shiki-color-text);">, http.</span><span style="color:var(--shiki-token-function);">HandlerFunc</span><span style="color:var(--shiki-color-text);">(p.playersHandler))</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	p.Handler </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> router</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> p</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>The <em>easiest</em> thing we can do for now is check when we <code>GET /game</code> that we get a <code>200</code>.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">TestGame</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	t.</span><span style="color:var(--shiki-token-function);">Run</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;GET /game returns 200&quot;</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		server </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NewPlayerServer</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">StubPlayerStore{})</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">		request, _ </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> http.</span><span style="color:var(--shiki-token-function);">NewRequest</span><span style="color:var(--shiki-color-text);">(http.MethodGet, </span><span style="color:var(--shiki-token-string-expression);">&quot;/game&quot;</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		response </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> httptest.</span><span style="color:var(--shiki-token-function);">NewRecorder</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">		server.</span><span style="color:var(--shiki-token-function);">ServeHTTP</span><span style="color:var(--shiki-color-text);">(response, request)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-function);">assertStatus</span><span style="color:var(--shiki-color-text);">(t, response.Code, http.StatusOK)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	})</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<h2 id="try-to-run-the-test">Try to run the test<a aria-hidden="true" tabindex="-1" href="#try-to-run-the-test" class="internal alias"> §</a></h2>
<pre><code>--- FAIL: TestGame (0.00s)
=== RUN   TestGame/GET_/game_returns_200
    --- FAIL: TestGame/GET_/game_returns_200 (0.00s)
    	server_test.go:109: did not get correct status, got 404, want 200
</code></pre>
<h2 id="write-enough-code-to-make-it-pass">Write enough code to make it pass<a aria-hidden="true" tabindex="-1" href="#write-enough-code-to-make-it-pass" class="internal alias"> §</a></h2>
<p>Our server has a router setup so it’s relatively easy to fix.</p>
<p>To our router add</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">router.</span><span style="color:var(--shiki-token-function);">Handle</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;/game&quot;</span><span style="color:var(--shiki-color-text);">, http.</span><span style="color:var(--shiki-token-function);">HandlerFunc</span><span style="color:var(--shiki-color-text);">(p.game))</span></span></code></pre></div>
<p>And then write the <code>game</code> method</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (p </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">PlayerServer) </span><span style="color:var(--shiki-token-function);">game</span><span style="color:var(--shiki-color-text);">(w http.ResponseWriter, r </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">http.Request) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	w.</span><span style="color:var(--shiki-token-function);">WriteHeader</span><span style="color:var(--shiki-color-text);">(http.StatusOK)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<h2 id="refactor">Refactor<a aria-hidden="true" tabindex="-1" href="#refactor" class="internal alias"> §</a></h2>
<p>The server code is already fine due to us slotting in more code into the existing well-factored code very easily.</p>
<p>We can tidy up the test a little by adding a test helper function <code>newGameRequest</code> to make the request to <code>/game</code>. Try writing this yourself.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">TestGame</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	t.</span><span style="color:var(--shiki-token-function);">Run</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;GET /game returns 200&quot;</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		server </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NewPlayerServer</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">StubPlayerStore{})</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">		request </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">newGameRequest</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		response </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> httptest.</span><span style="color:var(--shiki-token-function);">NewRecorder</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">		server.</span><span style="color:var(--shiki-token-function);">ServeHTTP</span><span style="color:var(--shiki-color-text);">(response, request)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-function);">assertStatus</span><span style="color:var(--shiki-color-text);">(t, response, http.StatusOK)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	})</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>You’ll also notice I changed <code>assertStatus</code> to accept <code>response</code> rather than <code>response.Code</code> as I feel it reads better.</p>
<p>Now we need to make the endpoint return some HTML, here it is</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="html" data-theme="default"><code data-language="html" data-theme="default"><span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">&lt;!</span><span style="color:var(--shiki-token-string-expression);">DOCTYPE</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">html</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">&lt;</span><span style="color:var(--shiki-token-string-expression);">html</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">lang</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">&quot;en&quot;</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">&lt;</span><span style="color:var(--shiki-token-string-expression);">head</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">    &lt;</span><span style="color:var(--shiki-token-string-expression);">meta</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">charset</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">&quot;UTF-8&quot;</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">    &lt;</span><span style="color:var(--shiki-token-string-expression);">title</span><span style="color:var(--shiki-color-text);">>Let's play poker&lt;/</span><span style="color:var(--shiki-token-string-expression);">title</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">&lt;/</span><span style="color:var(--shiki-token-string-expression);">head</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">&lt;</span><span style="color:var(--shiki-token-string-expression);">body</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">&lt;</span><span style="color:var(--shiki-token-string-expression);">section</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">id</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">&quot;game&quot;</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">    &lt;</span><span style="color:var(--shiki-token-string-expression);">div</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">id</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">&quot;declare-winner&quot;</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">        &lt;</span><span style="color:var(--shiki-token-string-expression);">label</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">for</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">&quot;winner&quot;</span><span style="color:var(--shiki-color-text);">>Winner&lt;/</span><span style="color:var(--shiki-token-string-expression);">label</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">        &lt;</span><span style="color:var(--shiki-token-string-expression);">input</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">type</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">&quot;text&quot;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">id</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">&quot;winner&quot;</span><span style="color:var(--shiki-color-text);">/></span></span>
<span data-line><span style="color:var(--shiki-color-text);">        &lt;</span><span style="color:var(--shiki-token-string-expression);">button</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">id</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">&quot;winner-button&quot;</span><span style="color:var(--shiki-color-text);">>Declare winner&lt;/</span><span style="color:var(--shiki-token-string-expression);">button</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">    &lt;/</span><span style="color:var(--shiki-token-string-expression);">div</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">&lt;/</span><span style="color:var(--shiki-token-string-expression);">section</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">&lt;/</span><span style="color:var(--shiki-token-string-expression);">body</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">&lt;</span><span style="color:var(--shiki-token-string-expression);">script</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">type</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">&quot;application/javascript&quot;</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">submitWinnerButton</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">document</span><span style="color:var(--shiki-token-function);">.getElementById</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">'winner-button'</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">winnerInput</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">document</span><span style="color:var(--shiki-token-function);">.getElementById</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">'winner'</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> (window[</span><span style="color:var(--shiki-token-string-expression);">'WebSocket'</span><span style="color:var(--shiki-color-text);">]) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">conn</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">new</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">WebSocket</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">'ws://'</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">document</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">location</span><span style="color:var(--shiki-color-text);">.host </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'/ws'</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-constant);">submitWinnerButton</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-function);">onclick</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> event </span><span style="color:var(--shiki-token-keyword);">=></span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-constant);">conn</span><span style="color:var(--shiki-token-function);">.send</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">winnerInput</span><span style="color:var(--shiki-color-text);">.value)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">        }</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    }</span></span>
<span data-line><span style="color:var(--shiki-color-text);">&lt;/</span><span style="color:var(--shiki-token-string-expression);">script</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">&lt;/</span><span style="color:var(--shiki-token-string-expression);">html</span><span style="color:var(--shiki-color-text);">></span></span></code></pre></div>
<p>We have a very simple web page</p>
<ul>
<li>A text input for the user to enter the winner into</li>
<li>A button they can click to declare the winner.</li>
<li>Some JavaScript to open a WebSocket connection to our server and handle the submit button being pressed</li>
</ul>
<p><code>WebSocket</code> is built into most modern browsers so we don’t need to worry about bringing in any libraries. The web page won’t work for older browsers, but we’re ok with that for this scenario.</p>
<h3 id="how-do-we-test-we-return-the-correct-markup">How do we test we return the correct markup?<a aria-hidden="true" tabindex="-1" href="#how-do-we-test-we-return-the-correct-markup" class="internal alias"> §</a></h3>
<p>There are a few ways. As has been emphasised throughout the book, it is important that the tests you write have sufficient value to justify the cost.</p>
<ol>
<li>Write a browser based test, using something like Selenium. These tests are the most “realistic” of all approaches because they start an actual web browser of some kind and simulates a user interacting with it. These tests can give you a lot of confidence your system works but are more difficult to write than unit tests and much slower to run. For the purposes of our product this is overkill.</li>
<li>Do an exact string match. This <em>can</em> be ok but these kind of tests end up being very brittle. The moment someone changes the markup you will have a test failing when in practice nothing has <em>actually broken</em>.</li>
<li>Check we call the correct template. We will be using a templating library from the standard lib to serve the HTML (discussed shortly) and we could inject in the <em>thing</em> to generate the HTML and spy on its call to check we’re doing it right. This would have an impact on our code’s design but doesn’t actually test a great deal; other than we’re calling it with the correct template file. Given we will only have the one template in our project the chance of failure here seems low.</li>
</ol>
<p>So in the book “Learn Go with Tests” for the first time, we’re not going to write a test.</p>
<p>Put the markup in a file called <code>game.html</code></p>
<p>Next change the endpoint we just wrote to the following</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (p </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">PlayerServer) </span><span style="color:var(--shiki-token-function);">game</span><span style="color:var(--shiki-color-text);">(w http.ResponseWriter, r </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">http.Request) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	tmpl, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> template.</span><span style="color:var(--shiki-token-function);">ParseFiles</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;game.html&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		http.</span><span style="color:var(--shiki-token-function);">Error</span><span style="color:var(--shiki-color-text);">(w, fmt.</span><span style="color:var(--shiki-token-function);">Sprintf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;problem loading template </span><span style="color:var(--shiki-token-constant);">%s</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, err.</span><span style="color:var(--shiki-token-function);">Error</span><span style="color:var(--shiki-color-text);">()), http.StatusInternalServerError)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">return</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	tmpl.</span><span style="color:var(--shiki-token-function);">Execute</span><span style="color:var(--shiki-color-text);">(w, </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p><a href="https://golang.org/pkg/html/template/" class="external"><code>html/template</code></a> is a Go package for creating HTML. In our case we call <code>template.ParseFiles</code>, giving the path of our html file. Assuming there is no error you can then <code>Execute</code> the template, which writes it to an <code>io.Writer</code>. In our case we want it to <code>Write</code> to the internet, so we give it our <code>http.ResponseWriter</code>.</p>
<p>As we have not written a test, it would be prudent to manually test our web server just to make sure things are working as we’d hope. Go to <code>cmd/webserver</code> and run the <code>main.go</code> file. Visit <code>http://localhost:5000/game</code>.</p>
<p>You <em>should</em> have got an error about not being able to find the template. You can either change the path to be relative to your folder, or you can have a copy of the <code>game.html</code> in the <code>cmd/webserver</code> directory. I chose to create a symlink (<code>ln -s ../../game.html game.html</code>) to the file inside the root of the project so if I make changes they are reflected when running the server.</p>
<p>If you make this change and run again you should see our UI.</p>
<p>Now we need to test that when we get a string over a WebSocket connection to our server that we declare it as a winner of a game.</p>
<h2 id="write-the-test-first-1">Write the test first<a aria-hidden="true" tabindex="-1" href="#write-the-test-first-1" class="internal alias"> §</a></h2>
<p>For the first time we are going to use an external library so that we can work with WebSockets.</p>
<p>Run <code>go get github.com/gorilla/websocket</code></p>
<p>This will fetch the code for the excellent <a href="https://github.com/gorilla/websocket" class="external alias">Gorilla WebSocket</a> library. Now we can update our tests for our new requirement.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">t.</span><span style="color:var(--shiki-token-function);">Run</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;when we get a message over a websocket it is a winner of a game&quot;</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	store </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">StubPlayerStore{}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	winner </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;Ruth&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	server </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> httptest.</span><span style="color:var(--shiki-token-function);">NewServer</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-function);">NewPlayerServer</span><span style="color:var(--shiki-color-text);">(store))</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">defer</span><span style="color:var(--shiki-color-text);"> server.</span><span style="color:var(--shiki-token-function);">Close</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	wsURL </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;ws&quot;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> strings.</span><span style="color:var(--shiki-token-function);">TrimPrefix</span><span style="color:var(--shiki-color-text);">(server.URL, </span><span style="color:var(--shiki-token-string-expression);">&quot;http&quot;</span><span style="color:var(--shiki-color-text);">) </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;/ws&quot;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	ws, _, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> websocket.DefaultDialer.</span><span style="color:var(--shiki-token-function);">Dial</span><span style="color:var(--shiki-color-text);">(wsURL, </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		t.</span><span style="color:var(--shiki-token-function);">Fatalf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;could not open a ws connection on </span><span style="color:var(--shiki-token-constant);">%s</span><span style="color:var(--shiki-token-string-expression);"> </span><span style="color:var(--shiki-token-constant);">%v</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, wsURL, err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">defer</span><span style="color:var(--shiki-color-text);"> ws.</span><span style="color:var(--shiki-token-function);">Close</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> ws.</span><span style="color:var(--shiki-token-function);">WriteMessage</span><span style="color:var(--shiki-color-text);">(websocket.TextMessage, []</span><span style="color:var(--shiki-token-function);">byte</span><span style="color:var(--shiki-color-text);">(winner)); err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		t.</span><span style="color:var(--shiki-token-function);">Fatalf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;could not send message over ws connection </span><span style="color:var(--shiki-token-constant);">%v</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">AssertPlayerWin</span><span style="color:var(--shiki-color-text);">(t, store, winner)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">})</span></span></code></pre></div>
<p>Make sure that you have an import for the <code>websocket</code> library. My IDE automatically did it for me, so should yours.</p>
<p>To test what happens from the browser we have to open up our own WebSocket connection and write to it.</p>
<p>Our previous tests around our server just called methods on our server but now we need to have a persistent connection to our server. To do that we use <code>httptest.NewServer</code> which takes a <code>http.Handler</code> and will spin it up and listen for connections.</p>
<p>Using <code>websocket.DefaultDialer.Dial</code> we try to dial in to our server and then we’ll try and send a message with our <code>winner</code>.</p>
<p>Finally, we assert on the player store to check the winner was recorded.</p>
<h2 id="try-to-run-the-test-1">Try to run the test<a aria-hidden="true" tabindex="-1" href="#try-to-run-the-test-1" class="internal alias"> §</a></h2>
<pre><code>=== RUN   TestGame/when_we_get_a_message_over_a_websocket_it_is_a_winner_of_a_game
    --- FAIL: TestGame/when_we_get_a_message_over_a_websocket_it_is_a_winner_of_a_game (0.00s)
        server_test.go:124: could not open a ws connection on ws://127.0.0.1:55838/ws websocket: bad handshake
</code></pre>
<p>We have not changed our server to accept WebSocket connections on <code>/ws</code> so we’re not shaking hands yet.</p>
<h2 id="write-enough-code-to-make-it-pass-1">Write enough code to make it pass<a aria-hidden="true" tabindex="-1" href="#write-enough-code-to-make-it-pass-1" class="internal alias"> §</a></h2>
<p>Add another listing to our router</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">router.</span><span style="color:var(--shiki-token-function);">Handle</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;/ws&quot;</span><span style="color:var(--shiki-color-text);">, http.</span><span style="color:var(--shiki-token-function);">HandlerFunc</span><span style="color:var(--shiki-color-text);">(p.webSocket))</span></span></code></pre></div>
<p>Then add our new <code>webSocket</code> handler</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (p </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">PlayerServer) </span><span style="color:var(--shiki-token-function);">webSocket</span><span style="color:var(--shiki-color-text);">(w http.ResponseWriter, r </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">http.Request) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	upgrader </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> websocket.Upgrader{</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		ReadBufferSize:  </span><span style="color:var(--shiki-token-constant);">1024</span><span style="color:var(--shiki-color-text);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		WriteBufferSize: </span><span style="color:var(--shiki-token-constant);">1024</span><span style="color:var(--shiki-color-text);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	upgrader.</span><span style="color:var(--shiki-token-function);">Upgrade</span><span style="color:var(--shiki-color-text);">(w, r, </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>To accept a WebSocket connection we <code>Upgrade</code> the request. If you now re-run the test you should move on to the next error.</p>
<pre><code>=== RUN   TestGame/when_we_get_a_message_over_a_websocket_it_is_a_winner_of_a_game
    --- FAIL: TestGame/when_we_get_a_message_over_a_websocket_it_is_a_winner_of_a_game (0.00s)
        server_test.go:132: got 0 calls to RecordWin want 1
</code></pre>
<p>Now that we have a connection opened, we’ll want to listen for a message and then record it as the winner.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (p </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">PlayerServer) </span><span style="color:var(--shiki-token-function);">webSocket</span><span style="color:var(--shiki-color-text);">(w http.ResponseWriter, r </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">http.Request) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	upgrader </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> websocket.Upgrader{</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		ReadBufferSize:  </span><span style="color:var(--shiki-token-constant);">1024</span><span style="color:var(--shiki-color-text);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		WriteBufferSize: </span><span style="color:var(--shiki-token-constant);">1024</span><span style="color:var(--shiki-color-text);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	conn, _ </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> upgrader.</span><span style="color:var(--shiki-token-function);">Upgrade</span><span style="color:var(--shiki-color-text);">(w, r, </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	_, winnerMsg, _ </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> conn.</span><span style="color:var(--shiki-token-function);">ReadMessage</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	p.store.</span><span style="color:var(--shiki-token-function);">RecordWin</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-function);">string</span><span style="color:var(--shiki-color-text);">(winnerMsg))</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>(Yes, we’re ignoring a lot of errors right now!)</p>
<p><code>conn.ReadMessage()</code> blocks on waiting for a message on the connection. Once we get one we use it to <code>RecordWin</code>. This would finally close the WebSocket connection.</p>
<p>If you try and run the test, it’s still failing.</p>
<p>The issue is timing. There is a delay between our WebSocket connection reading the message and recording the win and our test finishes before it happens. You can test this by putting a short <code>time.Sleep</code> before the final assertion.</p>
<p>Let’s go with that for now but acknowledge that putting in arbitrary sleeps into tests <strong>is very bad practice</strong>.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">time.</span><span style="color:var(--shiki-token-function);">Sleep</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">10</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);"> time.Millisecond)</span></span>
<span data-line><span style="color:var(--shiki-token-function);">AssertPlayerWin</span><span style="color:var(--shiki-color-text);">(t, store, winner)</span></span></code></pre></div>
<h2 id="refactor-1">Refactor<a aria-hidden="true" tabindex="-1" href="#refactor-1" class="internal alias"> §</a></h2>
<p>We committed many sins to make this test work both in the server code and the test code but remember this is the easiest way for us to work.</p>
<p>We have nasty, horrible, <em>working</em> software backed by a test, so now we are free to make it nice and know we won’t break anything accidentally.</p>
<p>Let’s start with the server code.</p>
<p>We can move the <code>upgrader</code> to a private value inside our package because we don’t need to redeclare it on every WebSocket connection request</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">var</span><span style="color:var(--shiki-color-text);"> wsUpgrader </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> websocket.Upgrader{</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	ReadBufferSize:  </span><span style="color:var(--shiki-token-constant);">1024</span><span style="color:var(--shiki-color-text);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	WriteBufferSize: </span><span style="color:var(--shiki-token-constant);">1024</span><span style="color:var(--shiki-color-text);">,</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (p </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">PlayerServer) </span><span style="color:var(--shiki-token-function);">webSocket</span><span style="color:var(--shiki-color-text);">(w http.ResponseWriter, r </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">http.Request) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	conn, _ </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> wsUpgrader.</span><span style="color:var(--shiki-token-function);">Upgrade</span><span style="color:var(--shiki-color-text);">(w, r, </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	_, winnerMsg, _ </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> conn.</span><span style="color:var(--shiki-token-function);">ReadMessage</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	p.store.</span><span style="color:var(--shiki-token-function);">RecordWin</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-function);">string</span><span style="color:var(--shiki-color-text);">(winnerMsg))</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Our call to <code>template.ParseFiles(&quot;game.html&quot;)</code> will run on every <code>GET /game</code> which means we’ll go to the file system on every request even though we have no need to re-parse the template. Let’s refactor our code so that we parse the template once in <code>NewPlayerServer</code> instead. We’ll have to make it so this function can now return an error in case we have problems fetching the template from disk or parsing it.</p>
<p>Here’s the relevant changes to <code>PlayerServer</code></p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">PlayerServer</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">struct</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	store PlayerStore</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	http.Handler</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	template </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">template.Template</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> htmlTemplatePath </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;game.html&quot;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NewPlayerServer</span><span style="color:var(--shiki-color-text);">(store PlayerStore) (</span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">PlayerServer, </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	p </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">new</span><span style="color:var(--shiki-color-text);">(PlayerServer)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	tmpl, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> template.</span><span style="color:var(--shiki-token-function);">ParseFiles</span><span style="color:var(--shiki-color-text);">(htmlTemplatePath)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);">, fmt.</span><span style="color:var(--shiki-token-function);">Errorf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;problem opening </span><span style="color:var(--shiki-token-constant);">%s</span><span style="color:var(--shiki-token-string-expression);"> </span><span style="color:var(--shiki-token-constant);">%v</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, htmlTemplatePath, err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	p.template </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> tmpl</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	p.store </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> store</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	router </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> http.</span><span style="color:var(--shiki-token-function);">NewServeMux</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	router.</span><span style="color:var(--shiki-token-function);">Handle</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;/league&quot;</span><span style="color:var(--shiki-color-text);">, http.</span><span style="color:var(--shiki-token-function);">HandlerFunc</span><span style="color:var(--shiki-color-text);">(p.leagueHandler))</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	router.</span><span style="color:var(--shiki-token-function);">Handle</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;/players/&quot;</span><span style="color:var(--shiki-color-text);">, http.</span><span style="color:var(--shiki-token-function);">HandlerFunc</span><span style="color:var(--shiki-color-text);">(p.playersHandler))</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	router.</span><span style="color:var(--shiki-token-function);">Handle</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;/game&quot;</span><span style="color:var(--shiki-color-text);">, http.</span><span style="color:var(--shiki-token-function);">HandlerFunc</span><span style="color:var(--shiki-color-text);">(p.game))</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	router.</span><span style="color:var(--shiki-token-function);">Handle</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;/ws&quot;</span><span style="color:var(--shiki-color-text);">, http.</span><span style="color:var(--shiki-token-function);">HandlerFunc</span><span style="color:var(--shiki-color-text);">(p.webSocket))</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	p.Handler </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> router</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> p, </span><span style="color:var(--shiki-token-constant);">nil</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (p </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">PlayerServer) </span><span style="color:var(--shiki-token-function);">game</span><span style="color:var(--shiki-color-text);">(w http.ResponseWriter, r </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">http.Request) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	p.template.</span><span style="color:var(--shiki-token-function);">Execute</span><span style="color:var(--shiki-color-text);">(w, </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>By changing the signature of <code>NewPlayerServer</code> we now have compilation problems. Try and fix them yourself or refer to the source code if you struggle.</p>
<p>For the test code I made a helper called <code>mustMakePlayerServer(t *testing.T, store PlayerStore) *PlayerServer</code> so that I could hide the error noise away from the tests.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">mustMakePlayerServer</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T, store PlayerStore) </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">PlayerServer {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	server, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NewPlayerServer</span><span style="color:var(--shiki-color-text);">(store)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		t.</span><span style="color:var(--shiki-token-function);">Fatal</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;problem creating player server&quot;</span><span style="color:var(--shiki-color-text);">, err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> server</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Similarly, I created another helper <code>mustDialWS</code> so that I could hide nasty error noise when creating the WebSocket connection.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">mustDialWS</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T, url </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">websocket.Conn {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	ws, _, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> websocket.DefaultDialer.</span><span style="color:var(--shiki-token-function);">Dial</span><span style="color:var(--shiki-color-text);">(url, </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		t.</span><span style="color:var(--shiki-token-function);">Fatalf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;could not open a ws connection on </span><span style="color:var(--shiki-token-constant);">%s</span><span style="color:var(--shiki-token-string-expression);"> </span><span style="color:var(--shiki-token-constant);">%v</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, url, err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> ws</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Finally, in our test code we can create a helper to tidy up sending messages</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">writeWSMessage</span><span style="color:var(--shiki-color-text);">(t testing.TB, conn </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">websocket.Conn, message </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	t.</span><span style="color:var(--shiki-token-function);">Helper</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> conn.</span><span style="color:var(--shiki-token-function);">WriteMessage</span><span style="color:var(--shiki-color-text);">(websocket.TextMessage, []</span><span style="color:var(--shiki-token-function);">byte</span><span style="color:var(--shiki-color-text);">(message)); err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		t.</span><span style="color:var(--shiki-token-function);">Fatalf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;could not send message over ws connection </span><span style="color:var(--shiki-token-constant);">%v</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Now the tests are passing try running the server and declare some winners in <code>/game</code>. You should see them recorded in <code>/league</code>. Remember that every time we get a winner we <em>close the connection</em>, you will need to refresh the page to open the connection again.</p>
<p>We’ve made a trivial web form that lets users record the winner of a game. Let’s iterate on it to make it so the user can start a game by providing a number of players and the server will push messages to the client informing them of what the blind value is as time passes.</p>
<p>First update <code>game.html</code> to update our client side code for the new requirements</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="html" data-theme="default"><code data-language="html" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">&lt;!</span><span style="color:var(--shiki-token-string-expression);">DOCTYPE</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">html</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">&lt;</span><span style="color:var(--shiki-token-string-expression);">html</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">lang</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">&quot;en&quot;</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">&lt;</span><span style="color:var(--shiki-token-string-expression);">head</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">    &lt;</span><span style="color:var(--shiki-token-string-expression);">meta</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">charset</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">&quot;UTF-8&quot;</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">    &lt;</span><span style="color:var(--shiki-token-string-expression);">title</span><span style="color:var(--shiki-color-text);">>Lets play poker&lt;/</span><span style="color:var(--shiki-token-string-expression);">title</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">&lt;/</span><span style="color:var(--shiki-token-string-expression);">head</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">&lt;</span><span style="color:var(--shiki-token-string-expression);">body</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">&lt;</span><span style="color:var(--shiki-token-string-expression);">section</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">id</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">&quot;game&quot;</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">    &lt;</span><span style="color:var(--shiki-token-string-expression);">div</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">id</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">&quot;game-start&quot;</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">        &lt;</span><span style="color:var(--shiki-token-string-expression);">label</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">for</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">&quot;player-count&quot;</span><span style="color:var(--shiki-color-text);">>Number of players&lt;/</span><span style="color:var(--shiki-token-string-expression);">label</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">        &lt;</span><span style="color:var(--shiki-token-string-expression);">input</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">type</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">&quot;number&quot;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">id</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">&quot;player-count&quot;</span><span style="color:var(--shiki-color-text);">/></span></span>
<span data-line><span style="color:var(--shiki-color-text);">        &lt;</span><span style="color:var(--shiki-token-string-expression);">button</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">id</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">&quot;start-game&quot;</span><span style="color:var(--shiki-color-text);">>Start&lt;/</span><span style="color:var(--shiki-token-string-expression);">button</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">    &lt;/</span><span style="color:var(--shiki-token-string-expression);">div</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">    &lt;</span><span style="color:var(--shiki-token-string-expression);">div</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">id</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">&quot;declare-winner&quot;</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">        &lt;</span><span style="color:var(--shiki-token-string-expression);">label</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">for</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">&quot;winner&quot;</span><span style="color:var(--shiki-color-text);">>Winner&lt;/</span><span style="color:var(--shiki-token-string-expression);">label</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">        &lt;</span><span style="color:var(--shiki-token-string-expression);">input</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">type</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">&quot;text&quot;</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">id</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">&quot;winner&quot;</span><span style="color:var(--shiki-color-text);">/></span></span>
<span data-line><span style="color:var(--shiki-color-text);">        &lt;</span><span style="color:var(--shiki-token-string-expression);">button</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">id</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">&quot;winner-button&quot;</span><span style="color:var(--shiki-color-text);">>Declare winner&lt;/</span><span style="color:var(--shiki-token-string-expression);">button</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">    &lt;/</span><span style="color:var(--shiki-token-string-expression);">div</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">    &lt;</span><span style="color:var(--shiki-token-string-expression);">div</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">id</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">&quot;blind-value&quot;</span><span style="color:var(--shiki-color-text);">/></span></span>
<span data-line><span style="color:var(--shiki-color-text);">&lt;/</span><span style="color:var(--shiki-token-string-expression);">section</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">&lt;</span><span style="color:var(--shiki-token-string-expression);">section</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">id</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">&quot;game-end&quot;</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">    &lt;</span><span style="color:var(--shiki-token-string-expression);">h1</span><span style="color:var(--shiki-color-text);">>Another great game of poker everyone!&lt;/</span><span style="color:var(--shiki-token-string-expression);">h1</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">    &lt;</span><span style="color:var(--shiki-token-string-expression);">p</span><span style="color:var(--shiki-color-text);">>&lt;</span><span style="color:var(--shiki-token-string-expression);">a</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">href</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">&quot;/league&quot;</span><span style="color:var(--shiki-color-text);">>Go check the league table&lt;/</span><span style="color:var(--shiki-token-string-expression);">a</span><span style="color:var(--shiki-color-text);">>&lt;/</span><span style="color:var(--shiki-token-string-expression);">p</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">&lt;/</span><span style="color:var(--shiki-token-string-expression);">section</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">&lt;/</span><span style="color:var(--shiki-token-string-expression);">body</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">&lt;</span><span style="color:var(--shiki-token-string-expression);">script</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">type</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">&quot;application/javascript&quot;</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">startGame</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">document</span><span style="color:var(--shiki-token-function);">.getElementById</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">'game-start'</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">declareWinner</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">document</span><span style="color:var(--shiki-token-function);">.getElementById</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">'declare-winner'</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">submitWinnerButton</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">document</span><span style="color:var(--shiki-token-function);">.getElementById</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">'winner-button'</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">winnerInput</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">document</span><span style="color:var(--shiki-token-function);">.getElementById</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">'winner'</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">blindContainer</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">document</span><span style="color:var(--shiki-token-function);">.getElementById</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">'blind-value'</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">gameContainer</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">document</span><span style="color:var(--shiki-token-function);">.getElementById</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">'game'</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">gameEndContainer</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">document</span><span style="color:var(--shiki-token-function);">.getElementById</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">'game-end'</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-constant);">declareWinner</span><span style="color:var(--shiki-color-text);">.hidden </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">true</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-constant);">gameEndContainer</span><span style="color:var(--shiki-color-text);">.hidden </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">true</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-constant);">document</span><span style="color:var(--shiki-token-function);">.getElementById</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">'start-game'</span><span style="color:var(--shiki-color-text);">)</span><span style="color:var(--shiki-token-function);">.addEventListener</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">'click'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> event </span><span style="color:var(--shiki-token-keyword);">=></span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-constant);">startGame</span><span style="color:var(--shiki-color-text);">.hidden </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">true</span></span>
<span data-line><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-constant);">declareWinner</span><span style="color:var(--shiki-color-text);">.hidden </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">false</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">numberOfPlayers</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">document</span><span style="color:var(--shiki-token-function);">.getElementById</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">'player-count'</span><span style="color:var(--shiki-color-text);">).value</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> (window[</span><span style="color:var(--shiki-token-string-expression);">'WebSocket'</span><span style="color:var(--shiki-color-text);">]) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-keyword);">const</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">conn</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">new</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">WebSocket</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">'ws://'</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">document</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-constant);">location</span><span style="color:var(--shiki-color-text);">.host </span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'/ws'</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-constant);">submitWinnerButton</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-function);">onclick</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> event </span><span style="color:var(--shiki-token-keyword);">=></span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">                </span><span style="color:var(--shiki-token-constant);">conn</span><span style="color:var(--shiki-token-function);">.send</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">winnerInput</span><span style="color:var(--shiki-color-text);">.value)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">                </span><span style="color:var(--shiki-token-constant);">gameEndContainer</span><span style="color:var(--shiki-color-text);">.hidden </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">false</span></span>
<span data-line><span style="color:var(--shiki-color-text);">                </span><span style="color:var(--shiki-token-constant);">gameContainer</span><span style="color:var(--shiki-color-text);">.hidden </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">true</span></span>
<span data-line><span style="color:var(--shiki-color-text);">            }</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-constant);">conn</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-function);">onclose</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> evt </span><span style="color:var(--shiki-token-keyword);">=></span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">                </span><span style="color:var(--shiki-token-constant);">blindContainer</span><span style="color:var(--shiki-color-text);">.innerText </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'Connection closed'</span></span>
<span data-line><span style="color:var(--shiki-color-text);">            }</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-constant);">conn</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-function);">onmessage</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> evt </span><span style="color:var(--shiki-token-keyword);">=></span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">                </span><span style="color:var(--shiki-token-constant);">blindContainer</span><span style="color:var(--shiki-color-text);">.innerText </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">evt</span><span style="color:var(--shiki-color-text);">.data</span></span>
<span data-line><span style="color:var(--shiki-color-text);">            }</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">            </span><span style="color:var(--shiki-token-constant);">conn</span><span style="color:var(--shiki-color-text);">.</span><span style="color:var(--shiki-token-function);">onopen</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">function</span><span style="color:var(--shiki-color-text);"> () {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">                </span><span style="color:var(--shiki-token-constant);">conn</span><span style="color:var(--shiki-token-function);">.send</span><span style="color:var(--shiki-color-text);">(numberOfPlayers)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">            }</span></span>
<span data-line><span style="color:var(--shiki-color-text);">        }</span></span>
<span data-line><span style="color:var(--shiki-color-text);">    })</span></span>
<span data-line><span style="color:var(--shiki-color-text);">&lt;/</span><span style="color:var(--shiki-token-string-expression);">script</span><span style="color:var(--shiki-color-text);">></span></span>
<span data-line><span style="color:var(--shiki-color-text);">&lt;/</span><span style="color:var(--shiki-token-string-expression);">html</span><span style="color:var(--shiki-color-text);">></span></span></code></pre></div>
<p>The main changes is bringing in a section to enter the number of players and a section to display the blind value. We have a little logic to show/hide the user interface depending on the stage of the game.</p>
<p>Any message we receive via <code>conn.onmessage</code> we assume to be blind alerts and so we set the <code>blindContainer.innerText</code> accordingly.</p>
<p>How do we go about sending the blind alerts? In the previous chapter we introduced the idea of <code>Game</code> so our CLI code could call a <code>Game</code> and everything else would be taken care of including scheduling blind alerts. This turned out to be a good separation of concern.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Game</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">interface</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">Start</span><span style="color:var(--shiki-color-text);">(numberOfPlayers </span><span style="color:var(--shiki-token-keyword);">int</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">Finish</span><span style="color:var(--shiki-color-text);">(winner </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>When the user was prompted in the CLI for number of players it would <code>Start</code> the game which would kick off the blind alerts and when the user declared the winner they would <code>Finish</code>. This is the same requirements we have now, just a different way of getting the inputs; so we should look to re-use this concept if we can.</p>
<p>Our “real” implementation of <code>Game</code> is <code>TexasHoldem</code></p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">TexasHoldem</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">struct</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	alerter BlindAlerter</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	store   PlayerStore</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>By sending in a <code>BlindAlerter</code> <code>TexasHoldem</code> can schedule blind alerts to be sent to <em>wherever</em></p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">BlindAlerter</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">interface</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">ScheduleAlertAt</span><span style="color:var(--shiki-color-text);">(duration time.Duration, amount </span><span style="color:var(--shiki-token-keyword);">int</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>And as a reminder, here is our implementation of the <code>BlindAlerter</code> we use in the CLI.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">StdOutAlerter</span><span style="color:var(--shiki-color-text);">(duration time.Duration, amount </span><span style="color:var(--shiki-token-keyword);">int</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	time.</span><span style="color:var(--shiki-token-function);">AfterFunc</span><span style="color:var(--shiki-color-text);">(duration, </span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">() {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		fmt.</span><span style="color:var(--shiki-token-function);">Fprintf</span><span style="color:var(--shiki-color-text);">(os.Stdout, </span><span style="color:var(--shiki-token-string-expression);">&quot;Blind is now </span><span style="color:var(--shiki-token-constant);">%d</span><span style="color:var(--shiki-token-string-expression);">\n&quot;</span><span style="color:var(--shiki-color-text);">, amount)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	})</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>This works in CLI because we <em>always want to send the alerts to <code>os.Stdout</code></em> but this won’t work for our web server. For every request we get a new <code>http.ResponseWriter</code> which we then upgrade to <code>*websocket.Conn</code>. So we can’t know when constructing our dependencies where our alerts need to go.</p>
<p>For that reason we need to change <code>BlindAlerter.ScheduleAlertAt</code> so that it takes a destination for the alerts so that we can re-use it in our webserver.</p>
<p>Open <code>blind_alerter.go</code> and add the parameter to <code>io.Writer</code></p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">BlindAlerter</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">interface</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">ScheduleAlertAt</span><span style="color:var(--shiki-color-text);">(duration time.Duration, amount </span><span style="color:var(--shiki-token-keyword);">int</span><span style="color:var(--shiki-color-text);">, to io.Writer)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">BlindAlerterFunc</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">(duration time.Duration, amount </span><span style="color:var(--shiki-token-keyword);">int</span><span style="color:var(--shiki-color-text);">, to io.Writer)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (a BlindAlerterFunc) </span><span style="color:var(--shiki-token-function);">ScheduleAlertAt</span><span style="color:var(--shiki-color-text);">(duration time.Duration, amount </span><span style="color:var(--shiki-token-keyword);">int</span><span style="color:var(--shiki-color-text);">, to io.Writer) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">a</span><span style="color:var(--shiki-color-text);">(duration, amount, to)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>The idea of a <code>StdoutAlerter</code> doesn’t fit our new model so just rename it to <code>Alerter</code></p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Alerter</span><span style="color:var(--shiki-color-text);">(duration time.Duration, amount </span><span style="color:var(--shiki-token-keyword);">int</span><span style="color:var(--shiki-color-text);">, to io.Writer) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	time.</span><span style="color:var(--shiki-token-function);">AfterFunc</span><span style="color:var(--shiki-color-text);">(duration, </span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">() {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		fmt.</span><span style="color:var(--shiki-token-function);">Fprintf</span><span style="color:var(--shiki-color-text);">(to, </span><span style="color:var(--shiki-token-string-expression);">&quot;Blind is now </span><span style="color:var(--shiki-token-constant);">%d</span><span style="color:var(--shiki-token-string-expression);">\n&quot;</span><span style="color:var(--shiki-color-text);">, amount)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	})</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>If you try and compile, it will fail in <code>TexasHoldem</code> because it is calling <code>ScheduleAlertAt</code> without a destination, to get things compiling again <em>for now</em> hard-code it to <code>os.Stdout</code>.</p>
<p>Try and run the tests and they will fail because <code>SpyBlindAlerter</code> no longer implements <code>BlindAlerter</code>, fix this by updating the signature of <code>ScheduleAlertAt</code>, run the tests and we should still be green.</p>
<p>It doesn’t make any sense for <code>TexasHoldem</code> to know where to send blind alerts. Let’s now update <code>Game</code> so that when you start a game you declare <em>where</em> the alerts should go.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Game</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">interface</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">Start</span><span style="color:var(--shiki-color-text);">(numberOfPlayers </span><span style="color:var(--shiki-token-keyword);">int</span><span style="color:var(--shiki-color-text);">, alertsDestination io.Writer)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">Finish</span><span style="color:var(--shiki-color-text);">(winner </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Let the compiler tell you what you need to fix. The change isn’t so bad:</p>
<ul>
<li>Update <code>TexasHoldem</code> so it properly implements <code>Game</code></li>
<li>In <code>CLI</code> when we start the game, pass in our <code>out</code> property (<code>cli.game.Start(numberOfPlayers, cli.out)</code>)</li>
<li>In <code>TexasHoldem</code>’s test i use <code>game.Start(5, io.Discard)</code> to fix the compilation problem and configure the alert output to be discarded</li>
</ul>
<p>If you’ve got everything right, everything should be green! Now we can try and use <code>Game</code> within <code>Server</code>.</p>
<h2 id="write-the-test-first-2">Write the test first<a aria-hidden="true" tabindex="-1" href="#write-the-test-first-2" class="internal alias"> §</a></h2>
<p>The requirements of <code>CLI</code> and <code>Server</code> are the same! It’s just the delivery mechanism is different.</p>
<p>Let’s take a look at our <code>CLI</code> test for inspiration.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">t.</span><span style="color:var(--shiki-token-function);">Run</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;start game with 3 players and finish game with 'Chris' as winner&quot;</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	game </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">GameSpy{}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	out </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">bytes.Buffer{}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	in </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">userSends</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;3&quot;</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-string-expression);">&quot;Chris wins&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	poker.</span><span style="color:var(--shiki-token-function);">NewCLI</span><span style="color:var(--shiki-color-text);">(in, out, game).</span><span style="color:var(--shiki-token-function);">PlayPoker</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">assertMessagesSentToUser</span><span style="color:var(--shiki-color-text);">(t, out, poker.PlayerPrompt)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">assertGameStartedWith</span><span style="color:var(--shiki-color-text);">(t, game, </span><span style="color:var(--shiki-token-constant);">3</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">assertFinishCalledWith</span><span style="color:var(--shiki-color-text);">(t, game, </span><span style="color:var(--shiki-token-string-expression);">&quot;Chris&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">})</span></span></code></pre></div>
<p>It looks like we should be able to test drive out a similar outcome using <code>GameSpy</code></p>
<p>Replace the old websocket test with the following</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">t.</span><span style="color:var(--shiki-token-function);">Run</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;start a game with 3 players and declare Ruth the winner&quot;</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	game </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">poker.GameSpy{}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	winner </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;Ruth&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	server </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> httptest.</span><span style="color:var(--shiki-token-function);">NewServer</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-function);">mustMakePlayerServer</span><span style="color:var(--shiki-color-text);">(t, dummyPlayerStore, game))</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	ws </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">mustDialWS</span><span style="color:var(--shiki-color-text);">(t, </span><span style="color:var(--shiki-token-string-expression);">&quot;ws&quot;</span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);">strings.</span><span style="color:var(--shiki-token-function);">TrimPrefix</span><span style="color:var(--shiki-color-text);">(server.URL, </span><span style="color:var(--shiki-token-string-expression);">&quot;http&quot;</span><span style="color:var(--shiki-color-text);">)</span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-token-string-expression);">&quot;/ws&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">defer</span><span style="color:var(--shiki-color-text);"> server.</span><span style="color:var(--shiki-token-function);">Close</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">defer</span><span style="color:var(--shiki-color-text);"> ws.</span><span style="color:var(--shiki-token-function);">Close</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">writeWSMessage</span><span style="color:var(--shiki-color-text);">(t, ws, </span><span style="color:var(--shiki-token-string-expression);">&quot;3&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">writeWSMessage</span><span style="color:var(--shiki-color-text);">(t, ws, winner)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	time.</span><span style="color:var(--shiki-token-function);">Sleep</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">10</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);"> time.Millisecond)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">assertGameStartedWith</span><span style="color:var(--shiki-color-text);">(t, game, </span><span style="color:var(--shiki-token-constant);">3</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">assertFinishCalledWith</span><span style="color:var(--shiki-color-text);">(t, game, winner)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">})</span></span></code></pre></div>
<ul>
<li>As discussed we create a spy <code>Game</code> and pass it into <code>mustMakePlayerServer</code> (be sure to update the helper to support this).</li>
<li>We then send the web socket messages for a game.</li>
<li>Finally we assert that the game is started and finished with what we expect.</li>
</ul>
<h2 id="try-to-run-the-test-2">Try to run the test<a aria-hidden="true" tabindex="-1" href="#try-to-run-the-test-2" class="internal alias"> §</a></h2>
<p>You’ll have a number of compilation errors around <code>mustMakePlayerServer</code> in other tests. Introduce an unexported variable <code>dummyGame</code> and use it through all the tests that aren’t compiling</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">var</span><span style="color:var(--shiki-color-text);"> (</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	dummyGame </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">GameSpy{}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">)</span></span></code></pre></div>
<p>The final error is where we are trying to pass in <code>Game</code> to <code>NewPlayerServer</code> but it doesn’t support it yet</p>
<pre><code>./server_test.go:21:38: too many arguments in call to &quot;github.com/quii/learn-go-with-tests/WebSockets/v2&quot;.NewPlayerServer
	have (&quot;github.com/quii/learn-go-with-tests/WebSockets/v2&quot;.PlayerStore, &quot;github.com/quii/learn-go-with-tests/WebSockets/v2&quot;.Game)
	want (&quot;github.com/quii/learn-go-with-tests/WebSockets/v2&quot;.PlayerStore)
</code></pre>
<h2 id="write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output">Write the minimal amount of code for the test to run and check the failing test output<a aria-hidden="true" tabindex="-1" href="#write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output" class="internal alias"> §</a></h2>
<p>Just add it as an argument for now just to get the test running</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NewPlayerServer</span><span style="color:var(--shiki-color-text);">(store PlayerStore, game Game) (</span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">PlayerServer, </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);">)</span></span></code></pre></div>
<p>Finally!</p>
<pre><code>=== RUN   TestGame/start_a_game_with_3_players_and_declare_Ruth_the_winner
--- FAIL: TestGame (0.01s)
    --- FAIL: TestGame/start_a_game_with_3_players_and_declare_Ruth_the_winner (0.01s)
    	server_test.go:146: wanted Start called with 3 but got 0
    	server_test.go:147: expected finish called with 'Ruth' but got ''
FAIL
</code></pre>
<h2 id="write-enough-code-to-make-it-pass-2">Write enough code to make it pass<a aria-hidden="true" tabindex="-1" href="#write-enough-code-to-make-it-pass-2" class="internal alias"> §</a></h2>
<p>We need to add <code>Game</code> as a field to <code>PlayerServer</code> so that it can use it when it gets requests.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">PlayerServer</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">struct</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	store PlayerStore</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	http.Handler</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	template </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">template.Template</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	game     Game</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>(We already have a method called <code>game</code> so rename that to <code>playGame</code>)</p>
<p>Next lets assign it in our constructor</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">NewPlayerServer</span><span style="color:var(--shiki-color-text);">(store PlayerStore, game Game) (</span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">PlayerServer, </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	p </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">new</span><span style="color:var(--shiki-color-text);">(PlayerServer)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	tmpl, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> template.</span><span style="color:var(--shiki-token-function);">ParseFiles</span><span style="color:var(--shiki-color-text);">(htmlTemplatePath)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);">, fmt.</span><span style="color:var(--shiki-token-function);">Errorf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;problem opening </span><span style="color:var(--shiki-token-constant);">%s</span><span style="color:var(--shiki-token-string-expression);"> </span><span style="color:var(--shiki-token-constant);">%v</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, htmlTemplatePath, err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	p.game </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> game</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-comment);">// etc</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Now we can use our <code>Game</code> within <code>webSocket</code>.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (p </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">PlayerServer) </span><span style="color:var(--shiki-token-function);">webSocket</span><span style="color:var(--shiki-color-text);">(w http.ResponseWriter, r </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">http.Request) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	conn, _ </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> wsUpgrader.</span><span style="color:var(--shiki-token-function);">Upgrade</span><span style="color:var(--shiki-color-text);">(w, r, </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	_, numberOfPlayersMsg, _ </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> conn.</span><span style="color:var(--shiki-token-function);">ReadMessage</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	numberOfPlayers, _ </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> strconv.</span><span style="color:var(--shiki-token-function);">Atoi</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-function);">string</span><span style="color:var(--shiki-color-text);">(numberOfPlayersMsg))</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	p.game.</span><span style="color:var(--shiki-token-function);">Start</span><span style="color:var(--shiki-color-text);">(numberOfPlayers, io.Discard) </span><span style="color:var(--shiki-token-comment);">//todo: Don't discard the blinds messages!</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	_, winner, _ </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> conn.</span><span style="color:var(--shiki-token-function);">ReadMessage</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	p.game.</span><span style="color:var(--shiki-token-function);">Finish</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-function);">string</span><span style="color:var(--shiki-color-text);">(winner))</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Hooray! The tests pass.</p>
<p>We are not going to send the blind messages anywhere <em>just yet</em> as we need to have a think about that. When we call <code>game.Start</code> we send in <code>io.Discard</code> which will just discard any messages written to it.</p>
<p>For now start the web server up. You’ll need to update the <code>main.go</code> to pass a <code>Game</code> to the <code>PlayerServer</code></p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">main</span><span style="color:var(--shiki-color-text);">() {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	db, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> os.</span><span style="color:var(--shiki-token-function);">OpenFile</span><span style="color:var(--shiki-color-text);">(dbFileName, os.O_RDWR</span><span style="color:var(--shiki-token-keyword);">|</span><span style="color:var(--shiki-color-text);">os.O_CREATE, </span><span style="color:var(--shiki-token-constant);">0666</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		log.</span><span style="color:var(--shiki-token-function);">Fatalf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;problem opening </span><span style="color:var(--shiki-token-constant);">%s</span><span style="color:var(--shiki-token-string-expression);"> </span><span style="color:var(--shiki-token-constant);">%v</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, dbFileName, err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	store, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> poker.</span><span style="color:var(--shiki-token-function);">NewFileSystemPlayerStore</span><span style="color:var(--shiki-color-text);">(db)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		log.</span><span style="color:var(--shiki-token-function);">Fatalf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;problem creating file system player store, </span><span style="color:var(--shiki-token-constant);">%v</span><span style="color:var(--shiki-token-string-expression);"> &quot;</span><span style="color:var(--shiki-color-text);">, err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	game </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> poker.</span><span style="color:var(--shiki-token-function);">NewTexasHoldem</span><span style="color:var(--shiki-color-text);">(poker.</span><span style="color:var(--shiki-token-function);">BlindAlerterFunc</span><span style="color:var(--shiki-color-text);">(poker.Alerter), store)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	server, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> poker.</span><span style="color:var(--shiki-token-function);">NewPlayerServer</span><span style="color:var(--shiki-color-text);">(store, game)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		log.</span><span style="color:var(--shiki-token-function);">Fatalf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;problem creating player server </span><span style="color:var(--shiki-token-constant);">%v</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	log.</span><span style="color:var(--shiki-token-function);">Fatal</span><span style="color:var(--shiki-color-text);">(http.</span><span style="color:var(--shiki-token-function);">ListenAndServe</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;:5000&quot;</span><span style="color:var(--shiki-color-text);">, server))</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Discounting the fact we’re not getting blind alerts yet, the app does work! We’ve managed to re-use <code>Game</code> with <code>PlayerServer</code> and it has taken care of all the details. Once we figure out how to send our blind alerts through to the web sockets rather than discarding them it <em>should</em> all work.</p>
<p>Before that though, let’s tidy up some code.</p>
<h2 id="refactor-2">Refactor<a aria-hidden="true" tabindex="-1" href="#refactor-2" class="internal alias"> §</a></h2>
<p>The way we’re using WebSockets is fairly basic and the error handling is fairly naive, so I wanted to encapsulate that in a type just to remove that messiness from the server code. We may wish to revisit it later but for now this’ll tidy things up a bit</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">playerServerWS</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">struct</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">websocket.Conn</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">newPlayerServerWS</span><span style="color:var(--shiki-color-text);">(w http.ResponseWriter, r </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">http.Request) </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">playerServerWS {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	conn, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> wsUpgrader.</span><span style="color:var(--shiki-token-function);">Upgrade</span><span style="color:var(--shiki-color-text);">(w, r, </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		log.</span><span style="color:var(--shiki-token-function);">Printf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;problem upgrading connection to WebSockets </span><span style="color:var(--shiki-token-constant);">%v</span><span style="color:var(--shiki-token-string-expression);">\n&quot;</span><span style="color:var(--shiki-color-text);">, err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">playerServerWS{conn}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (w </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">playerServerWS) </span><span style="color:var(--shiki-token-function);">WaitForMsg</span><span style="color:var(--shiki-color-text);">() </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	_, msg, err </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> w.</span><span style="color:var(--shiki-token-function);">ReadMessage</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		log.</span><span style="color:var(--shiki-token-function);">Printf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;error reading from websocket </span><span style="color:var(--shiki-token-constant);">%v</span><span style="color:var(--shiki-token-string-expression);">\n&quot;</span><span style="color:var(--shiki-color-text);">, err)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">string</span><span style="color:var(--shiki-color-text);">(msg)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Now the server code is a bit simplified</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (p </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">PlayerServer) </span><span style="color:var(--shiki-token-function);">webSocket</span><span style="color:var(--shiki-color-text);">(w http.ResponseWriter, r </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">http.Request) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	ws </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">newPlayerServerWS</span><span style="color:var(--shiki-color-text);">(w, r)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	numberOfPlayersMsg </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> ws.</span><span style="color:var(--shiki-token-function);">WaitForMsg</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	numberOfPlayers, _ </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> strconv.</span><span style="color:var(--shiki-token-function);">Atoi</span><span style="color:var(--shiki-color-text);">(numberOfPlayersMsg)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	p.game.</span><span style="color:var(--shiki-token-function);">Start</span><span style="color:var(--shiki-color-text);">(numberOfPlayers, io.Discard) </span><span style="color:var(--shiki-token-comment);">//todo: Don't discard the blinds messages!</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	winner </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> ws.</span><span style="color:var(--shiki-token-function);">WaitForMsg</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	p.game.</span><span style="color:var(--shiki-token-function);">Finish</span><span style="color:var(--shiki-color-text);">(winner)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Once we figure out how to not discard the blind messages we’re done.</p>
<h3 id="lets-not-write-a-test">Let’s <em>not</em> write a test!<a aria-hidden="true" tabindex="-1" href="#lets-not-write-a-test" class="internal alias"> §</a></h3>
<p>Sometimes when we’re not sure how to do something, it’s best just to play around and try things out! Make sure your work is committed first because once we’ve figured out a way we should drive it through a test.</p>
<p>The problematic line of code we have is</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">p.game.</span><span style="color:var(--shiki-token-function);">Start</span><span style="color:var(--shiki-color-text);">(numberOfPlayers, io.Discard) </span><span style="color:var(--shiki-token-comment);">//todo: Don't discard the blinds messages!</span></span></code></pre></div>
<p>We need to pass in an <code>io.Writer</code> for the game to write the blind alerts to.</p>
<p>Wouldn’t it be nice if we could pass in our <code>playerServerWS</code> from before? It’s our wrapper around our WebSocket so it <em>feels</em> like we should be able to send that to our <code>Game</code> to send messages to.</p>
<p>Give it a go:</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (p </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">PlayerServer) </span><span style="color:var(--shiki-token-function);">webSocket</span><span style="color:var(--shiki-color-text);">(w http.ResponseWriter, r </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">http.Request) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	ws </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">newPlayerServerWS</span><span style="color:var(--shiki-color-text);">(w, r)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	numberOfPlayersMsg </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> ws.</span><span style="color:var(--shiki-token-function);">WaitForMsg</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	numberOfPlayers, _ </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> strconv.</span><span style="color:var(--shiki-token-function);">Atoi</span><span style="color:var(--shiki-color-text);">(numberOfPlayersMsg)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	p.game.</span><span style="color:var(--shiki-token-function);">Start</span><span style="color:var(--shiki-color-text);">(numberOfPlayers, ws)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-comment);">//etc...</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>The compiler complains</p>
<pre><code>./server.go:71:14: cannot use ws (type *playerServerWS) as type io.Writer in argument to p.game.Start:
	*playerServerWS does not implement io.Writer (missing Write method)
</code></pre>
<p>It seems the obvious thing to do, would be to make it so <code>playerServerWS</code> <em>does</em> implement <code>io.Writer</code>. To do so we use the underlying <code>*websocket.Conn</code> to use <code>WriteMessage</code> to send the message down the websocket</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (w </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">playerServerWS) </span><span style="color:var(--shiki-token-function);">Write</span><span style="color:var(--shiki-color-text);">(p []</span><span style="color:var(--shiki-token-keyword);">byte</span><span style="color:var(--shiki-color-text);">) (n </span><span style="color:var(--shiki-token-keyword);">int</span><span style="color:var(--shiki-color-text);">, err </span><span style="color:var(--shiki-token-keyword);">error</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	err </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> w.</span><span style="color:var(--shiki-token-function);">WriteMessage</span><span style="color:var(--shiki-color-text);">(websocket.TextMessage, p)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> err </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">nil</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">, err</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">len</span><span style="color:var(--shiki-color-text);">(p), </span><span style="color:var(--shiki-token-constant);">nil</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>This seems too easy! Try and run the application and see if it works.</p>
<p>Beforehand edit <code>TexasHoldem</code> so that the blind increment time is shorter so you can see it in action</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">blindIncrement </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> time.</span><span style="color:var(--shiki-token-function);">Duration</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">5</span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);">numberOfPlayers) </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);"> time.Second </span><span style="color:var(--shiki-token-comment);">// (rather than a minute)</span></span></code></pre></div>
<p>You should see it working! The blind amount increments in the browser as if by magic.</p>
<p>Now let’s revert the code and think how to test it. In order to <em>implement</em> it all we did was pass through to <code>StartGame</code> was <code>playerServerWS</code> rather than <code>io.Discard</code> so that might make you think we should perhaps spy on the call to verify it works.</p>
<p>Spying is great and helps us check implementation details but we should always try and favour testing the <em>real</em> behaviour if we can because when you decide to refactor it’s often spy tests that start failing because they are usually checking implementation details that you’re trying to change.</p>
<p>Our test currently opens a websocket connection to our running server and sends messages to make it do things. Equally we should be able to test the messages our server sends back over the websocket connection.</p>
<h2 id="write-the-test-first-3">Write the test first<a aria-hidden="true" tabindex="-1" href="#write-the-test-first-3" class="internal alias"> §</a></h2>
<p>We’ll edit our existing test.</p>
<p>Currently, our <code>GameSpy</code> does not send any data to <code>out</code> when you call <code>Start</code>. We should change it so we can configure it to send a canned message and then we can check that message gets sent to the websocket. This should give us confidence that we have configured things correctly whilst still exercising the real behaviour we want.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">type</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">GameSpy</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">struct</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	StartCalled     </span><span style="color:var(--shiki-token-keyword);">bool</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	StartCalledWith </span><span style="color:var(--shiki-token-keyword);">int</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	BlindAlert      []</span><span style="color:var(--shiki-token-keyword);">byte</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	FinishedCalled   </span><span style="color:var(--shiki-token-keyword);">bool</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	FinishCalledWith </span><span style="color:var(--shiki-token-keyword);">string</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Add <code>BlindAlert</code> field.</p>
<p>Update <code>GameSpy</code> <code>Start</code> to send the canned message to <code>out</code>.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (g </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">GameSpy) </span><span style="color:var(--shiki-token-function);">Start</span><span style="color:var(--shiki-color-text);">(numberOfPlayers </span><span style="color:var(--shiki-token-keyword);">int</span><span style="color:var(--shiki-color-text);">, out io.Writer) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	g.StartCalled </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">true</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	g.StartCalledWith </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> numberOfPlayers</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	out.</span><span style="color:var(--shiki-token-function);">Write</span><span style="color:var(--shiki-color-text);">(g.BlindAlert)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>This now means when we exercise <code>PlayerServer</code> when it tries to <code>Start</code> the game it should end up sending messages through the websocket if things are working right.</p>
<p>Finally, we can update the test</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">t.</span><span style="color:var(--shiki-token-function);">Run</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;start a game with 3 players, send some blind alerts down WS and declare Ruth the winner&quot;</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	wantedBlindAlert </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;Blind is 100&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	winner </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;Ruth&quot;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	game </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">GameSpy{BlindAlert: []</span><span style="color:var(--shiki-token-function);">byte</span><span style="color:var(--shiki-color-text);">(wantedBlindAlert)}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	server </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> httptest.</span><span style="color:var(--shiki-token-function);">NewServer</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-function);">mustMakePlayerServer</span><span style="color:var(--shiki-color-text);">(t, dummyPlayerStore, game))</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	ws </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">mustDialWS</span><span style="color:var(--shiki-color-text);">(t, </span><span style="color:var(--shiki-token-string-expression);">&quot;ws&quot;</span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);">strings.</span><span style="color:var(--shiki-token-function);">TrimPrefix</span><span style="color:var(--shiki-color-text);">(server.URL, </span><span style="color:var(--shiki-token-string-expression);">&quot;http&quot;</span><span style="color:var(--shiki-color-text);">)</span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-token-string-expression);">&quot;/ws&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">defer</span><span style="color:var(--shiki-color-text);"> server.</span><span style="color:var(--shiki-token-function);">Close</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">defer</span><span style="color:var(--shiki-color-text);"> ws.</span><span style="color:var(--shiki-token-function);">Close</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">writeWSMessage</span><span style="color:var(--shiki-color-text);">(t, ws, </span><span style="color:var(--shiki-token-string-expression);">&quot;3&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">writeWSMessage</span><span style="color:var(--shiki-color-text);">(t, ws, winner)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	time.</span><span style="color:var(--shiki-token-function);">Sleep</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">10</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);"> time.Millisecond)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">assertGameStartedWith</span><span style="color:var(--shiki-color-text);">(t, game, </span><span style="color:var(--shiki-token-constant);">3</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">assertFinishCalledWith</span><span style="color:var(--shiki-color-text);">(t, game, winner)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	_, gotBlindAlert, _ </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> ws.</span><span style="color:var(--shiki-token-function);">ReadMessage</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">string</span><span style="color:var(--shiki-color-text);">(gotBlindAlert) </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> wantedBlindAlert {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		t.</span><span style="color:var(--shiki-token-function);">Errorf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;got blind alert </span><span style="color:var(--shiki-token-constant);">%q</span><span style="color:var(--shiki-token-string-expression);">, want </span><span style="color:var(--shiki-token-constant);">%q</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-function);">string</span><span style="color:var(--shiki-color-text);">(gotBlindAlert), wantedBlindAlert)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">})</span></span></code></pre></div>
<ul>
<li>We’ve added a <code>wantedBlindAlert</code> and configured our <code>GameSpy</code> to send it to <code>out</code> if <code>Start</code> is called.</li>
<li>We hope it gets sent in the websocket connection so we’ve added a call to <code>ws.ReadMessage()</code> to wait for a message to be sent and then check it’s the one we expected.</li>
</ul>
<h2 id="try-to-run-the-test-3">Try to run the test<a aria-hidden="true" tabindex="-1" href="#try-to-run-the-test-3" class="internal alias"> §</a></h2>
<p>You should find the test hangs forever. This is because <code>ws.ReadMessage()</code> will block until it gets a message, which it never will.</p>
<h2 id="write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output-1">Write the minimal amount of code for the test to run and check the failing test output<a aria-hidden="true" tabindex="-1" href="#write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output-1" class="internal alias"> §</a></h2>
<p>We should never have tests that hang so let’s introduce a way of handling code that we want to timeout.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">within</span><span style="color:var(--shiki-color-text);">(t testing.TB, d time.Duration, assert </span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">()) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	t.</span><span style="color:var(--shiki-token-function);">Helper</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	done </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">make</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-keyword);">chan</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">struct</span><span style="color:var(--shiki-color-text);">{}, </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">go</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">() {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-function);">assert</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		done </span><span style="color:var(--shiki-token-keyword);">&lt;-</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">struct</span><span style="color:var(--shiki-color-text);">{}{}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}()</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">select</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">case</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&lt;-</span><span style="color:var(--shiki-color-text);">time.</span><span style="color:var(--shiki-token-function);">After</span><span style="color:var(--shiki-color-text);">(d):</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		t.</span><span style="color:var(--shiki-token-function);">Error</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;timed out&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">case</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&lt;-</span><span style="color:var(--shiki-color-text);">done:</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>What <code>within</code> does is take a function <code>assert</code> as an argument and then runs it in a go routine. If/When the function finishes it will signal it is done via the <code>done</code> channel.</p>
<p>While that happens we use a <code>select</code> statement which lets us wait for a channel to send a message. From here it is a race between the <code>assert</code> function and <code>time.After</code> which will send a signal when the duration has occurred.</p>
<p>Finally, I made a helper function for our assertion just to make things a bit neater</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">assertWebsocketGotMsg</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T, ws </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">websocket.Conn, want </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	_, msg, _ </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> ws.</span><span style="color:var(--shiki-token-function);">ReadMessage</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">string</span><span style="color:var(--shiki-color-text);">(msg) </span><span style="color:var(--shiki-token-keyword);">!=</span><span style="color:var(--shiki-color-text);"> want {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		t.</span><span style="color:var(--shiki-token-function);">Errorf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">`got &quot;</span><span style="color:var(--shiki-token-constant);">%s</span><span style="color:var(--shiki-token-string-expression);">&quot;, want &quot;</span><span style="color:var(--shiki-token-constant);">%s</span><span style="color:var(--shiki-token-string-expression);">&quot;`</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-function);">string</span><span style="color:var(--shiki-color-text);">(msg), want)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Here’s how the test reads now</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">t.</span><span style="color:var(--shiki-token-function);">Run</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;start a game with 3 players, send some blind alerts down WS and declare Ruth the winner&quot;</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">(t </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">testing.T) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	wantedBlindAlert </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;Blind is 100&quot;</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	winner </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">&quot;Ruth&quot;</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	game </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">&amp;</span><span style="color:var(--shiki-color-text);">GameSpy{BlindAlert: []</span><span style="color:var(--shiki-token-function);">byte</span><span style="color:var(--shiki-color-text);">(wantedBlindAlert)}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	server </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> httptest.</span><span style="color:var(--shiki-token-function);">NewServer</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-function);">mustMakePlayerServer</span><span style="color:var(--shiki-color-text);">(t, dummyPlayerStore, game))</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	ws </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">mustDialWS</span><span style="color:var(--shiki-color-text);">(t, </span><span style="color:var(--shiki-token-string-expression);">&quot;ws&quot;</span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-color-text);">strings.</span><span style="color:var(--shiki-token-function);">TrimPrefix</span><span style="color:var(--shiki-color-text);">(server.URL, </span><span style="color:var(--shiki-token-string-expression);">&quot;http&quot;</span><span style="color:var(--shiki-color-text);">)</span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-token-string-expression);">&quot;/ws&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">defer</span><span style="color:var(--shiki-color-text);"> server.</span><span style="color:var(--shiki-token-function);">Close</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">defer</span><span style="color:var(--shiki-color-text);"> ws.</span><span style="color:var(--shiki-token-function);">Close</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">writeWSMessage</span><span style="color:var(--shiki-color-text);">(t, ws, </span><span style="color:var(--shiki-token-string-expression);">&quot;3&quot;</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">writeWSMessage</span><span style="color:var(--shiki-color-text);">(t, ws, winner)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	time.</span><span style="color:var(--shiki-token-function);">Sleep</span><span style="color:var(--shiki-color-text);">(tenMS)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">assertGameStartedWith</span><span style="color:var(--shiki-color-text);">(t, game, </span><span style="color:var(--shiki-token-constant);">3</span><span style="color:var(--shiki-color-text);">)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">assertFinishCalledWith</span><span style="color:var(--shiki-color-text);">(t, game, winner)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-function);">within</span><span style="color:var(--shiki-color-text);">(t, tenMS, </span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">() { </span><span style="color:var(--shiki-token-function);">assertWebsocketGotMsg</span><span style="color:var(--shiki-color-text);">(t, ws, wantedBlindAlert) })</span></span>
<span data-line><span style="color:var(--shiki-color-text);">})</span></span></code></pre></div>
<p>Now if you run the test…</p>
<pre><code>=== RUN   TestGame
=== RUN   TestGame/start_a_game_with_3_players,_send_some_blind_alerts_down_WS_and_declare_Ruth_the_winner
--- FAIL: TestGame (0.02s)
    --- FAIL: TestGame/start_a_game_with_3_players,_send_some_blind_alerts_down_WS_and_declare_Ruth_the_winner (0.02s)
    	server_test.go:143: timed out
    	server_test.go:150: got &quot;&quot;, want &quot;Blind is 100&quot;
</code></pre>
<h2 id="write-enough-code-to-make-it-pass-3">Write enough code to make it pass<a aria-hidden="true" tabindex="-1" href="#write-enough-code-to-make-it-pass-3" class="internal alias"> §</a></h2>
<p>Finally, we can now change our server code, so it sends our WebSocket connection to the game when it starts</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> (p </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">PlayerServer) </span><span style="color:var(--shiki-token-function);">webSocket</span><span style="color:var(--shiki-color-text);">(w http.ResponseWriter, r </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">http.Request) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	ws </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">newPlayerServerWS</span><span style="color:var(--shiki-color-text);">(w, r)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	numberOfPlayersMsg </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> ws.</span><span style="color:var(--shiki-token-function);">WaitForMsg</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	numberOfPlayers, _ </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> strconv.</span><span style="color:var(--shiki-token-function);">Atoi</span><span style="color:var(--shiki-color-text);">(numberOfPlayersMsg)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	p.game.</span><span style="color:var(--shiki-token-function);">Start</span><span style="color:var(--shiki-color-text);">(numberOfPlayers, ws)</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	winner </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> ws.</span><span style="color:var(--shiki-token-function);">WaitForMsg</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	p.game.</span><span style="color:var(--shiki-token-function);">Finish</span><span style="color:var(--shiki-color-text);">(winner)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<h2 id="refactor-3">Refactor<a aria-hidden="true" tabindex="-1" href="#refactor-3" class="internal alias"> §</a></h2>
<p>The server code was a very small change so there’s not a lot to change here but the test code still has a <code>time.Sleep</code> call because we have to wait for our server to do its work asynchronously.</p>
<p>We can refactor our helpers <code>assertGameStartedWith</code> and <code>assertFinishCalledWith</code> so that they can retry their assertions for a short period before failing.</p>
<p>Here’s how you can do it for <code>assertFinishCalledWith</code> and you can use the same approach for the other helper.</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">assertFinishCalledWith</span><span style="color:var(--shiki-color-text);">(t testing.TB, game </span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">GameSpy, winner </span><span style="color:var(--shiki-token-keyword);">string</span><span style="color:var(--shiki-color-text);">) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	t.</span><span style="color:var(--shiki-token-function);">Helper</span><span style="color:var(--shiki-color-text);">()</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	passed </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">retryUntil</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">500</span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">time.Millisecond, </span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">() </span><span style="color:var(--shiki-token-keyword);">bool</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> game.FinishCalledWith </span><span style="color:var(--shiki-token-keyword);">==</span><span style="color:var(--shiki-color-text);"> winner</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	})</span></span>
<span data-line> </span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">!</span><span style="color:var(--shiki-color-text);">passed {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		t.</span><span style="color:var(--shiki-token-function);">Errorf</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">&quot;expected finish called with </span><span style="color:var(--shiki-token-constant);">%q</span><span style="color:var(--shiki-token-string-expression);"> but got </span><span style="color:var(--shiki-token-constant);">%q</span><span style="color:var(--shiki-token-string-expression);">&quot;</span><span style="color:var(--shiki-color-text);">, winner, game.FinishCalledWith)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<p>Here is how <code>retryUntil</code> is defined</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="go" data-theme="default"><code data-language="go" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">retryUntil</span><span style="color:var(--shiki-color-text);">(d time.Duration, f </span><span style="color:var(--shiki-token-keyword);">func</span><span style="color:var(--shiki-color-text);">() </span><span style="color:var(--shiki-token-keyword);">bool</span><span style="color:var(--shiki-color-text);">) </span><span style="color:var(--shiki-token-keyword);">bool</span><span style="color:var(--shiki-color-text);"> {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	deadline </span><span style="color:var(--shiki-token-keyword);">:=</span><span style="color:var(--shiki-color-text);"> time.</span><span style="color:var(--shiki-token-function);">Now</span><span style="color:var(--shiki-color-text);">().</span><span style="color:var(--shiki-token-function);">Add</span><span style="color:var(--shiki-color-text);">(d)</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">for</span><span style="color:var(--shiki-color-text);"> time.</span><span style="color:var(--shiki-token-function);">Now</span><span style="color:var(--shiki-color-text);">().</span><span style="color:var(--shiki-token-function);">Before</span><span style="color:var(--shiki-color-text);">(deadline) {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		</span><span style="color:var(--shiki-token-keyword);">if</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">f</span><span style="color:var(--shiki-color-text);">() {</span></span>
<span data-line><span style="color:var(--shiki-color-text);">			</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">true</span></span>
<span data-line><span style="color:var(--shiki-color-text);">		}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	}</span></span>
<span data-line><span style="color:var(--shiki-color-text);">	</span><span style="color:var(--shiki-token-keyword);">return</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">false</span></span>
<span data-line><span style="color:var(--shiki-color-text);">}</span></span></code></pre></div>
<h2 id="wrapping-up">Wrapping up<a aria-hidden="true" tabindex="-1" href="#wrapping-up" class="internal alias"> §</a></h2>
<p>Our application is now complete. A game of poker can be started via a web browser and the users are informed of the blind bet value as time goes by via WebSockets. When the game finishes they can record the winner which is persisted using code we wrote a few chapters ago. The players can find out who is the best (or luckiest) poker player using the website’s <code>/league</code> endpoint.</p>
<p>Through the journey we have made mistakes but with the TDD flow we have never been very far away from working software. We were free to keep iterating and experimenting.</p>
<p>The final chapter will retrospect on the approach, the design we’ve arrived at and tie up some loose ends.</p>
<p>We covered a few things in this chapter</p>
<h3 id="websockets-1">WebSockets<a aria-hidden="true" tabindex="-1" href="#websockets-1" class="internal alias"> §</a></h3>
<ul>
<li>Convenient way of sending messages between clients and servers that does not require the client to keep polling the server. Both the client and server code we have is very simple.</li>
<li>Trivial to test, but you have to be wary of the asynchronous nature of the tests</li>
</ul>
<h3 id="handling-code-in-tests-that-can-be-delayed-or-never-finish">Handling code in tests that can be delayed or never finish<a aria-hidden="true" tabindex="-1" href="#handling-code-in-tests-that-can-be-delayed-or-never-finish" class="internal alias"> §</a></h3>
<ul>
<li>Create helper functions to retry assertions and add timeouts.</li>
<li>We can use go routines to ensure the assertions don’t block anything and then use channels to let them signal that they have finished, or not.</li>
<li>The <code>time</code> package has some helpful functions which also send signals via channels about events in time so we can set timeouts</li>
</ul></article></div><div class="right sidebar"><div class="graph "><h3>Graph View</h3><div class="graph-outer"><div id="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[]}"></div><svg version="1.1" id="global-graph-icon" xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xmlSpace="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
	s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
	c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
	C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
	c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
	v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
	s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
	C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
	S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
	s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
	s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></div><div id="global-graph-outer"><div id="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[]}"></div></div></div><div class="toc desktop-only"><button type="button" id="toc" class><h3>Table of Contents</h3><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="toc-content"><ul class="overflow"><li class="depth-0"><a href="#websockets" data-for="websockets">WebSockets</a></li><li class="depth-1"><a href="#project-recap" data-for="project-recap">Project recap</a></li><li class="depth-1"><a href="#next-steps" data-for="next-steps">Next steps</a></li><li class="depth-2"><a href="#what-about-tests-for-the-javascript-" data-for="what-about-tests-for-the-javascript-">What about tests for the JavaScript ?</a></li><li class="depth-1"><a href="#write-the-test-first" data-for="write-the-test-first">Write the test first</a></li><li class="depth-1"><a href="#try-to-run-the-test" data-for="try-to-run-the-test">Try to run the test</a></li><li class="depth-1"><a href="#write-enough-code-to-make-it-pass" data-for="write-enough-code-to-make-it-pass">Write enough code to make it pass</a></li><li class="depth-1"><a href="#refactor" data-for="refactor">Refactor</a></li><li class="depth-2"><a href="#how-do-we-test-we-return-the-correct-markup" data-for="how-do-we-test-we-return-the-correct-markup">How do we test we return the correct markup?</a></li><li class="depth-1"><a href="#write-the-test-first-1" data-for="write-the-test-first-1">Write the test first</a></li><li class="depth-1"><a href="#try-to-run-the-test-1" data-for="try-to-run-the-test-1">Try to run the test</a></li><li class="depth-1"><a href="#write-enough-code-to-make-it-pass-1" data-for="write-enough-code-to-make-it-pass-1">Write enough code to make it pass</a></li><li class="depth-1"><a href="#refactor-1" data-for="refactor-1">Refactor</a></li><li class="depth-1"><a href="#write-the-test-first-2" data-for="write-the-test-first-2">Write the test first</a></li><li class="depth-1"><a href="#try-to-run-the-test-2" data-for="try-to-run-the-test-2">Try to run the test</a></li><li class="depth-1"><a href="#write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output" data-for="write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output">Write the minimal amount of code for the test to run and check the failing test output</a></li><li class="depth-1"><a href="#write-enough-code-to-make-it-pass-2" data-for="write-enough-code-to-make-it-pass-2">Write enough code to make it pass</a></li><li class="depth-1"><a href="#refactor-2" data-for="refactor-2">Refactor</a></li><li class="depth-2"><a href="#lets-not-write-a-test" data-for="lets-not-write-a-test">Let's not write a test!</a></li><li class="depth-1"><a href="#write-the-test-first-3" data-for="write-the-test-first-3">Write the test first</a></li><li class="depth-1"><a href="#try-to-run-the-test-3" data-for="try-to-run-the-test-3">Try to run the test</a></li><li class="depth-1"><a href="#write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output-1" data-for="write-the-minimal-amount-of-code-for-the-test-to-run-and-check-the-failing-test-output-1">Write the minimal amount of code for the test to run and check the failing test output</a></li><li class="depth-1"><a href="#write-enough-code-to-make-it-pass-3" data-for="write-enough-code-to-make-it-pass-3">Write enough code to make it pass</a></li><li class="depth-1"><a href="#refactor-3" data-for="refactor-3">Refactor</a></li><li class="depth-1"><a href="#wrapping-up" data-for="wrapping-up">Wrapping up</a></li><li class="depth-2"><a href="#websockets-1" data-for="websockets-1">WebSockets</a></li><li class="depth-2"><a href="#handling-code-in-tests-that-can-be-delayed-or-never-finish" data-for="handling-code-in-tests-that-can-be-delayed-or-never-finish">Handling code in tests that can be delayed or never finish</a></li></ul></div></div><div class="backlinks "><h3>Backlinks</h3><ul class="overflow"><li>No backlinks found</li></ul></div></div></div><footer class><hr/><p>Created with <a href="https://quartz.jzhao.xyz/">Quartz v4.1.1</a>, © 2023</p><ul><li><a href="https://github.com/mindulle">GitHub</a></li></ul></footer></div></body><script type="application/javascript">// quartz/components/scripts/quartz/components/scripts/callout.inline.ts
function toggleCallout() {
  const outerBlock = this.parentElement;
  outerBlock.classList.toggle(`is-collapsed`);
  const collapsed = outerBlock.classList.contains(`is-collapsed`);
  const height = collapsed ? this.scrollHeight : outerBlock.scrollHeight;
  outerBlock.style.maxHeight = height + `px`;
  let current = outerBlock;
  let parent = outerBlock.parentElement;
  while (parent) {
    if (!parent.classList.contains(`callout`)) {
      return;
    }
    const collapsed2 = parent.classList.contains(`is-collapsed`);
    const height2 = collapsed2 ? parent.scrollHeight : parent.scrollHeight + current.scrollHeight;
    parent.style.maxHeight = height2 + `px`;
    current = parent;
    parent = parent.parentElement;
  }
}
function setupCallout() {
  const collapsible = document.getElementsByClassName(
    `callout is-collapsible`
  );
  for (const div of collapsible) {
    const title = div.firstElementChild;
    if (title) {
      title.removeEventListener(`click`, toggleCallout);
      title.addEventListener(`click`, toggleCallout);
      const collapsed = div.classList.contains(`is-collapsed`);
      const height = collapsed ? title.scrollHeight : div.scrollHeight;
      div.style.maxHeight = height + `px`;
    }
  }
}
document.addEventListener(`nav`, setupCallout);
window.addEventListener(`resize`, setupCallout);
</script><script type="module">
          import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
          const darkMode = document.documentElement.getAttribute('saved-theme') === 'dark'
          mermaid.initialize({
            startOnLoad: false,
            securityLevel: 'loose',
            theme: darkMode ? 'dark' : 'default'
          });
          document.addEventListener('nav', async () => {
            await mermaid.run({
              querySelector: '.mermaid'
            })
          });
          </script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/copy-tex.min.js" type="application/javascript"></script><script type="application/javascript">
          const socket = new WebSocket('ws://localhost:3001')
          socket.addEventListener('message', () => document.location.reload())
        </script><script src="../../../../../postscript.js" type="module"></script></html>